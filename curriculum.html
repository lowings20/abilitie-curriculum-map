<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Abilitie Leadership Academy — Curriculum Map</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Battambang:wght@400;700&family=Public+Sans:wght@300;400;500;600;700;800&display=swap');

  :root {
    /* Abilitie Primary Blues */
    --navy: #0e0039;
    --navy-light: #12004a;
    --navy-mid: #151d60;
    --teal: #3b33d0;
    --teal-dark: #4a4fcc;
    --teal-glow: rgba(74,79,204,0.15);

    /* Abilitie Primary Gold */
    --gold: #f6cb4d;
    --gold-dark: #b48c18;
    --coral: #fb5a51;

    /* Abilitie Secondary Green */
    --sage: #1e7e49;
    --sage-light: #56ca8a;

    /* Abilitie Grays */
    --white: #ffffff;
    --off-white: #f4f6f8;
    --gray-100: #f9fafb;
    --gray-200: #dfe3e8;
    --gray-300: #c4cdd5;
    --gray-400: #919eab;
    --gray-500: #637381;
    --gray-600: #454f5b;
    --gray-700: #212b36;
    --gray-800: #212b36;

    /* Pillar Colors - Abilitie aligned */
    --pill-ba: #3b33d0;
    --pill-cf: #b48c18;
    --pill-tm: #1e7e49;
    --pill-ts: #586bc8;

    /* Shadows & Radius */
    --shadow: 0 4px 24px rgba(14,0,57,0.08);
    --shadow-lg: 0 8px 40px rgba(14,0,57,0.12);
    --radius: 12px;
    --radius-sm: 8px;
    --transition: 0.3s cubic-bezier(0.4,0,0.2,1);

    /* Transparent Blues */
    --blue-48: rgba(74,79,204,0.48);
    --blue-24: rgba(74,79,204,0.24);
    --blue-12: rgba(74,79,204,0.12);
    --blue-8: rgba(74,79,204,0.08);

    /* Transparent Gold */
    --gold-24: rgba(246,203,77,0.24);
    --gold-12: rgba(246,203,77,0.12);

    /* Transparent Green */
    --green-12: rgba(30,126,73,0.12);
    --green-8: rgba(30,126,73,0.08);

    /* Transparent Red/Coral */
    --red-12: rgba(251,90,81,0.12);
    --red-8: rgba(251,90,81,0.08);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'Public Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--off-white);
    color: var(--gray-700);
    line-height: 1.6;
    overflow-x: hidden;
  }

  h1, h2, h3 {
    font-family: 'Battambang', 'Public Sans', sans-serif;
  }

  /* HERO */
  .hero {
    background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 50%, var(--navy-mid) 100%);
    color: var(--white);
    padding: 60px 40px 50px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -25%;
    width: 150%;
    height: 200%;
    background: radial-gradient(ellipse at 30% 50%, rgba(59,51,208,0.12) 0%, transparent 60%),
                radial-gradient(ellipse at 70% 30%, rgba(246,203,77,0.08) 0%, transparent 50%);
    pointer-events: none;
  }
  .hero-badge {
    display: inline-block;
    font-size: 11px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--gold);
    font-weight: 600;
    margin-bottom: 16px;
  }
  .hero h1 {
    font-family: 'Battambang', 'Public Sans', sans-serif;
    font-size: 40px;
    font-weight: 700;
    letter-spacing: -0.5px;
    margin-bottom: 12px;
    position: relative;
  }
  .hero p {
    font-size: 16px;
    color: var(--gray-300);
    max-width: 680px;
    margin: 0 auto 28px;
    font-weight: 400;
    line-height: 1.7;
  }
  .hero-meta {
    display: flex;
    justify-content: center;
    gap: 32px;
    flex-wrap: wrap;
  }
  .hero-stat {
    text-align: center;
  }
  .hero-stat .num {
    font-size: 28px;
    font-weight: 700;
    color: var(--gold);
  }
  .hero-stat .label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--gray-400);
    margin-top: 2px;
  }

  /* NAV TABS */
  .nav-bar {
    background: var(--white);
    border-bottom: 1px solid var(--gray-200);
    padding: 0 40px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 12px rgba(14,0,57,0.04);
  }
  .nav-inner {
    max-width: 1320px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .nav-tab {
    padding: 16px 24px;
    font-size: 14px;
    font-weight: 600;
    color: var(--gray-400);
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: var(--transition);
    white-space: nowrap;
    user-select: none;
  }
  .nav-tab:hover { color: var(--gray-800); }
  .nav-tab.active {
    color: var(--navy);
    border-bottom-color: var(--teal);
  }
  .nav-tab .dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 8px;
    vertical-align: middle;
  }
  .dot-ba { background: var(--pill-ba); }
  .dot-cf { background: var(--pill-cf); }
  .dot-tm { background: var(--pill-tm); }

  /* Simple Nav */
  .nav-simple {
    justify-content: space-between;
  }
  .nav-main-buttons {
    display: flex;
    gap: 0;
    align-items: center;
    flex: 1;
    margin-left: 20px;
  }
  .nav-main-btn {
    padding: 12px 24px;
    margin: 8px 4px;
    font-size: 14px;
    font-weight: 600;
    background: var(--white);
    color: var(--navy);
    border: 2px solid var(--gray-200);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    flex: 1;
  }
  .nav-main-btn:hover {
    background: var(--gray-100);
    border-color: var(--teal);
    color: var(--teal-dark);
  }
  .nav-main-btn.active {
    border-color: var(--teal);
    background: var(--blue-8);
    color: var(--teal-dark);
  }
  .nav-dropdown {
    flex: 1;
    display: flex;
  }
  .nav-dropdown .nav-main-btn {
    width: 100%;
  }
  .dropdown-arrow {
    font-size: 10px;
    transition: transform 0.2s;
  }
  .nav-dropdown {
    position: relative;
  }
  .nav-dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: 8px;
    background: var(--white);
    border-radius: 10px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
    min-width: 280px;
    padding: 8px 0;
    display: none;
    z-index: 200;
  }
  .nav-dropdown-menu.show {
    display: block;
  }
  .dropdown-item {
    padding: 12px 20px;
    font-size: 14px;
    color: var(--gray-800);
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
  }
  .dropdown-item:hover {
    background: var(--gray-100);
  }
  .dropdown-item .dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 10px;
  }
  .dropdown-divider {
    height: 1px;
    background: var(--gray-200);
    margin: 8px 0;
  }

  /* MAIN CONTENT */
  .main { max-width: 1320px; margin: 0 auto; padding: 40px 40px 80px; }

  /* VIEW PANELS */
  .view-panel { display: none; }
  .view-panel.active { display: block; }

  /* OVERVIEW GRID */
  .overview-intro {
    text-align: center;
    margin-bottom: 40px;
  }
  .overview-intro h2 {
    font-size: 28px;
    font-weight: 800;
    color: var(--navy);
    margin-bottom: 8px;
  }
  .overview-intro p {
    font-size: 15px;
    color: var(--gray-600);
    max-width: 600px;
    margin: 0 auto;
  }

  .grid-wrapper {
    display: grid;
    grid-template-columns: 160px 1fr 1fr 1fr;
    gap: 16px;
    margin-bottom: 48px;
  }
  .grid-header {
    font-size: 13px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    padding: 14px 16px;
    border-radius: var(--radius-sm);
    text-align: center;
    color: var(--white);
  }
  .grid-header.ba { background: var(--pill-ba); }
  .grid-header.cf { background: var(--pill-cf); }
  .grid-header.tm { background: var(--pill-tm); }
  .grid-header.corner {
    background: transparent;
    color: var(--gray-400);
    font-size: 11px;
  }

  .grid-level-label {
    writing-mode: horizontal-tb;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px 12px;
    border-radius: var(--radius-sm);
    background: var(--navy);
    color: var(--white);
    font-weight: 700;
    font-size: 13px;
    text-align: center;
    letter-spacing: 1px;
    line-height: 1.3;
  }
  .grid-level-label .level-sub {
    display: block;
    font-size: 10px;
    font-weight: 400;
    opacity: 0.7;
    margin-top: 4px;
    letter-spacing: 0.5px;
  }

  .grid-cell {
    background: var(--white);
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: var(--shadow);
    cursor: pointer;
    transition: var(--transition);
    border: 2px solid transparent;
    position: relative;
    overflow: hidden;
  }
  .grid-cell:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }
  .grid-cell.ba-cell:hover { border-color: var(--pill-ba); }
  .grid-cell.cf-cell:hover { border-color: var(--pill-cf); }
  .grid-cell.tm-cell:hover { border-color: var(--pill-tm); }
  .grid-cell.empty-cell {
    background: var(--gray-50);
    cursor: default;
    opacity: 0.5;
  }
  .grid-cell.empty-cell:hover {
    transform: none;
    box-shadow: var(--shadow);
    border-color: transparent;
  }
  .cell-empty {
    color: var(--gray-400);
    font-size: 20px;
    text-align: center;
  }

  .cell-sim {
    font-size: 16px;
    font-weight: 700;
    color: var(--navy);
    margin-bottom: 6px;
    line-height: 1.3;
  }
  .cell-cases {
    font-size: 12px;
    color: var(--gray-600);
    margin-bottom: 10px;
    line-height: 1.5;
  }
  .cell-framework {
    display: inline-block;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 4px 10px;
    border-radius: 20px;
    margin-top: 4px;
  }
  .cell-framework.ba { background: var(--blue-12); color: var(--pill-ba); }
  .cell-framework.cf { background: var(--gold-12); color: var(--pill-cf); }
  .cell-framework.tm { background: var(--green-12); color: var(--pill-tm); }
  .cell-click-hint {
    font-size: 10px;
    color: var(--gray-400);
    margin-top: 10px;
    text-align: right;
    font-style: italic;
  }

  /* PILLAR DETAIL VIEWS */
  .pillar-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 36px;
  }
  .pillar-icon {
    width: 56px;
    height: 56px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 26px;
    flex-shrink: 0;
  }
  .pillar-icon.ba { background: linear-gradient(135deg, var(--teal) 0%, var(--teal-dark) 100%); }
  .pillar-icon.cf { background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%); }
  .pillar-icon.tm { background: linear-gradient(135deg, var(--sage) 0%, var(--sage-light) 100%); }
  .pillar-header h2 {
    font-size: 28px;
    font-weight: 800;
    color: var(--navy);
  }
  .pillar-header .pillar-desc {
    font-size: 14px;
    color: var(--gray-600);
    margin-top: 2px;
  }

  /* LEVEL CARDS */
  .level-card {
    background: var(--white);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    margin-bottom: 28px;
    overflow: hidden;
    transition: var(--transition);
  }
  .level-card:hover { box-shadow: var(--shadow-lg); }

  .level-card-header {
    padding: 24px 28px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    user-select: none;
    transition: var(--transition);
  }
  .level-card-header:hover { background: var(--off-white); }
  .level-card-header .left {
    display: flex;
    align-items: center;
    gap: 16px;
  }
  .level-badge {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    padding: 6px 14px;
    border-radius: 20px;
    background: var(--navy);
    color: var(--white);
    white-space: nowrap;
  }
  .level-title {
    font-size: 20px;
    font-weight: 700;
    color: var(--navy);
  }
  .level-subtitle {
    font-size: 13px;
    color: var(--gray-600);
    margin-top: 2px;
  }
  .expand-icon {
    font-size: 20px;
    color: var(--gray-400);
    transition: var(--transition);
    flex-shrink: 0;
  }
  .level-card.open .expand-icon { transform: rotate(180deg); }

  .level-card-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s cubic-bezier(0.4,0,0.2,1);
  }
  .level-card.open .level-card-body {
    max-height: 3000px;
    overflow-y: auto;
  }
  .level-card-content {
    padding: 0 28px 28px;
  }

  /* PROGRAMS GRID - Organized by Type */
  .programs-grid {
    margin-bottom: 24px;
  }
  .program-type-row {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 8px;
    margin-bottom: 8px;
  }
  .program-type-row.sims-row { background: var(--blue-8); }
  .program-type-row.cases-row { background: rgba(14,0,57,0.04); }
  .program-type-row.async-row { background: var(--red-8); }
  .program-type-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 5px 10px;
    border-radius: 4px;
    white-space: nowrap;
    flex-shrink: 0;
    color: white;
  }
  .sims-row .program-type-label { background: var(--navy); }
  .cases-row .program-type-label { background: var(--navy-mid); }
  .async-row .program-type-label { background: var(--coral); }
  .program-type-items {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    flex: 1;
  }
  .program-item {
    padding: 6px 12px;
    background: var(--white);
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    color: var(--gray-700);
    border: 1px solid var(--gray-200);
    position: relative;
    cursor: pointer;
    transition: all 0.15s ease;
  }
  .program-item:hover {
    background: var(--gray-50);
    border-color: var(--gray-300);
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }
  .program-item.ai-case-item {
    cursor: pointer;
  }
  .program-item.ai-case-item::after {
    content: "Scores come from rubric";
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: 6px;
    padding: 6px 10px;
    background: var(--navy);
    color: white;
    font-size: 11px;
    font-weight: 500;
    border-radius: 6px;
    white-space: nowrap;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.15s, visibility 0.15s;
    pointer-events: none;
  }
  .program-item.ai-case-item:hover::after {
    opacity: 1;
    visibility: visible;
  }
  .program-item .item-duration {
    font-weight: 400;
    color: var(--gray-400);
    font-size: 11px;
    margin-left: 4px;
  }

  /* Legacy programs-row for backwards compatibility */
  .programs-row {
    display: flex;
    gap: 12px;
    margin-bottom: 24px;
    flex-wrap: wrap;
  }
  .program-chip {
    padding: 10px 18px;
    border-radius: var(--radius-sm);
    font-size: 13px;
    font-weight: 600;
    color: var(--white);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .program-chip.sim { background: var(--navy); }
  .program-chip.case-chip { background: var(--navy-mid); }
  .program-chip.ai-chip { background: var(--coral); }
  .chip-tag {
    font-size: 9px;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 2px 6px;
    border-radius: 4px;
    background: rgba(255,255,255,0.2);
  }

  /* SECTION BLOCKS */
  .section-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 20px;
    margin-top: 20px;
  }
  .section-block {
    background: var(--off-white);
    border-radius: var(--radius-sm);
    padding: 20px;
    border-left: 4px solid var(--gray-200);
  }
  .section-block.ba-accent { border-left-color: var(--pill-ba); }
  .section-block.cf-accent { border-left-color: var(--pill-cf); }
  .section-block.tm-accent { border-left-color: var(--pill-tm); }
  .section-block.ts-accent { border-left-color: var(--pill-ts); border-color: rgba(139,92,246,0.2); }

  .section-block h4 {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--gray-400);
    margin-bottom: 12px;
  }
  .section-block ul {
    list-style: none;
    padding: 0;
  }
  .section-block li {
    font-size: 13px;
    color: var(--gray-800);
    padding: 5px 0;
    padding-left: 16px;
    position: relative;
    line-height: 1.5;
  }
  .section-block li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 12px;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--gray-200);
  }
  .section-block.ba-accent li::before { background: var(--pill-ba); }
  .section-block.cf-accent li::before { background: var(--pill-cf); }
  .section-block.tm-accent li::before { background: var(--pill-tm); }
  .section-block.ts-accent li::before { background: var(--pill-ts); }

  /* Section block hover tooltips */
  .section-block li {
    cursor: default;
  }
  .section-block li[data-source] {
    cursor: help;
  }
  .section-block li[data-source]::after {
    content: attr(data-source);
    position: absolute;
    left: 0;
    bottom: 100%;
    margin-bottom: 4px;
    padding: 6px 10px;
    background: var(--navy);
    color: white;
    font-size: 11px;
    font-weight: 500;
    border-radius: 6px;
    white-space: nowrap;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.15s, visibility 0.15s;
    pointer-events: none;
  }
  .section-block li[data-source]:hover::after {
    opacity: 1;
    visibility: visible;
  }

  /* LEARNING OBJECTIVES */
  .objectives-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 16px;
    margin-bottom: 8px;
  }
  .objective-tag {
    font-size: 12px;
    padding: 6px 14px;
    border-radius: 20px;
    background: var(--gray-100);
    color: var(--gray-600);
    font-weight: 500;
  }

  /* AUDIENCE */
  .audience-badge {
    display: inline-block;
    font-size: 12px;
    font-weight: 500;
    color: var(--gray-600);
    background: var(--gray-100);
    padding: 6px 14px;
    border-radius: 20px;
    margin-bottom: 16px;
  }
  .level-card-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
  }
  .doc-links {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .doc-link {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    font-weight: 600;
    color: var(--teal);
    text-decoration: none;
    padding: 6px 12px;
    background: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: 6px;
    transition: all 0.15s ease;
  }
  .doc-link:hover {
    background: var(--teal);
    color: white;
    border-color: var(--teal);
  }
  .prog-doc-links {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-bottom: 16px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--gray-200);
  }

  /* PROGRAM EXPLORER VIEW */
  .prog-filters {
    display: flex;
    gap: 8px;
    margin-bottom: 28px;
    flex-wrap: wrap;
    align-items: center;
  }
  .prog-filter-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--gray-400);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-right: 4px;
  }
  .prog-filter-btn {
    padding: 7px 16px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    border: 2px solid var(--gray-200);
    background: var(--white);
    color: var(--gray-600);
    transition: var(--transition);
    user-select: none;
  }
  .prog-filter-btn:hover { border-color: var(--gray-400); color: var(--gray-800); }
  .prog-filter-btn.active-filter { border-color: var(--navy); background: var(--navy); color: var(--white); }
  .prog-filter-btn.active-filter.ba-filter { border-color: var(--pill-ba); background: var(--pill-ba); }
  .prog-filter-btn.active-filter.cf-filter { border-color: var(--pill-cf); background: var(--pill-cf); }
  .prog-filter-btn.active-filter.tm-filter { border-color: var(--pill-tm); background: var(--pill-tm); }
  .prog-filter-btn.active-filter.ts-filter { border-color: var(--pill-ts); background: var(--pill-ts); }

  /* Session Search Bar */
  .session-search-bar {
    margin-bottom: 20px;
  }
  .session-search-input {
    width: 100%;
    padding: 14px 20px;
    font-size: 15px;
    border: 2px solid var(--gray-200);
    border-radius: 10px;
    background: var(--white);
    transition: all 0.2s;
  }
  .session-search-input:focus {
    outline: none;
    border-color: var(--teal);
    box-shadow: 0 0 0 3px var(--blue-12);
  }
  .session-search-input::placeholder {
    color: var(--gray-400);
  }

  /* Collapsible Session Sections */
  .session-section {
    margin-bottom: 24px;
    background: var(--white);
    border-radius: 12px;
    box-shadow: var(--shadow);
    overflow: hidden;
  }
  .session-section-header {
    display: flex;
    align-items: center;
    padding: 16px 20px;
    background: var(--gray-50);
    cursor: pointer;
    transition: background 0.2s;
    border-bottom: 1px solid var(--gray-100);
  }
  .session-section-header:hover {
    background: var(--gray-100);
  }
  .session-section-header h3 {
    font-size: 16px;
    font-weight: 700;
    color: var(--navy);
    margin: 0;
  }
  .session-section-count {
    margin-left: 10px;
    font-size: 13px;
    color: var(--gray-400);
    font-weight: 600;
  }
  .session-section-toggle {
    margin-left: auto;
    font-size: 14px;
    color: var(--gray-400);
    transition: transform 0.2s;
  }
  .session-section.collapsed .session-section-toggle {
    transform: rotate(-90deg);
  }
  .session-section-content {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 16px;
    padding: 20px;
    transition: all 0.3s ease;
  }
  .session-section.collapsed .session-section-content {
    display: none;
  }
  .session-section.empty {
    display: none;
  }

  .prog-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
  }
  .prog-card {
    background: var(--white);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    cursor: pointer;
    transition: var(--transition);
    border: 2px solid transparent;
    overflow: hidden;
  }
  .prog-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
  .prog-card.prog-selected {
    border-color: var(--navy);
    grid-column: 1 / -1;
  }
  .prog-card.prog-selected.ba-prog { border-color: var(--pill-ba); }
  .prog-card.prog-selected.cf-prog { border-color: var(--pill-cf); }
  .prog-card.prog-selected.tm-prog { border-color: var(--pill-tm); }
  .prog-card.prog-selected.ts-prog { border-color: var(--pill-ts); }
  .prog-card.prog-hidden { display: none; }

  .prog-card-top {
    padding: 18px 20px;
    display: flex;
    align-items: flex-start;
    gap: 14px;
  }
  .prog-card-accent {
    width: 4px;
    min-height: 50px;
    border-radius: 2px;
    flex-shrink: 0;
    align-self: stretch;
  }
  .prog-card-accent.ba-bar { background: var(--pill-ba); }
  .prog-card-accent.cf-bar { background: var(--pill-cf); }
  .prog-card-accent.tm-bar { background: var(--pill-tm); }
  .prog-card-accent.ts-bar { background: var(--pill-ts); }
  .prog-card-info { flex: 1; }
  .prog-card-name {
    font-size: 15px;
    font-weight: 700;
    color: var(--navy);
    line-height: 1.3;
    margin-bottom: 6px;
  }
  .prog-card-meta {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .prog-meta-tag {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 3px 8px;
    border-radius: 4px;
  }
  .prog-meta-tag.type-sim { background: var(--navy); color: var(--white); }
  .prog-meta-tag.type-case { background: var(--navy-mid); color: var(--white); }
  .prog-meta-tag.type-ai-case { background: var(--coral); color: var(--white); }
  .prog-meta-tag.type-course { background: var(--teal); color: var(--white); }
  .prog-meta-tag.level-tag { background: var(--gray-100); color: var(--gray-600); }
  .prog-card-toggle {
    font-size: 18px;
    color: var(--gray-400);
    transition: var(--transition);
    flex-shrink: 0;
    margin-top: 4px;
  }
  .prog-card.prog-selected .prog-card-toggle { transform: rotate(180deg); color: var(--navy); }

  .prog-detail {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s cubic-bezier(0.4,0,0.2,1);
    background: var(--off-white);
  }
  .prog-card.prog-selected .prog-detail { max-height: 2000px; overflow-y: auto; }
  .prog-detail-inner { padding: 0 20px 20px; }
  .prog-detail .section-grid { margin-top: 8px; }

  .prog-empty-state {
    text-align: center;
    padding: 48px 20px;
    color: var(--gray-400);
    font-size: 15px;
    display: none;
  }

  /* AI CASE STYLES */
  .ai-options-row {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
    margin-bottom: 14px;
  }
  .ai-options-label {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--gray-400);
    margin-right: 4px;
  }
  .ai-option-chip {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 20px;
    background: var(--gray-100);
    color: var(--gray-800);
    font-weight: 500;
  }
  .ai-subcategory {
    font-size: 11px;
    padding: 4px 10px;
    margin-left: 8px;
    border-radius: 4px;
    background: var(--red-8);
    color: var(--coral);
    font-weight: 600;
  }
  .rubric-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 12px;
  }
  .rubric-category {
    background: var(--white);
    border: 1px solid var(--gray-100);
    border-radius: var(--radius-sm);
    padding: 14px;
  }
  .rubric-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }
  .rubric-cat-name {
    font-size: 13px;
    font-weight: 700;
    color: var(--teal-dark);
  }
  .rubric-pts {
    font-size: 12px;
    font-weight: 700;
    color: var(--white);
    background: var(--teal-dark);
    padding: 2px 8px;
    border-radius: 10px;
  }
  .rubric-category ul {
    list-style: none;
    padding: 0;
  }
  .rubric-category li {
    font-size: 12px;
    line-height: 1.5;
    color: var(--gray-600);
    padding: 2px 0 2px 14px;
    position: relative;
  }
  .rubric-category li::before {
    content: '•';
    position: absolute;
    left: 2px;
    color: var(--gray-400);
  }

  /* Make rubric cat colors follow pillar */
  .ba-accent .rubric-cat-name { color: var(--pill-ba); }
  .ba-accent .rubric-pts { background: var(--pill-ba); }
  .cf-accent .rubric-cat-name { color: var(--pill-cf); }
  .cf-accent .rubric-pts { background: var(--pill-cf); }
  .tm-accent .rubric-cat-name { color: var(--pill-tm); }
  .tm-accent .rubric-pts { background: var(--pill-tm); }
  .ts-accent .rubric-cat-name { color: var(--pill-ts); }
  .ts-accent .rubric-pts { background: var(--pill-ts); }

  /* AI Chip styling for pillar sections */
  .ai-chip { background: var(--coral); }
  .ai-chip .chip-tag { background: rgba(255,255,255,0.2); }


  /* COMPARE VIEW */
  .compare-container {
    display: grid;
    grid-template-columns: 1fr 1fr auto;
    gap: 20px;
    min-height: 500px;
  }
  /* Level-based grouping */
  .level-group {
    margin-bottom: 12px;
  }
  .level-group-header {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--gray-400);
    margin-bottom: 6px;
    padding-left: 2px;
  }
  .level-group.executive .level-group-header { color: var(--coral); }
  .level-group.experienced .level-group-header { color: var(--gold); }
  .level-group.rising .level-group-header { color: var(--teal); }
  .level-group-items {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  /* Program chips with type badges */
  .program-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 5px 8px 5px 5px;
    background: var(--white);
    border-radius: 6px;
    font-size: 12px;
    border: 1px solid var(--gray-200);
    transition: all 0.2s;
  }
  .program-chip:hover {
    border-color: var(--gray-300);
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }
  .type-badge {
    font-size: 9px;
    font-weight: 700;
    padding: 3px 6px;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .type-badge.sim { background: var(--navy); color: white; }
  .type-badge.case { background: var(--navy); color: white; opacity: 0.8; }
  .type-badge.ai { background: var(--coral); color: white; }
  .type-badge.course { background: var(--teal); color: white; }
  .chip-name {
    font-weight: 600;
    color: var(--gray-700);
  }
  .chip-duration {
    font-size: 10px;
    color: var(--gray-400);
  }
  /* SIM chips need light text on dark background */
  .program-chip.sim .chip-name,
  .program-chip.sim .chip-duration {
    color: white;
  }
  .program-chip.sim .chip-duration {
    opacity: 0.8;
  }
  .chip-remove {
    background: none;
    border: none;
    color: var(--gray-300);
    cursor: pointer;
    font-size: 14px;
    padding: 0 0 0 4px;
    line-height: 1;
    transition: color 0.2s;
  }
  .program-chip.sim .chip-remove {
    color: rgba(255,255,255,0.5);
  }
  .program-chip.sim .chip-remove:hover {
    color: white;
  }
  .chip-remove:hover {
    color: var(--coral);
  }

  /* Add buttons row */
  .add-buttons-row {
    display: flex;
    gap: 8px;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--gray-100);
  }
  .add-inline-btn {
    padding: 4px 10px;
    border: 1px dashed var(--gray-300);
    border-radius: 4px;
    background: transparent;
    font-size: 11px;
    font-weight: 600;
    color: var(--gray-500);
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s;
  }
  .add-inline-btn:hover {
    border-color: var(--teal);
    color: var(--teal);
    background: var(--blue-8);
  }
  .add-program-top {
    margin-bottom: 12px;
  }
  .add-program-top .add-btn {
    width: 100%;
    justify-content: center;
  }

  .program-column {
    background: var(--white);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: visible;
    display: flex;
    flex-direction: column;
  }
  .program-column-c {
    width: 48px;
    transition: width 0.3s ease;
    overflow: hidden;
  }
  .program-column-c.expanded {
    width: 350px;
  }
  .program-column-c .program-header {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    padding: 20px 12px;
    cursor: pointer;
    justify-content: flex-start;
    gap: 12px;
  }
  .program-column-c.expanded .program-header {
    writing-mode: horizontal-tb;
    padding: 16px 20px;
  }
  .program-column-c .expand-indicator {
    font-size: 12px;
    opacity: 0.7;
  }
  .program-column-c.expanded .expand-indicator {
    display: none;
  }
  .program-column-c .program-body {
    display: none;
  }
  .program-column-c.expanded .program-body {
    display: block;
  }
  .program-header {
    background: var(--navy);
    color: white;
    padding: 16px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .program-header h3 {
    font-size: 16px;
    font-weight: 700;
  }
  .program-header .clear-btn {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
  }
  .program-header .clear-btn:hover {
    background: rgba(255,255,255,0.3);
  }
  .program-body {
    padding: 20px;
    min-height: 300px;
    flex: 1;
  }
  .add-buttons {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
    flex-wrap: wrap;
  }
  .add-btn-wrapper {
    position: relative;
  }
  .add-btn {
    padding: 10px 16px;
    border: 1px solid var(--gray-200);
    border-radius: 8px;
    background: var(--white);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    color: var(--navy);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .add-btn:hover {
    border-color: var(--teal);
    background: var(--blue-8);
  }
  .add-btn .arrow {
    font-size: 10px;
    transition: transform 0.2s;
  }
  .add-btn-wrapper.open .add-btn .arrow {
    transform: rotate(180deg);
  }
  .add-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: 4px;
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: 8px;
    box-shadow: var(--shadow-lg);
    min-width: 220px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 1000;
    display: none;
  }
  .add-btn-wrapper.open .add-dropdown {
    display: block;
  }
  .add-dropdown-item {
    padding: 10px 14px;
    cursor: pointer;
    font-size: 13px;
    border-bottom: 1px solid var(--gray-100);
    transition: background 0.15s;
  }
  .add-dropdown-item:last-child {
    border-bottom: none;
  }
  .add-dropdown-item:hover {
    background: var(--blue-8);
  }
  .add-dropdown-item .item-name {
    font-weight: 600;
    color: var(--navy);
  }
  .add-dropdown-item .item-meta {
    font-size: 11px;
    color: var(--gray-500);
    margin-top: 2px;
  }
  .program-empty {
    text-align: center;
    padding: 40px 16px;
    color: var(--gray-400);
    font-size: 14px;
    font-style: italic;
  }
  }
  .preset-btn.open-btn {
    background: var(--teal);
    color: white;
    border-color: var(--teal);
    padding: 10px 24px;
    font-size: 14px;
  }
  .preset-btn.open-btn:hover {
    background: var(--teal-dark);
    border-color: var(--teal-dark);
  }
  .preset-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }
  .preset-grid .preset-btn {
    font-size: 11px;
    padding: 8px 10px;
  }
  .empty-drag-hint {
    color: var(--gray-400);
    font-size: 14px;
    padding: 40px 20px;
  }
  .program-items {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 20px;
  }
  .program-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    background: var(--gray-50);
    border-radius: 6px;
    font-size: 13px;
  }
  .program-item.ba { border-left: 3px solid var(--pill-ba); }
  .program-item.cf { border-left: 3px solid var(--pill-cf); }
  .program-item.tm { border-left: 3px solid var(--pill-tm); }
  .program-item .remove-btn {
    background: none;
    border: none;
    color: var(--gray-400);
    cursor: pointer;
    font-size: 16px;
  }
  .program-item .remove-btn:hover {
    color: var(--coral);
  }

  .program-stats {
    border-top: 1px solid var(--gray-200);
    padding-top: 16px;
  }
  .stat-row {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    font-size: 13px;
    border-bottom: 1px solid var(--gray-100);
  }
  .stat-row:last-child { border-bottom: none; }
  .stat-label { color: var(--gray-600); }
  .stat-value { font-weight: 700; color: var(--navy); }
  .stat-value.highlight { color: var(--teal-dark); }

  .collapsible-section {
    margin-top: 12px;
    border: 1px solid var(--gray-200);
    border-radius: 8px;
    overflow: hidden;
  }
  .collapsible-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    background: var(--gray-50);
    cursor: pointer;
    transition: background 0.2s;
  }
  .collapsible-header:hover {
    background: var(--gray-100);
  }
  .collapsible-header h4 {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--gray-500);
    margin: 0;
  }
  .collapsible-header .toggle-icon {
    font-size: 12px;
    color: var(--gray-400);
    transition: transform 0.2s;
  }
  .collapsible-section.expanded .toggle-icon {
    transform: rotate(180deg);
  }
  .collapsible-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
  }
  .collapsible-section.expanded .collapsible-content {
    max-height: 400px;
    overflow-y: auto;
  }
  .collapsible-content ul {
    list-style: none;
    padding: 12px;
    margin: 0;
  }
  .collapsible-content li {
    font-size: 12px;
    color: var(--gray-600);
    padding: 6px 0;
    padding-left: 14px;
    position: relative;
    border-bottom: 1px solid var(--gray-100);
  }
  .collapsible-content li:last-child {
    border-bottom: none;
  }
  .collapsible-content li::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--teal);
  }
  .collapsible-section.mindsets-section .collapsible-content li::before {
    color: var(--gold);
  }
  .collapsible-section.frameworks-section .collapsible-content li::before {
    color: var(--coral);
  }
  .collapsible-count {
    font-size: 11px;
    color: var(--gray-400);
    font-weight: 600;
  }

  /* Hover tooltip for competency/mindset/tool source */
  .hoverable-item {
    position: relative;
    cursor: pointer;
  }
  .source-tooltip {
    display: none;
    position: absolute;
    left: 0;
    bottom: 100%;
    margin-bottom: 6px;
    padding: 6px 10px;
    background: var(--navy);
    color: white;
    font-size: 11px;
    font-weight: 500;
    border-radius: 6px;
    white-space: nowrap;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  }
  .source-tooltip::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 16px;
    border: 6px solid transparent;
    border-top-color: var(--navy);
  }
  .hoverable-item:hover .source-tooltip {
    display: block;
  }

  /* Compare Programs Button & Modal */
  .compare-action-bar {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
  }
  .compare-btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 14px 28px;
    background: linear-gradient(135deg, var(--teal) 0%, var(--teal-dark) 100%);
    color: white;
    font-size: 14px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 15px var(--blue-24);
    transition: all 0.3s ease;
  }
  .compare-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px var(--blue-48);
  }
  .compare-btn:disabled {
    background: var(--gray-300);
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
  }
  .compare-btn svg {
    width: 18px;
    height: 18px;
  }

  .comparison-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.85);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 20000;
    padding: 40px;
  }
  .comparison-modal.show {
    display: flex;
  }
  .comparison-modal-content {
    background: var(--white);
    border-radius: 20px;
    width: 100%;
    max-width: 900px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 30px 80px rgba(0,0,0,0.5);
  }
  .comparison-modal-header {
    padding: 28px 32px 20px;
    border-bottom: 1px solid var(--gray-200);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .comparison-modal-header h2 {
    font-size: 24px;
    font-weight: 700;
    color: var(--navy);
    margin: 0;
  }
  .comparison-modal-close {
    background: none;
    border: none;
    font-size: 28px;
    color: var(--gray-400);
    cursor: pointer;
    line-height: 1;
    padding: 0;
  }
  .comparison-modal-close:hover {
    color: var(--gray-600);
  }
  .comparison-modal-body {
    padding: 28px 32px 32px;
  }
  .comparison-loading {
    text-align: center;
    padding: 60px 20px;
    color: var(--gray-500);
    font-size: 16px;
  }
  .comparison-loading .spinner {
    display: inline-block;
    width: 40px;
    height: 40px;
    border: 3px solid var(--gray-200);
    border-top-color: var(--teal);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 16px;
  }
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  .comparison-section {
    margin-bottom: 28px;
  }
  .comparison-section:last-child {
    margin-bottom: 0;
  }
  .comparison-section h3 {
    font-size: 16px;
    font-weight: 700;
    color: var(--navy);
    margin: 0 0 12px 0;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--gray-200);
  }
  .comparison-section p {
    font-size: 15px;
    color: var(--gray-700);
    line-height: 1.7;
    margin: 0;
  }
  .belief-card {
    background: var(--gray-50);
    border-radius: 12px;
    padding: 20px;
    margin-top: 16px;
    border-left: 4px solid var(--teal);
  }
  .belief-card.program-b {
    border-left-color: var(--gold);
  }
  .belief-card.program-c {
    border-left-color: var(--sage);
  }
  .belief-card h4 {
    font-size: 14px;
    font-weight: 700;
    color: var(--navy);
    margin: 0 0 10px 0;
  }
  .belief-card p {
    font-size: 14px;
    margin: 0;
  }

  @media (max-width: 1100px) {
    .compare-container {
      grid-template-columns: 1fr 1fr;
    }
    .program-column-c {
      grid-column: span 2;
      width: 100%;
    }
    .program-column-c .program-header {
      writing-mode: horizontal-tb;
    }
  }

  /* RESPONSIVE */
  @media (max-width: 1100px) {
    .grid-wrapper { grid-template-columns: 120px 1fr 1fr 1fr; gap: 10px; }
    .section-grid { grid-template-columns: 1fr 1fr; }
  }
  @media (max-width: 900px) {
    .section-grid { grid-template-columns: 1fr; }
  }
  @media (max-width: 800px) {
    .hero { padding: 40px 20px 36px; }
    .hero h1 { font-size: 28px; }
    .main { padding: 20px 16px 60px; }
    .grid-wrapper { grid-template-columns: 1fr; gap: 12px; }
    .grid-header.corner, .grid-level-label { display: none; }
    .nav-inner { overflow-x: auto; }
    .section-grid { grid-template-columns: 1fr; }
    .programs-row { flex-direction: column; }
  }

  /* GATE SCREEN */
  .gate-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 50%, var(--navy-mid) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }
  .gate-content {
    text-align: center;
    padding: 40px;
  }
  .gate-owl {
    width: 200px;
    height: auto;
    margin-bottom: 30px;
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
  }
  .gate-question {
    font-size: 28px;
    font-weight: 700;
    color: var(--white);
    margin-bottom: 24px;
  }
  .gate-input-wrapper {
    display: flex;
    gap: 12px;
    justify-content: center;
    align-items: center;
  }
  .gate-input {
    padding: 14px 20px;
    font-size: 18px;
    border: 2px solid rgba(255,255,255,0.2);
    border-radius: 10px;
    background: rgba(255,255,255,0.1);
    color: white;
    width: 200px;
    text-align: center;
    font-family: inherit;
  }
  .gate-input:focus {
    outline: none;
    border-color: var(--teal);
  }
  .gate-input::placeholder {
    color: rgba(255,255,255,0.4);
  }
  .gate-submit {
    padding: 14px 24px;
    font-size: 16px;
    font-weight: 600;
    background: var(--teal);
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .gate-submit:hover {
    background: var(--teal-dark);
  }
  .gate-error {
    color: var(--coral);
    font-size: 14px;
    margin-top: 16px;
    opacity: 0;
    transition: opacity 0.2s;
  }
  .gate-error.show {
    opacity: 1;
  }

  /* LANDING PAGE */
  .landing-page {
    background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 50%, var(--navy-mid) 100%);
    min-height: 100vh;
    color: var(--white);
    position: relative;
    overflow: hidden;
  }
  .landing-page::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -25%;
    width: 150%;
    height: 200%;
    background: radial-gradient(ellipse at 30% 50%, rgba(59,51,208,0.12) 0%, transparent 60%),
                radial-gradient(ellipse at 70% 30%, rgba(246,203,77,0.08) 0%, transparent 50%);
    pointer-events: none;
  }
  .landing-content {
    position: relative;
    z-index: 1;
    max-width: 900px;
    margin: 0 auto;
    padding: 60px 40px;
    text-align: center;
  }
  .landing-badge {
    display: inline-block;
    font-size: 11px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--gold);
    font-weight: 600;
    margin-bottom: 16px;
  }
  .landing-content h1 {
    font-size: 48px;
    font-weight: 800;
    margin-bottom: 16px;
    letter-spacing: -1px;
  }
  .landing-content > p {
    font-size: 16px;
    color: rgba(255,255,255,0.7);
    max-width: 600px;
    margin: 0 auto 40px;
    line-height: 1.7;
  }
  .landing-stats {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-bottom: 50px;
  }
  .landing-stat .num {
    font-size: 36px;
    font-weight: 800;
    color: var(--gold);
  }
  .landing-stat .label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: rgba(255,255,255,0.5);
  }
  .landing-ways {
    margin-top: 50px;
  }
  .landing-ways h2 {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--white);
  }
  .landing-ways > p {
    font-size: 14px;
    color: rgba(255,255,255,0.6);
    margin-bottom: 30px;
  }
  .landing-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
  }
  .landing-card {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 16px;
    padding: 30px 24px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: left;
  }
  .landing-card:hover {
    background: rgba(255,255,255,0.1);
    border-color: var(--teal);
    transform: translateY(-4px);
  }
  .landing-card-icon {
    font-size: 32px;
    margin-bottom: 16px;
  }
  .landing-card h3 {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--white);
  }
  .landing-card p {
    font-size: 13px;
    color: rgba(255,255,255,0.6);
    line-height: 1.6;
  }
  .landing-card .card-arrow {
    margin-top: 16px;
    color: var(--teal);
    font-size: 14px;
    font-weight: 600;
  }

  /* At a Glance Grid */
  .landing-glance {
    margin-top: 60px;
    padding-top: 40px;
    border-top: 1px solid rgba(255,255,255,0.1);
  }
  .landing-glance h2 {
    font-size: 20px;
    font-weight: 600;
    color: var(--white);
    margin-bottom: 24px;
    text-align: center;
  }
  .glance-grid {
    display: grid;
    grid-template-columns: 100px repeat(3, 1fr);
    gap: 8px;
    max-width: 800px;
    margin: 0 auto;
  }
  .glance-corner {
    background: transparent;
  }
  .glance-header {
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-align: center;
    color: white;
  }
  .glance-header.ba { background: var(--pill-ba); }
  .glance-header.cf { background: var(--pill-cf); }
  .glance-header.tm { background: var(--pill-tm); }
  .glance-level {
    padding: 12px 8px;
    font-size: 11px;
    font-weight: 700;
    color: var(--gold);
    text-align: right;
    display: flex;
    align-items: center;
    justify-content: flex-end;
  }
  .glance-cell {
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    padding: 14px 12px;
    font-size: 12px;
    font-weight: 600;
    color: var(--white);
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
  }
  .glance-cell:hover {
    background: rgba(255,255,255,0.15);
    border-color: var(--teal);
    transform: translateY(-2px);
  }
  .glance-cell.empty {
    background: transparent;
    border: 1px dashed rgba(255,255,255,0.1);
    cursor: default;
  }
  .glance-cell.empty:hover {
    transform: none;
    border-color: rgba(255,255,255,0.1);
  }

  @media (max-width: 800px) {
    .landing-cards {
      grid-template-columns: 1fr;
    }
    .landing-content h1 {
      font-size: 32px;
    }
    .landing-stats {
      flex-wrap: wrap;
      gap: 24px;
    }
  }

  /* AI CHAT VIEW */
  .ai-chat-container {
    max-width: 800px;
    margin: 0 auto;
  }
  .ai-chat-header {
    text-align: center;
    margin-bottom: 32px;
  }
  .ai-chat-header h2 {
    font-size: 28px;
    font-weight: 700;
    color: var(--navy);
    margin-bottom: 8px;
  }
  .ai-chat-header p {
    color: var(--gray-600);
    font-size: 15px;
  }
  .ai-input-box {
    background: var(--white);
    border: 2px solid var(--gray-200);
    border-radius: 12px;
    overflow: hidden;
    transition: border-color 0.2s;
  }
  .ai-input-box:focus-within {
    border-color: var(--teal);
  }
  .ai-input-row {
    display: flex;
    align-items: center;
    padding: 4px;
  }
  .ai-chat-input {
    flex: 1;
    padding: 12px 16px;
    border: none;
    font-size: 16px;
    font-family: inherit;
    background: transparent;
  }
  .ai-chat-input:focus {
    outline: none;
  }
  .ai-chat-input::placeholder {
    color: var(--gray-400);
  }
  .ai-chat-send {
    background: var(--teal);
    border: none;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 18px;
    transition: background 0.2s;
    flex-shrink: 0;
  }
  .ai-chat-send:hover {
    background: var(--teal-dark);
  }
  .ai-picker-toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-top: 1px solid var(--gray-100);
    cursor: pointer;
    user-select: none;
    transition: background 0.2s;
  }
  .ai-picker-toggle:hover {
    background: var(--gray-100);
  }
  .ai-picker-toggle-text {
    font-size: 13px;
    color: var(--gray-500);
    font-weight: 500;
  }
  .ai-picker-toggle-arrow {
    font-size: 12px;
    color: var(--gray-400);
    transition: transform 0.2s;
  }
  .ai-picker-toggle.expanded .ai-picker-toggle-arrow {
    transform: rotate(180deg);
  }
  .ai-suggestions {
    display: none;
    flex-direction: column;
    border-top: 1px solid var(--gray-100);
    max-height: 280px;
    overflow-y: auto;
  }
  .ai-suggestions.expanded {
    display: flex;
  }
  .ai-suggestion {
    padding: 14px 16px;
    cursor: pointer;
    transition: background 0.15s;
    text-align: left;
    font-size: 14px;
    color: var(--gray-700);
    line-height: 1.4;
    border-bottom: 1px solid var(--gray-100);
  }
  .ai-suggestion:last-child {
    border-bottom: none;
  }
  .ai-suggestion:hover {
    background: var(--blue-8);
    color: var(--teal-dark);
  }
  .ai-suggestion::before {
    content: "💬 ";
    margin-right: 4px;
  }
  .ai-chat-response {
    margin-top: 20px;
    padding: 24px;
    background: var(--white);
    border-radius: 12px;
    border: 1px solid var(--gray-200);
    display: none;
  }
  .ai-chat-response.active {
    display: block;
  }
  .ai-chat-response h4 {
    font-size: 13px;
    font-weight: 600;
    color: var(--teal-dark);
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .ai-chat-response p {
    color: var(--gray-700);
    line-height: 1.7;
  }

  /* Framework Modal */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    padding: 20px;
  }
  .modal-overlay.show {
    display: flex;
  }
  .modal-content {
    background: var(--white);
    border-radius: 16px;
    max-width: 600px;
    width: 100%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  }
  .modal-header {
    padding: 24px 24px 0;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }
  .modal-header h2 {
    font-size: 22px;
    font-weight: 700;
    color: var(--navy);
    margin: 0;
  }
  .modal-close {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--gray-400);
    cursor: pointer;
    padding: 0;
    line-height: 1;
  }
  .modal-close:hover {
    color: var(--gray-600);
  }
  .modal-pillar-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: white;
    margin-top: 8px;
  }
  .modal-pillar-badge.ba { background: var(--pill-ba); }
  .modal-pillar-badge.cf { background: var(--pill-cf); }
  .modal-pillar-badge.tm { background: var(--pill-tm); }
  .modal-body {
    padding: 20px 24px 24px;
  }
  .modal-description {
    font-size: 15px;
    color: var(--gray-700);
    line-height: 1.7;
    margin-bottom: 20px;
  }
  .modal-section {
    margin-top: 20px;
  }
  .modal-section h4 {
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--gray-400);
    margin-bottom: 12px;
  }
  .modal-used-in {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .modal-program-tag {
    padding: 8px 12px;
    background: var(--gray-100);
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    color: var(--gray-700);
  }
  .modal-components {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .modal-component {
    padding: 12px 16px;
    background: var(--gray-50);
    border-left: 3px solid var(--teal);
    border-radius: 0 8px 8px 0;
  }
  .modal-component-title {
    font-weight: 600;
    color: var(--navy);
    margin-bottom: 4px;
  }
  .modal-component-desc {
    font-size: 13px;
    color: var(--gray-600);
  }
  /* Framework links removed - no longer styled as links */
  .framework-link {
    color: inherit;
    cursor: text;
    text-decoration: none;
  }
</style>
</head>
<body>

<!-- GATE SCREEN -->
<div class="gate-screen" id="gate-screen">
  <div class="gate-content">
    <img src="images/abi-owl.png" alt="Abi the Owl" class="gate-owl">
    <div class="gate-question">Whoooo are you? Type my name to enter.</div>
    <div class="gate-input-wrapper">
      <input type="text" class="gate-input" id="gate-input" placeholder="Enter name..." onkeypress="if(event.key==='Enter')checkGate()">
      <button class="gate-submit" onclick="checkGate()">Enter</button>
    </div>
    <div class="gate-error" id="gate-error">That's not it! Try again.</div>
  </div>
</div>

<!-- LANDING PAGE -->
<div class="landing-page" id="landing-page">
  <div class="landing-content">
    <div class="landing-badge">Abilitie Leadership Academy</div>
    <h1>Curriculum Map</h1>

    <div class="landing-ways">
      <h2>Three ways to use this tool</h2>
      <p>Choose how you'd like to explore the Abilitie curriculum</p>

      <div class="landing-cards">
        <div class="landing-card" onclick="enterApp('overview')">
          <div class="landing-card-icon">🗺️</div>
          <h3>Explore Curriculum</h3>
          <p>Explore the competencies, mindsets, and behaviors of each simulation and case challenge across all three pillars.</p>
          <div class="card-arrow">Start exploring →</div>
        </div>

        <div class="landing-card" onclick="enterApp('compare')">
          <div class="landing-card-icon">⚖️</div>
          <h3>Compare Programs</h3>
          <p>Build and compare programs side-by-side to see total seat time, competency coverage, and learning outcomes.</p>
          <div class="card-arrow">Start comparing →</div>
        </div>

        <div class="landing-card" onclick="enterApp('ai')">
          <div class="landing-card-icon">💬</div>
          <h3>Ask Questions</h3>
          <p>Ask questions about our curriculum using AI-powered search and get instant answers about competencies, programs, and more.</p>
          <div class="card-arrow">Start asking →</div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- HERO -->
<div class="hero" id="app-hero" style="display:none;">
  <div class="hero-badge">Abilitie Leadership Academy</div>
  <h1>Curriculum Map</h1>
  <p>Building leadership capabilities across three timeless business domains — from rising leaders through the executive suite.</p>
</div>

<!-- NAV -->
<div class="nav-bar" id="app-nav" style="display:none;">
  <div class="nav-inner nav-simple">
    <div class="nav-tab" onclick="showLanding()" style="font-weight:700;">← Home</div>
    <div class="nav-main-buttons">
      <div class="nav-dropdown">
        <button class="nav-main-btn" onclick="toggleExploreMenu()">🗺️ Explore <span class="dropdown-arrow">▼</span></button>
        <div class="nav-dropdown-menu" id="explore-menu">
          <div class="dropdown-item" onclick="showView('overview'); closeExploreMenu()">Abilitie's Leadership Academy</div>
          <div class="dropdown-item" onclick="showView('programs'); closeExploreMenu()">Full List</div>
          <div class="dropdown-divider"></div>
          <div class="dropdown-item" onclick="showView('ba'); closeExploreMenu()"><span class="dot dot-ba"></span>Business Acumen</div>
          <div class="dropdown-item" onclick="showView('cf'); closeExploreMenu()"><span class="dot dot-cf"></span>Cross-Functional Decision-Making</div>
          <div class="dropdown-item" onclick="showView('tm'); closeExploreMenu()"><span class="dot dot-tm"></span>Team Management</div>
        </div>
      </div>
      <button class="nav-main-btn" onclick="showView('compare')">⚖️ Compare</button>
      <button class="nav-main-btn" onclick="showView('ai')">💬 Ask</button>
    </div>
  </div>
</div>

<!-- MAIN -->
<div class="main" id="app-main" style="display:none;">

<!-- ============ AI CHAT ============ -->
<div class="view-panel" id="view-ai">
  <div class="ai-chat-container">
    <div class="ai-chat-header">
      <h2>Ask About Our Curriculum</h2>
      <p>Get instant answers about competencies, programs, simulations, and more</p>
    </div>

    <div class="ai-input-box">
      <div class="ai-input-row">
        <input type="text" class="ai-chat-input" id="ai-input" placeholder="Ask a question about Abilitie's curriculum..." onkeypress="if(event.key==='Enter')sendAIQuestion()">
        <button class="ai-chat-send" onclick="sendAIQuestion()">→</button>
      </div>
      <div class="ai-picker-toggle" id="ai-picker-toggle" onclick="toggleAIPicker()">
        <span class="ai-picker-toggle-text">Or choose a sample question...</span>
        <span class="ai-picker-toggle-arrow">▼</span>
      </div>
      <div class="ai-suggestions" id="ai-suggestions">
        <div class="ai-suggestion" onclick="askSuggestion(this)">My client is using DiSC... what do we have that fits with that?</div>
        <div class="ai-suggestion" onclick="askSuggestion(this)">I have a potential 30 person program for business acumen... what are my options?</div>
        <div class="ai-suggestion" onclick="askSuggestion(this)">What's the difference between Income Challenge and Business Challenge?</div>
        <div class="ai-suggestion" onclick="askSuggestion(this)">Which programs focus on cross-functional collaboration?</div>
        <div class="ai-suggestion" onclick="askSuggestion(this)">What competencies does the Management Challenge develop?</div>
        <div class="ai-suggestion" onclick="askSuggestion(this)">I need a half-day program for rising leaders... what do you recommend?</div>
      </div>
    </div>

    <div class="ai-chat-response" id="ai-response">
      <h4>Response</h4>
      <p id="ai-response-text"></p>
    </div>
  </div>
</div>

<!-- ============ OVERVIEW ============ -->
<div class="view-panel active" id="view-overview">
  <div class="overview-intro">
    <h2>The Leadership Academy at a Glance</h2>
    <p>Click any cell below to explore its competencies, mindsets, and tools in detail.</p>
  </div>

  <div class="grid-wrapper">
    <!-- Headers -->
    <div class="grid-header corner"></div>
    <div class="grid-header ba">Business Acumen</div>
    <div class="grid-header cf">Cross-Functional Decision-Making</div>
    <div class="grid-header tm">Team Management</div>

    <!-- EXECUTIVE ROW -->
    <div class="grid-level-label">Executive Leader</div>

    <div class="grid-cell ba-cell" onclick="showView('ba'); openLevel('ba-exec');">
      <div class="cell-sim">Finance Challenge</div>
      <div class="cell-click-hint">Click to explore →</div>
    </div>
    <div class="grid-cell cf-cell" onclick="showView('cf'); openLevel('cf-exec');">
      <div class="cell-sim">Executive Challenge</div>
      <div class="cell-click-hint">Click to explore →</div>
    </div>
    <div class="grid-cell tm-cell empty-cell">
      <div class="cell-empty">—</div>
    </div>

    <!-- EXPERIENCED LEADER ROW -->
    <div class="grid-level-label">Experienced Leader</div>

    <div class="grid-cell ba-cell" onclick="showView('ba'); openLevel('ba-exp');">
      <div class="cell-sim">Business Challenge</div>
      <div class="cell-cases">+ CC: Balancing Growth &amp; Risk</div>
      <div class="cell-click-hint">Click to explore →</div>
    </div>
    <div class="grid-cell cf-cell" onclick="showView('cf'); openLevel('cf-exp');">
      <div class="cell-sim">Enterprise Challenge</div>
      <div class="cell-cases">+ CC: Creating Strategic Alignment</div>
      <div class="cell-click-hint">Click to explore →</div>
    </div>
    <div class="grid-cell tm-cell" onclick="showView('tm'); openLevel('tm-exp');">
      <div class="cell-sim">Director Challenge</div>
      <div class="cell-cases">+ CC: Leading in Times of Change</div>
      <div class="cell-click-hint">Click to explore →</div>
    </div>

    <!-- RISING LEADER ROW -->
    <div class="grid-level-label">Rising Leader</div>

    <div class="grid-cell ba-cell" onclick="showView('ba'); openLevel('ba-rising');">
      <div class="cell-sim">Income Challenge</div>
      <div class="cell-cases">+ CC: Analyzing Profit Drivers<br>+ CC: Managing Profitability</div>
      <div class="cell-click-hint">Click to explore →</div>
    </div>
    <div class="grid-cell cf-cell" onclick="showView('cf'); openLevel('cf-rising');">
      <div class="cell-sim">Influence Challenge</div>
      <div class="cell-cases">+ CC: Shifting Mindsets &amp; Behaviors<br>+ CC: Influencing Without Authority</div>
      <div class="cell-click-hint">Click to explore →</div>
    </div>
    <div class="grid-cell tm-cell" onclick="showView('tm'); openLevel('tm-rising');">
      <div class="cell-sim">Management Challenge</div>
      <div class="cell-cases">+ CC: Enabling Peak Performance<br>+ CC: Navigating Critical Conversations</div>
      <div class="cell-click-hint">Click to explore →</div>
    </div>
  </div>
</div>

<!-- ============ COMPARE PROGRAMS ============ -->
<div class="view-panel" id="view-compare">
  <div class="overview-intro" style="margin-bottom:24px;">
    <h2>Compare Programs</h2>
    <p>Build and compare programs side-by-side. Add presets, simulations, or case challenges to each program.</p>
  </div>

  <div class="compare-action-bar">
    <button class="compare-btn" id="compare-btn" onclick="runComparison()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2v-4M9 21H5a2 2 0 0 1-2-2v-4"/>
      </svg>
      Compare Programs
    </button>
  </div>

  <div class="compare-container">
    <div class="program-column" id="program-a">
      <div class="program-header" style="background:var(--teal-dark);">
        <h3>Program A</h3>
        <button class="clear-btn" onclick="clearProgram('a')">Clear All</button>
      </div>
      <div class="program-body">
        <div class="program-items" id="program-a-items"></div>
        <div class="program-stats" id="program-a-stats" style="display:none;"></div>
      </div>
    </div>

    <div class="program-column" id="program-b">
      <div class="program-header" style="background:var(--gold);">
        <h3>Program B</h3>
        <button class="clear-btn" onclick="clearProgram('b')">Clear All</button>
      </div>
      <div class="program-body">
        <div class="program-items" id="program-b-items"></div>
        <div class="program-stats" id="program-b-stats" style="display:none;"></div>
      </div>
    </div>

    <div class="program-column program-column-c" id="program-c" onclick="toggleProgramC(event)">
      <div class="program-header" style="background:var(--sage);">
        <h3>Program C</h3>
        <span class="expand-indicator">◀</span>
        <button class="clear-btn" onclick="clearProgram('c'); event.stopPropagation();">Clear All</button>
      </div>
      <div class="program-body">
        <div class="program-items" id="program-c-items"></div>
        <div class="program-stats" id="program-c-stats" style="display:none;"></div>
      </div>
    </div>
  </div>
</div>

<!-- Comparison Analysis Modal -->
<div class="comparison-modal" id="comparison-modal" onclick="if(event.target===this)closeComparisonModal()">
  <div class="comparison-modal-content">
    <div class="comparison-modal-header">
      <h2>Program Comparison Analysis</h2>
      <button class="comparison-modal-close" onclick="closeComparisonModal()">&times;</button>
    </div>
    <div class="comparison-modal-body" id="comparison-modal-body">
      <div class="comparison-loading">
        <div class="spinner"></div>
        <div>Analyzing programs...</div>
      </div>
    </div>
  </div>
</div>

<!-- ============ LIST OF ALL SESSIONS ============ -->
<div class="view-panel" id="view-programs">
  <div class="overview-intro" style="margin-bottom:24px;">
    <h2>List of All Sessions</h2>
    <p>Search and browse all simulations, case challenges, and AI cases. Click any session to see details.</p>
  </div>

  <div class="session-search-bar">
    <input type="text" id="session-search" class="session-search-input" placeholder="Search sessions by name, competency, or keyword..." oninput="filterSessions()">
  </div>

  <div class="prog-filters">
    <span class="prog-filter-label">Pillar:</span>
    <div class="prog-filter-btn active-filter" onclick="toggleProgFilter('pillar','all',this)">All</div>
    <div class="prog-filter-btn ba-filter" onclick="toggleProgFilter('pillar','ba',this)">Business Acumen</div>
    <div class="prog-filter-btn cf-filter" onclick="toggleProgFilter('pillar','cf',this)">Cross-Functional</div>
    <div class="prog-filter-btn tm-filter" onclick="toggleProgFilter('pillar','tm',this)">Team Mgmt</div>
    <div class="prog-filter-btn ts-filter" onclick="toggleProgFilter('pillar','ts',this)">Talent Selection</div>
    <span class="prog-filter-label" style="margin-left:16px;">Level:</span>
    <div class="prog-filter-btn active-filter" onclick="toggleProgFilter('level','all',this)">All</div>
    <div class="prog-filter-btn" onclick="toggleProgFilter('level','rising',this)">Rising</div>
    <div class="prog-filter-btn" onclick="toggleProgFilter('level','experienced',this)">Experienced</div>
    <div class="prog-filter-btn" onclick="toggleProgFilter('level','executive',this)">Executive</div>
  </div>

  <div class="prog-empty-state" id="prog-empty">No sessions match your search.</div>

  <!-- Simulations Section -->
  <div class="session-section" id="section-sims">
    <div class="session-section-header" onclick="toggleSessionSection('sims')">
      <h3>Simulations</h3>
      <span class="session-section-count" id="count-sims"></span>
      <span class="session-section-toggle">▾</span>
    </div>
    <div class="session-section-content" id="grid-sims"></div>
  </div>

  <!-- Case Challenges Section -->
  <div class="session-section" id="section-cases">
    <div class="session-section-header" onclick="toggleSessionSection('cases')">
      <h3>Case Challenges</h3>
      <span class="session-section-count" id="count-cases"></span>
      <span class="session-section-toggle">▾</span>
    </div>
    <div class="session-section-content" id="grid-cases"></div>
  </div>

  <!-- Async Section (AI Cases + Courses) -->
  <div class="session-section" id="section-async">
    <div class="session-section-header" onclick="toggleSessionSection('async')">
      <h3>Async</h3>
      <span class="session-section-count" id="count-async"></span>
      <span class="session-section-toggle">▾</span>
    </div>
    <div class="session-section-content" id="grid-async"></div>
  </div>
</div>

<!-- ============ BUSINESS ACUMEN ============ -->
<div class="view-panel" id="view-ba">
  <div class="pillar-header">
    <div class="pillar-icon ba">📊</div>
    <div>
      <h2>Business Acumen</h2>
      <div class="pillar-desc">Making sound financial decisions that create sustainable, measurable value for all stakeholders</div>
    </div>
  </div>

  <!-- RISING -->
  <div class="level-card" id="ba-rising">
    <div class="level-card-header" onclick="toggleCard('ba-rising')">
      <div class="left">
        <span class="level-badge">Level 1</span>
        <div><div class="level-title">Rising Leader</div><div class="level-subtitle">Income Challenge + Analyzing Profit Drivers + Managing Profitability</div></div>
      </div>
      <span class="expand-icon">▾</span>
    </div>
    <div class="level-card-body">
      <div class="level-card-content">
        <div class="level-card-top">
          <span class="audience-badge">Audience: Aspiring, new, and developing leaders</span>
          <div class="doc-links">
            <a href="https://www.notion.so/abilitie1/Business-Finance-Challenge-Manual-207d492187fc80aab40dd43d7b4b8267" target="_blank" class="doc-link">📄 Manual</a>
            <a href="https://www.abilitie.com/video/about-developing-business-acumen" target="_blank" class="doc-link">🎓 Learner Video</a>
          </div>
        </div>
        <div class="programs-grid">
          <div class="program-type-row sims-row">
            <span class="program-type-label">Sim</span>
            <div class="program-type-items">
              <span class="program-item">Income Challenge <span class="item-duration">(4–6 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row cases-row">
            <span class="program-type-label">Cases</span>
            <div class="program-type-items">
              <span class="program-item">Analyzing Profit Drivers <span class="item-duration">(2 hrs)</span></span>
              <span class="program-item">Managing Profitability <span class="item-duration">(2 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row async-row">
            <span class="program-type-label">Async</span>
            <div class="program-type-items">
              <span class="program-item">FiF Ch. 1-2: Back to Business Basics <span class="item-duration">(1–2 hrs)</span></span>
              <span class="program-item">FiF Ch. 3: Reading Financial Statements <span class="item-duration">(2–3 hrs)</span></span>
              <span class="program-item">FiF Ch. 4: From Business Idea to Budget <span class="item-duration">(2–3 hrs)</span></span>
              <span class="program-item">FiF Ch. 5-6: Discounted Cash Flow Analysis <span class="item-duration">(2–3 hrs)</span></span>
            </div>
          </div>
        </div>

        <div class="section-grid">
          <div class="section-block ba-accent">
            <h4>Competencies</h4>
            <ul>
              <li>Read and interpret income statements and basic financial statements</li>
              <li>Decode the profit model of a business — revenue, cost of sales, gross profit, operating expenses</li>
              <li>Conduct breakeven analysis to understand the impact of pricing and cost decisions</li>
              <li>Evaluate market opportunities holistically using demand and cost structure data</li>
              <li>Analyze profit drivers: pricing, volume, cost structure, and margin</li>
              <li>Articulate financial insights using business language to defend strategic recommendations</li>
              <li>Model basic cash flows and connect financial performance to strategic decisions</li>
            </ul>
          </div>
          <div class="section-block ba-accent">
            <h4>Mindsets</h4>
            <ul>
              <li><strong>Value creation thinking:</strong> Every decision either creates or destroys value for stakeholders</li>
              <li><strong>Tradeoff awareness:</strong> Growth, profitability, and risk are always in tension — managing the balance is the job</li>
              <li><strong>Financial curiosity:</strong> Numbers tell a story; learning to read that story empowers better decisions</li>
              <li><strong>Long-term orientation:</strong> Short-term wins shouldn't come at the expense of sustainable performance</li>
              <li><strong>Competitive awareness:</strong> Always benchmark decisions against market dynamics and competitor behavior</li>
            </ul>
          </div>
          <div class="section-block ba-accent">
            <h4>Tools &amp; Frameworks</h4>
            <ul>
              <li><strong>The Levers of Value:</strong> Growth × Profitability × Risk = Shareholder Value</li>
              <li><strong>Income Statement / P&amp;L:</strong> Sales → Cost of Sales → Gross Profit → Operating Expenses → Net Profit</li>
              <li><strong>Breakeven Analysis:</strong> Fixed costs ÷ (Price − Variable Cost) = Breakeven volume</li>
              <li><strong>Cost Structure Comparison:</strong> Built facility vs. Contract facility tradeoff analysis</li>
              <li><strong>Pricing &amp; Volume Strategy:</strong> High-volume vs. high-margin positioning</li>
              <li><strong>Financial Spreadsheets &amp; Inquiry:</strong> Using data tables to model scenarios and interpret outcomes</li>
              <li><strong>NPV Introduction:</strong> Time value of money basics and connecting finance to strategy</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- EXPERIENCED -->
  <div class="level-card" id="ba-exp">
    <div class="level-card-header" onclick="toggleCard('ba-exp')">
      <div class="left">
        <span class="level-badge">Level 2</span>
        <div><div class="level-title">Experienced Leader</div><div class="level-subtitle">Business Challenge + Balancing Growth &amp; Risk</div></div>
      </div>
      <span class="expand-icon">▾</span>
    </div>
    <div class="level-card-body">
      <div class="level-card-content">
        <div class="level-card-top">
          <span class="audience-badge">Audience: Non-financial directors and senior managers</span>
          <div class="doc-links">
            <a href="https://www.notion.so/abilitie1/Business-Finance-Challenge-Manual-207d492187fc80aab40dd43d7b4b8267" target="_blank" class="doc-link">📄 Manual</a>
            <a href="https://vimeo.com/1130390875/7e6c52abdf" target="_blank" class="doc-link">🎬 Demo</a>
            <a href="https://www.abilitie.com/video/about-developing-business-acumen" target="_blank" class="doc-link">🎓 Learner Video</a>
            <a href="https://vimeo.com/535063382/16932065ff" target="_blank" class="doc-link">💡 Sales Tips</a>
          </div>
        </div>
        <div class="programs-grid">
          <div class="program-type-row sims-row">
            <span class="program-type-label">Sim</span>
            <div class="program-type-items">
              <span class="program-item">Business Challenge <span class="item-duration">(6–8 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row cases-row">
            <span class="program-type-label">Cases</span>
            <div class="program-type-items">
              <span class="program-item">Balancing Growth &amp; Risk <span class="item-duration">(2 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row async-row">
            <span class="program-type-label">Async</span>
            <div class="program-type-items">
              <span class="program-item">FiF Ch. 1-2: Back to Business Basics <span class="item-duration">(1–2 hrs)</span></span>
              <span class="program-item">FiF Ch. 3: Reading Financial Statements <span class="item-duration">(2–3 hrs)</span></span>
              <span class="program-item">FiF Ch. 4: From Business Idea to Budget <span class="item-duration">(2–3 hrs)</span></span>
              <span class="program-item">FiF Ch. 5-6: Discounted Cash Flow Analysis <span class="item-duration">(2–3 hrs)</span></span>
            </div>
          </div>
        </div>

        <div class="section-grid">
          <div class="section-block ba-accent">
            <h4>Competencies</h4>
            <ul>
              <li>Analyze growth and performance using key financial indicators (revenue growth, margins, profitability trends)</li>
              <li>Evaluate resource allocation and long-term tradeoffs using data-driven analysis</li>
              <li>Project the impact of strategic decisions over multiple time periods</li>
              <li>Communicate financial recommendations using business language and financial logic</li>
              <li>Conduct strategic planning across multiple business units and expansion opportunities</li>
              <li>Interpret financial statements across income, cash flow, and balance sheet</li>
              <li>Model cash flows over time and apply time value of money (NPV) to investment decisions</li>
              <li>Manage the complete value creation cycle — from sales and operations to new business units</li>
            </ul>
          </div>
          <div class="section-block ba-accent">
            <h4>Mindsets</h4>
            <ul>
              <li><strong>Enterprise value lens:</strong> Every function contributes to the total value equation — think beyond your silo</li>
              <li><strong>Risk as a value lever:</strong> De-risking a business is a hidden but powerful way to create value</li>
              <li><strong>Cash flow discipline:</strong> Profits don't equal cash — managing working capital and cash conversion is critical</li>
              <li><strong>Growth with guardrails:</strong> Growth above expectations drives value, but only when paired with profitability</li>
              <li><strong>Strategic patience:</strong> Long-term investments may hurt short-term metrics but create lasting competitive advantage</li>
              <li><strong>Expansion judgment:</strong> Knowing when and how to enter new markets is as important as operational excellence</li>
            </ul>
          </div>
          <div class="section-block ba-accent">
            <h4>Tools &amp; Frameworks</h4>
            <ul>
              <li><strong>The Levers of Value (Advanced):</strong> Growth + Profitability + Risk → Future Cash Flows → Value</li>
              <li><strong>Three Financial Statements:</strong> Income Statement, Cash Flow Statement, Balance Sheet — and how they interrelate</li>
              <li><strong>Net Present Value (NPV):</strong> Discounting future cash flows to evaluate investment decisions</li>
              <li><strong>Cost Structure Analysis:</strong> Fixed vs. variable costs, facility investment decisions, operational leverage</li>
              <li><strong>Cash Flow Modeling:</strong> Cash from operations vs. investing vs. financing; "Profits ≠ Cash"</li>
              <li><strong>Expansion Strategy Framework:</strong> Market sizing, R&amp;D investment thresholds, build vs. contract decisions</li>
              <li><strong>Competitive Analysis:</strong> Benchmarking pricing, margins, and strategy against competitors</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- EXECUTIVE -->
  <div class="level-card" id="ba-exec">
    <div class="level-card-header" onclick="toggleCard('ba-exec')">
      <div class="left">
        <span class="level-badge">Level 3</span>
        <div><div class="level-title">Executive Leader</div><div class="level-subtitle">Finance Challenge (Finance Summit)</div></div>
      </div>
      <span class="expand-icon">▾</span>
    </div>
    <div class="level-card-body">
      <div class="level-card-content">
        <div class="level-card-top">
          <span class="audience-badge">Audience: Senior executives and financial decision-makers</span>
          <div class="doc-links">
            <a href="https://www.notion.so/abilitie1/Business-Finance-Challenge-Manual-207d492187fc80aab40dd43d7b4b8267" target="_blank" class="doc-link">📄 Manual</a>
            <a href="https://vimeo.com/1130390875/7e6c52abdf" target="_blank" class="doc-link">🎬 Demo</a>
            <a href="https://www.abilitie.com/video/about-developing-business-acumen" target="_blank" class="doc-link">🎓 Learner Video</a>
            <a href="https://vimeo.com/535063382/16932065ff" target="_blank" class="doc-link">💡 Sales Tips</a>
          </div>
        </div>
        <div class="programs-grid">
          <div class="program-type-row sims-row">
            <span class="program-type-label">Sim</span>
            <div class="program-type-items">
              <span class="program-item">Finance Challenge <span class="item-duration">(6–8 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row cases-row">
            <span class="program-type-label">Cases</span>
            <div class="program-type-items">
              <span class="program-item">Generating Financial Insights <span class="item-duration">(2 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row async-row">
            <span class="program-type-label">Async</span>
            <div class="program-type-items">
              <span class="program-item">FiF Ch. 1-2: Back to Business Basics <span class="item-duration">(1–2 hrs)</span></span>
              <span class="program-item">FiF Ch. 3: Reading Financial Statements <span class="item-duration">(2–3 hrs)</span></span>
              <span class="program-item">FiF Ch. 4: From Business Idea to Budget <span class="item-duration">(2–3 hrs)</span></span>
              <span class="program-item">FiF Ch. 5-6: Discounted Cash Flow Analysis <span class="item-duration">(2–3 hrs)</span></span>
            </div>
          </div>
        </div>

        <div class="section-grid">
          <div class="section-block ba-accent">
            <h4>Competencies</h4>
            <ul>
              <li>Conduct strategic investment analysis using ratio analysis and return metrics</li>
              <li>Calculate and interpret Return on Invested Capital (ROIC) and its component drivers</li>
              <li>Evaluate the relationship between ROIC, cost of capital, and value creation</li>
              <li>Analyze capital efficiency: how much capital is needed to generate a dollar in revenue or profit</li>
              <li>Diagnose enterprise performance using the ROIC "tree" — deconstructing returns into margin, turnover, and expense drivers</li>
              <li>Make long-term investment decisions with ambiguous and incomplete data sets</li>
              <li>Manage working capital to optimize cash flow (receivables, payables, inventory)</li>
              <li>Communicate financial strategy and value creation narratives to boards and investors</li>
            </ul>
          </div>
          <div class="section-block ba-accent">
            <h4>Mindsets</h4>
            <ul>
              <li><strong>Capital efficiency as discipline:</strong> It's not just about profit — it's about how much capital it takes to generate that profit</li>
              <li><strong>Investor perspective:</strong> Think like an owner — what would make you invest in this company?</li>
              <li><strong>Sustainable business thinking:</strong> Value serves all stakeholders: shareholders, employees, customers, society, and the environment</li>
              <li><strong>ROIC &gt; Revenue:</strong> Scale alone doesn't create value; returns relative to invested capital determine whether growth is worthwhile</li>
              <li><strong>Risk-adjusted returns:</strong> Factor uncertainty and cost of capital into every strategic bet</li>
              <li><strong>Financial storytelling:</strong> Numbers become powerful when woven into a compelling strategic narrative</li>
            </ul>
          </div>
          <div class="section-block ba-accent">
            <h4>Tools &amp; Frameworks</h4>
            <ul>
              <li><strong>ROIC (Return on Invested Capital):</strong> NOPAT ÷ Invested Capital (Fixed Assets + Working Capital)</li>
              <li><strong>The ROIC Tree:</strong> Decomposing returns into Gross Margin, OpEx/Sales, Capital Turnover, Working Capital/Sales</li>
              <li><strong>Cost of Capital:</strong> Time value of money, present value of future cash flows, discount rate analysis</li>
              <li><strong>ROIC vs. Cost of Capital:</strong> Value is created only when ROIC exceeds the cost of capital</li>
              <li><strong>Value Driver Framework:</strong> Growth + Profitability + Capital Efficiency → Future Cash Flows → Value</li>
              <li><strong>Working Capital Management:</strong> Receivables, payables, and inventory optimization as levers of cash flow</li>
              <li><strong>Ratio Analysis:</strong> Gross margin, operating margin, capital turnover, expense ratios for benchmarking</li>
              <li><strong>Strategic Business Planning:</strong> Integrating financial analysis with market positioning and growth strategy</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ============ CROSS-FUNCTIONAL DECISION-MAKING ============ -->
<div class="view-panel" id="view-cf">
  <div class="pillar-header">
    <div class="pillar-icon cf">🔀</div>
    <div>
      <h2>Cross-Functional Decision-Making</h2>
      <div class="pillar-desc">Shaping resilient organizations that execute present strategy while adapting to change</div>
    </div>
  </div>

  <!-- RISING -->
  <div class="level-card" id="cf-rising">
    <div class="level-card-header" onclick="toggleCard('cf-rising')">
      <div class="left">
        <span class="level-badge">Level 1</span>
        <div><div class="level-title">Rising Leader</div><div class="level-subtitle">Influence Challenge + Shifting Mindsets &amp; Behaviors + Influencing Without Authority</div></div>
      </div>
      <span class="expand-icon">▾</span>
    </div>
    <div class="level-card-body">
      <div class="level-card-content">
        <div class="level-card-top">
          <span class="audience-badge">Audience: Aspiring, new, and developing leaders</span>
          <div class="doc-links">
            <a href="https://www.notion.so/abilitie1/Influence-Challenge-Manual-247d492187fc80b29c5ee995ae9f0b86" target="_blank" class="doc-link">📄 Manual</a>
            <a href="https://vimeo.com/1139217053/652e864a39" target="_blank" class="doc-link">🎬 Demo</a>
            <a href="https://vimeo.com/895039602" target="_blank" class="doc-link">🎥 Intro Video</a>
            <a href="https://www.notion.so/abilitie1/Arrow-AIC-Manual-299d492187fc80acb885e46020182f44" target="_blank" class="doc-link">📄 AI Cases</a>
            <a href="https://vimeo.com/1132581966/c4914f9c1a" target="_blank" class="doc-link">🎬 AIC Demo</a>
          </div>
        </div>
        <div class="programs-grid">
          <div class="program-type-row sims-row">
            <span class="program-type-label">Sim</span>
            <div class="program-type-items">
              <span class="program-item">Influence Challenge <span class="item-duration">(4–8 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row cases-row">
            <span class="program-type-label">Cases</span>
            <div class="program-type-items">
              <span class="program-item">Shifting Mindsets &amp; Behaviors <span class="item-duration">(2 hrs)</span></span>
              <span class="program-item">Influencing Without Authority <span class="item-duration">(2 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row async-row">
            <span class="program-type-label">Async</span>
            <div class="program-type-items">
              <span class="program-item ai-case-item">Hold The Line? <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">A Change Will Do You Good. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">I'm Not Here To Make Friends. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Spread Your Wings and Fly. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">The Fault Line. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">I'm Not Convinced. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Scope Springs Eternal. <span class="item-duration">(15–20 min)</span></span>
            </div>
          </div>
        </div>

        <div class="section-grid">
          <div class="section-block cf-accent">
            <h4>Competencies</h4>
            <ul>
              <li>Identify stakeholder interests and separate surface positions from underlying motivations</li>
              <li>Map stakeholders strategically across internal and external networks</li>
              <li>Build alignment through influence without relying on formal authority</li>
              <li>Design and execute an influence strategy using both expressive and receptive tactics</li>
              <li>Diagnose power dynamics and leverage reciprocity in professional relationships</li>
              <li>Adapt communication approach to match stakeholder preferences and contexts</li>
              <li>Translate concerns, resistance, and skepticism into shared messaging and alignment</li>
              <li>Build credibility and trust across peer relationships to advance ideas</li>
            </ul>
          </div>
          <div class="section-block cf-accent">
            <h4>Mindsets</h4>
            <ul>
              <li><strong>The Platinum Rule:</strong> Influence others as they want to be influenced, not as you would want to be</li>
              <li><strong>Positions vs. interests:</strong> What people say they want often masks what they truly need — surface the deeper interests</li>
              <li><strong>Influence as investment:</strong> Influence is built over time through trust and reciprocity, not exercised in a moment</li>
              <li><strong>Alignment ≠ Agreement:</strong> You don't need everyone to agree — you need them to align around a shared direction</li>
              <li><strong>WIIFM (What's In It For Me):</strong> Frame your ask in terms of what the other person values, not what you need</li>
              <li><strong>Widen the universe:</strong> The stakeholders you need to influence may not be the obvious ones — look beyond your immediate circle</li>
            </ul>
          </div>
          <div class="section-block cf-accent">
            <h4>Tools &amp; Frameworks</h4>
            <ul>
              <li><strong>From Idea to Action:</strong> Interests → Relationships → Approach (the three pillars of influence)</li>
              <li><strong>Positions vs. Interests Analysis:</strong> Questions to surface deeper motivations behind stated positions</li>
              <li><strong>Stakeholder Universe Map:</strong> Internal (boss, peers, direct reports) and External (partners, vendors, regulators, public)</li>
              <li><strong>Expressive vs. Receptive Tactics:</strong> Tell, Sell, Negotiate, Inspire (expressive) vs. Inquire, Listen, Empathize, Facilitate (receptive)</li>
              <li><strong>Reciprocity Matrix:</strong> Proactive (Gift, Appeal) vs. Reactive (Return the Favor, Tit-for-Tat)</li>
              <li><strong>Shared Interests Mapping:</strong> Venn diagram of My Interests, Their Interests, Our Shared Interests</li>
              <li><strong>WIIFM Framework:</strong> What's In It For Me — framing influence through the other person's lens</li>
              <li><strong>Thought Challenging:</strong> Identifying and reframing limiting beliefs that block alignment</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- EXPERIENCED -->
  <div class="level-card" id="cf-exp">
    <div class="level-card-header" onclick="toggleCard('cf-exp')">
      <div class="left">
        <span class="level-badge">Level 2</span>
        <div><div class="level-title">Experienced Leader</div><div class="level-subtitle">Enterprise Challenge + Creating Strategic Alignment</div></div>
      </div>
      <span class="expand-icon">▾</span>
    </div>
    <div class="level-card-body">
      <div class="level-card-content">
        <div class="level-card-top">
          <span class="audience-badge">Audience: Directors and senior managers</span>
          <div class="doc-links">
            <a href="https://www.notion.so/abilitie1/Enterprise-Executive-Challenge-Manual-206d492187fc80f7bd9ee5d8cb9bb15d" target="_blank" class="doc-link">📄 Manual</a>
            <a href="https://www.abilitie.com/video/about-enterprise-challenge" target="_blank" class="doc-link">🎓 Learner Video</a>
            <a href="https://www.abilitie.com/video/about-executing-cross-functional-environments" target="_blank" class="doc-link">🎓 Accel Video</a>
            <a href="https://vimeo.com/589401207/103c0f7301" target="_blank" class="doc-link">💡 Sales Tips</a>
            <a href="https://www.notion.so/abilitie1/Arrow-AIC-Manual-299d492187fc80acb885e46020182f44" target="_blank" class="doc-link">📄 AI Cases</a>
            <a href="https://vimeo.com/1132581966/c4914f9c1a" target="_blank" class="doc-link">🎬 AIC Demo</a>
          </div>
        </div>
        <div class="programs-grid">
          <div class="program-type-row sims-row">
            <span class="program-type-label">Sim</span>
            <div class="program-type-items">
              <span class="program-item">Enterprise Challenge <span class="item-duration">(6–8 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row cases-row">
            <span class="program-type-label">Cases</span>
            <div class="program-type-items">
              <span class="program-item">Creating Strategic Alignment <span class="item-duration">(2 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row async-row">
            <span class="program-type-label">Async</span>
            <div class="program-type-items">
              <span class="program-item ai-case-item">Hold The Line? <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">A Change Will Do You Good. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">I'm Not Here To Make Friends. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Spread Your Wings and Fly. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">The Fault Line. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">I'm Not Convinced. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Scope Springs Eternal. <span class="item-duration">(15–20 min)</span></span>
            </div>
          </div>
        </div>

        <div class="section-grid">
          <div class="section-block cf-accent">
            <h4>Competencies</h4>
            <ul>
              <li>Translate strategy into cross-functional action across multiple departments</li>
              <li>Make strategic decisions under conditions of ambiguity and uncertainty</li>
              <li>Communicate and collaborate across functional silos to influence outcomes</li>
              <li>Identify leadership blind spots that affect execution quality</li>
              <li>Assess strategic fit and navigate senior stakeholder dynamics to recommend a path forward</li>
              <li>Analyze core competencies to guide strategic positioning and brand decisions</li>
              <li>Conduct root cause analysis and assess risk systematically under pressure</li>
              <li>Design decision-making processes that mitigate bias and improve outcomes</li>
            </ul>
          </div>
          <div class="section-block cf-accent">
            <h4>Mindsets</h4>
            <ul>
              <li><strong>Process over content:</strong> The quality of HOW you decide (53%) matters more than WHAT you decide (8%) — per McKinsey research</li>
              <li><strong>The Content Trap:</strong> Teams that focus only on the "what" of decisions and ignore the "how" consistently underperform</li>
              <li><strong>Bias awareness:</strong> Pattern-recognition, action-oriented, stability, interest, social, and hierarchy biases all distort decisions</li>
              <li><strong>Enterprise thinking:</strong> Function-level optimization often sub-optimizes the enterprise — think across boundaries</li>
              <li><strong>VUCA readiness:</strong> Build slack, experiment, delegate, and treat failure as learning in volatile environments</li>
              <li><strong>Intentional process ownership:</strong> Anyone can take ownership of the decision-making process regardless of hierarchy</li>
            </ul>
          </div>
          <div class="section-block cf-accent">
            <h4>Tools &amp; Frameworks</h4>
            <ul>
              <li><strong>Decision-Making Framework:</strong> Define (Identify Decision Points) → Deliberate (Gather Info, Identify Options) → Deliver (Execute Aligned Decisions)</li>
              <li><strong>Decision Models Spectrum:</strong> Sole Decider → Majority Vote → Consensus → Delegate/Empower (tradeoffs: speed, legitimacy, accountability)</li>
              <li><strong>VUCA Framework:</strong> Volatility, Uncertainty, Complexity, Ambiguity — with tailored responses for each</li>
              <li><strong>Risk Assessment Matrix:</strong> Likelihood × Impact scoring to prioritize risks and opportunities</li>
              <li><strong>Root Cause Analysis (Fishbone Diagram):</strong> Structured technique to diagnose problems beyond surface symptoms</li>
              <li><strong>Decision Matrix:</strong> Weighted scoring of options across multiple criteria</li>
              <li><strong>Core Competencies Analysis:</strong> Five diagnostic questions to evaluate strategic fit</li>
              <li><strong>Brand Positioning Statements:</strong> Articulating strategic differentiation for new initiatives</li>
              <li><strong>Bias Mitigation Structures:</strong> Devil's advocate, role rotation, time-boxing, and diversity in team composition</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- EXECUTIVE -->
  <div class="level-card" id="cf-exec">
    <div class="level-card-header" onclick="toggleCard('cf-exec')">
      <div class="left">
        <span class="level-badge">Level 3</span>
        <div><div class="level-title">Executive Leader</div><div class="level-subtitle">Executive Challenge (Executive Summit)</div></div>
      </div>
      <span class="expand-icon">▾</span>
    </div>
    <div class="level-card-body">
      <div class="level-card-content">
        <div class="level-card-top">
          <span class="audience-badge">Audience: Senior executives and cross-functional leaders</span>
          <div class="doc-links">
            <a href="https://www.notion.so/abilitie1/Enterprise-Executive-Challenge-Manual-206d492187fc80f7bd9ee5d8cb9bb15d" target="_blank" class="doc-link">📄 Manual</a>
            <a href="https://vimeo.com/1132580010/5c899f2237" target="_blank" class="doc-link">🎬 Demo</a>
            <a href="https://www.abilitie.com/video/about-enterprise-challenge" target="_blank" class="doc-link">🎓 Learner Video</a>
            <a href="https://vimeo.com/589401207/103c0f7301" target="_blank" class="doc-link">💡 Sales Tips</a>
          </div>
        </div>
        <div class="programs-grid">
          <div class="program-type-row sims-row">
            <span class="program-type-label">Sim</span>
            <div class="program-type-items">
              <span class="program-item">Executive Challenge <span class="item-duration">(6–8 hrs)</span></span>
            </div>
          </div>
        </div>

        <div class="section-grid">
          <div class="section-block cf-accent">
            <h4>Competencies</h4>
            <ul>
              <li>Develop and execute a coherent business strategy across multiple functions simultaneously</li>
              <li>Manage cross-functional resource allocation — talent, capital, and time — under real constraints</li>
              <li>Navigate complex organizational dynamics with competing priorities, stakeholders, and information asymmetries</li>
              <li>Recognize and mitigate personal and collective leadership blind spots</li>
              <li>Respond decisively to unexpected events (VUCA) while maintaining strategic coherence</li>
              <li>Build and present executive-level strategic narratives (storytelling, data visualization, board presentations)</li>
              <li>Manage talent as a strategic asset — hiring, developing, and retaining key people in a competitive environment</li>
              <li>Align departments under a unified strategy while managing functional tensions and competing KPIs</li>
            </ul>
          </div>
          <div class="section-block cf-accent">
            <h4>Mindsets</h4>
            <ul>
              <li><strong>Cynefin thinking:</strong> Different situations (simple, complicated, complex, chaotic) demand fundamentally different decision approaches</li>
              <li><strong>Strategy ↔ Execution loop:</strong> "Without strategy, execution is aimless. Without execution, strategy is useless." — Morris Chang</li>
              <li><strong>Complex adaptive systems:</strong> In complex domains, probe-sense-respond replaces plan-execute — experimentation is strategy</li>
              <li><strong>Process legitimacy:</strong> Agreeing on the process of decision-making brings legitimacy to any outcome</li>
              <li><strong>Emergent leadership:</strong> Open up discussion, set barriers, stimulate attractors, encourage dissent, and monitor for emergence</li>
              <li><strong>Cross-functional empathy:</strong> Every C-suite role sees the business through a different lens — understanding those lenses is the executive's job</li>
            </ul>
          </div>
          <div class="section-block cf-accent">
            <h4>Tools &amp; Frameworks</h4>
            <ul>
              <li><strong>Cynefin Framework:</strong> Simple (best practices) → Complicated (analysis) → Complex (experiments) → Chaotic (act fast)</li>
              <li><strong>Executive Decision Process:</strong> Define → Deliberate → Deliver with intentional process design and role clarity</li>
              <li><strong>Bias Recognition Toolkit:</strong> Pattern-recognition, action-oriented, stability, interest, social, expertise, and hierarchy biases</li>
              <li><strong>Structured Decision Roles:</strong> Idea generator, Decider, Facilitator, Timekeeper, Agenda setter, Implementer</li>
              <li><strong>Executive Storytelling Framework:</strong> Purpose → Audience → Situation; three clear points; A/V sync</li>
              <li><strong>Expected Value Analysis:</strong> Probability-weighted assessment of strategic options (e.g., BioSky acquisition model)</li>
              <li><strong>VUCA Response Strategies:</strong> Slack/preparation (volatility), analysis (uncertainty), experimentation (complexity), simplify/add expertise (ambiguity)</li>
              <li><strong>Board Presentation Design:</strong> Action headings, data-driven slides, compelling "so what" on every slide</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ============ TEAM MANAGEMENT ============ -->
<div class="view-panel" id="view-tm">
  <div class="pillar-header">
    <div class="pillar-icon tm">👥</div>
    <div>
      <h2>Team Management</h2>
      <div class="pillar-desc">Cultivating individuals to deliver results now while coaching them towards higher future performance</div>
    </div>
  </div>

  <!-- RISING -->
  <div class="level-card" id="tm-rising">
    <div class="level-card-header" onclick="toggleCard('tm-rising')">
      <div class="left">
        <span class="level-badge">Level 1</span>
        <div><div class="level-title">Rising Leader</div><div class="level-subtitle">Management Challenge + Enabling Peak Performance + Navigating Critical Conversations</div></div>
      </div>
      <span class="expand-icon">▾</span>
    </div>
    <div class="level-card-body">
      <div class="level-card-content">
        <div class="level-card-top">
          <span class="audience-badge">Audience: Aspiring, new, and developing people managers</span>
          <div class="doc-links">
            <a href="https://www.notion.so/abilitie1/Management-Director-Challenge-Manual-208d492187fc804cb509c656d28c6cce" target="_blank" class="doc-link">📄 Manual</a>
            <a href="https://vimeo.com/1133365537/f0dcd5c2a8" target="_blank" class="doc-link">🎬 Demo</a>
            <a href="https://vimeo.com/868126687" target="_blank" class="doc-link">🎥 Intro Video</a>
            <a href="https://www.abilitie.com/video/about-becoming-an-effective-manager" target="_blank" class="doc-link">🎓 Learner Video</a>
            <a href="https://vimeo.com/644577305/130ca1b4ce" target="_blank" class="doc-link">💡 Sales Tips</a>
            <a href="https://www.notion.so/abilitie1/Arrow-AIC-Manual-299d492187fc80acb885e46020182f44" target="_blank" class="doc-link">📄 AI Cases</a>
            <a href="https://vimeo.com/1132581966/c4914f9c1a" target="_blank" class="doc-link">🎬 AIC Demo</a>
          </div>
        </div>
        <div class="programs-grid">
          <div class="program-type-row sims-row">
            <span class="program-type-label">Sim</span>
            <div class="program-type-items">
              <span class="program-item">Management Challenge <span class="item-duration">(6–8 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row cases-row">
            <span class="program-type-label">Cases</span>
            <div class="program-type-items">
              <span class="program-item">Enabling Peak Performance <span class="item-duration">(2 hrs)</span></span>
              <span class="program-item">Navigating Critical Conversations <span class="item-duration">(2 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row async-row">
            <span class="program-type-label">Async</span>
            <div class="program-type-items">
              <span class="program-item ai-case-item">Get the Message? <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Close the Door. Have a Seat. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">It's a Slippery Slope. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Welcome Aboard! <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">I've Got Good News! <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Blindsided. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Why Not Me? <span class="item-duration">(15–20 min)</span></span>
            </div>
          </div>
        </div>

        <div class="section-grid">
          <div class="section-block tm-accent">
            <h4>Competencies</h4>
            <ul>
              <li>Set clear, explicit expectations collaboratively (Say → Ask → Create)</li>
              <li>Evaluate both capabilities and confidence levels for each team member</li>
              <li>Identify and enable individual motivators for each direct report</li>
              <li>Deliver structured feedback using the SBI framework (Situation-Behavior-Impact)</li>
              <li>Coach for growth — guiding development conversations that connect to motivators</li>
              <li>Navigate critical and difficult conversations with empathy and clarity</li>
              <li>Practice active listening and focused presence as a management discipline</li>
              <li>Balance delivering results with growing capabilities — the dual mandate of management</li>
            </ul>
          </div>
          <div class="section-block tm-accent">
            <h4>Mindsets</h4>
            <ul>
              <li><strong>Trust as foundation:</strong> Everything — expectations, feedback, coaching, presence — is built on a foundation of trust</li>
              <li><strong>Everyone is different:</strong> Your employees are unlikely to be motivated by the same things that drive you — invest in understanding each person</li>
              <li><strong>Coaching over compliance:</strong> "In our offices we have way too much compliance and way too little engagement" — Daniel Pink</li>
              <li><strong>Make the implicit explicit:</strong> Unspoken expectations are unmet expectations — always clarify what "good" looks like</li>
              <li><strong>Feedback is a gift:</strong> People value self-improvement more than self-esteem — don't avoid hard conversations</li>
              <li><strong>Presence is the #1 skill:</strong> Experienced managers say the most impactful thing they do every day is ask questions and listen actively</li>
              <li><strong>Intent vs. Impact:</strong> Always close the gap between the message you intend to send and the impact actually received</li>
            </ul>
          </div>
          <div class="section-block tm-accent">
            <h4>Tools &amp; Frameworks</h4>
            <ul>
              <li><strong>The Pillars of Trust:</strong> Set Clear Expectations → Enable Motivators → Provide Feedback &amp; Coach → Be Present</li>
              <li><strong>SBI + Intent Framework:</strong> Situation → Behavior → Impact → Intent (structured feedback model)</li>
              <li><strong>8 Motivators Model:</strong> Achievement, Security, Recognition, Mastery, Companionship, Position/Status, Autonomy, Purpose</li>
              <li><strong>GROW Coaching Model:</strong> Goal → Reality → Options → Way Forward</li>
              <li><strong>SMART Goals:</strong> Specific, Measurable, Achievable, Relevant, Time-bound</li>
              <li><strong>Personal Motivators Assessment:</strong> Self-ranking exercise to identify your own and your team's motivator profiles</li>
              <li><strong>Conversation Preparation Worksheet:</strong> Structured pre-meeting planning covering motivators, intent, structure, and follow-up</li>
              <li><strong>Development Plan Template:</strong> Identification of developmental areas → Commitments → Action items with timelines</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- EXPERIENCED -->
  <div class="level-card" id="tm-exp">
    <div class="level-card-header" onclick="toggleCard('tm-exp')">
      <div class="left">
        <span class="level-badge">Level 2</span>
        <div><div class="level-title">Experienced Leader</div><div class="level-subtitle">Director Challenge + Leading in Times of Change</div></div>
      </div>
      <span class="expand-icon">▾</span>
    </div>
    <div class="level-card-body">
      <div class="level-card-content">
        <div class="level-card-top">
          <span class="audience-badge">Audience: Leaders of multiple teams; functional or department heads</span>
          <div class="doc-links">
            <a href="https://www.notion.so/abilitie1/Management-Director-Challenge-Manual-208d492187fc804cb509c656d28c6cce" target="_blank" class="doc-link">📄 Manual</a>
            <a href="https://docs.google.com/presentation/d/1PyZGmC1L-d3iTckB1qiD1NdqezwFIMdYCHZGE4Bv3hM/edit" target="_blank" class="doc-link">📊 Demo Slides</a>
            <a href="https://www.abilitie.com/video/about-becoming-an-effective-manager" target="_blank" class="doc-link">🎓 Learner Video</a>
            <a href="https://vimeo.com/644577305/130ca1b4ce" target="_blank" class="doc-link">💡 Sales Tips</a>
            <a href="https://www.notion.so/abilitie1/Arrow-AIC-Manual-299d492187fc80acb885e46020182f44" target="_blank" class="doc-link">📄 AI Cases</a>
            <a href="https://vimeo.com/1132581966/c4914f9c1a" target="_blank" class="doc-link">🎬 AIC Demo</a>
          </div>
        </div>
        <div class="programs-grid">
          <div class="program-type-row sims-row">
            <span class="program-type-label">Sim</span>
            <div class="program-type-items">
              <span class="program-item">Director Challenge <span class="item-duration">(6–8 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row cases-row">
            <span class="program-type-label">Cases</span>
            <div class="program-type-items">
              <span class="program-item">Leading in Times of Change <span class="item-duration">(2 hrs)</span></span>
            </div>
          </div>
          <div class="program-type-row async-row">
            <span class="program-type-label">Async</span>
            <div class="program-type-items">
              <span class="program-item ai-case-item">Get the Message? <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Close the Door. Have a Seat. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">It's a Slippery Slope. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Welcome Aboard! <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">I've Got Good News! <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Blindsided. <span class="item-duration">(15–20 min)</span></span>
              <span class="program-item ai-case-item">Why Not Me? <span class="item-duration">(15–20 min)</span></span>
            </div>
          </div>
        </div>

        <div class="section-grid">
          <div class="section-block tm-accent">
            <h4>Competencies</h4>
            <ul>
              <li>Empower managers to drive performance — lead through people, not around them</li>
              <li>Align multiple teams across competing priorities, constraints, and incentive structures</li>
              <li>Build leadership culture and strengthen the organizational talent pipeline</li>
              <li>Navigate organizational change with deliberate people and team decisions</li>
              <li>Make tough organizational calls — assess fit holistically and lead change with intent</li>
              <li>Prioritize and delegate strategically across a portfolio of initiatives (launch, business-as-usual, innovation)</li>
              <li>Diagnose and develop managers with varying growth areas (micromanagement, conflict avoidance, resistance to change)</li>
              <li>Select and develop successors — building bench strength for the organization's future</li>
            </ul>
          </div>
          <div class="section-block tm-accent">
            <h4>Mindsets</h4>
            <ul>
              <li><strong>Force multiplier:</strong> Your job is no longer to do the work — it's to multiply the capability and output of your leaders</li>
              <li><strong>Leader-of-leaders identity:</strong> The shift from managing individuals to managing managers requires a fundamentally different approach</li>
              <li><strong>First Team thinking:</strong> Your first team is your peer group of leaders, not the team that reports to you — enterprise alignment starts at the top</li>
              <li><strong>Enterprise over function:</strong> Optimizing your department at the expense of the organization is a failure of leadership</li>
              <li><strong>Culture is a lever:</strong> Culture isn't a byproduct — it's a strategic lever that can be intentionally shaped to drive results</li>
              <li><strong>Change as leadership:</strong> Change is not something that happens to you — it's something you lead with intent, empathy, and conviction</li>
            </ul>
          </div>
          <div class="section-block tm-accent">
            <h4>Tools &amp; Frameworks</h4>
            <ul>
              <li><strong>Levers of Leadership:</strong> Results Multiplier + Culture Multiplier + Alignment Multiplier</li>
              <li><strong>Blake Mouton Grid:</strong> Mapping leadership style across Concern for Results vs. Concern for People</li>
              <li><strong>First Team Concept:</strong> Prioritizing peer leadership alignment before cascading to your own teams</li>
              <li><strong>Delegation &amp; Prioritization Framework:</strong> Strategic time allocation across coaching, aligning, and driving execution</li>
              <li><strong>Manager Development Profiles:</strong> Identifying and addressing distinct manager archetypes and growth areas</li>
              <li><strong>Change Leadership Model:</strong> Assess organizational fit → Communicate with intent → Manage resistance → Sustain momentum</li>
              <li><strong>Successor Planning:</strong> Identifying, developing, and selecting leaders for the organization's next chapter</li>
              <li><strong>Initiative Portfolio Management:</strong> Balancing "must-do" launches, steady-state operations, and innovation bets</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</div><!-- /main -->

<script>
// Gate screen
function checkGate() {
  const input = document.getElementById('gate-input');
  const error = document.getElementById('gate-error');
  const answer = input.value.trim().toLowerCase();

  if (answer === 'abi') {
    document.getElementById('gate-screen').style.display = 'none';
    // Store in localStorage so it persists across browser sessions
    localStorage.setItem('gateUnlocked', 'true');
  } else {
    error.classList.add('show');
    input.value = '';
    input.focus();
    setTimeout(() => error.classList.remove('show'), 2000);
  }
}

// Check if already unlocked (persisted in localStorage)
if (localStorage.getItem('gateUnlocked') === 'true') {
  document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('gate-screen').style.display = 'none';
  });
}

// Map views to nav button indices (0=Explore, 1=Compare, 2=Ask)
const NAV_BTN_MAP = {
  overview: 0, programs: 0, ba: 0, cf: 0, tm: 0,  // All explore views
  compare: 1,
  ai: 2
};

// Landing page functions
function enterApp(view) {
  document.getElementById('landing-page').style.display = 'none';
  document.getElementById('app-hero').style.display = 'block';
  document.getElementById('app-nav').style.display = 'block';
  document.getElementById('app-main').style.display = 'block';
  showView(view);
}

function showLanding() {
  document.getElementById('landing-page').style.display = 'block';
  document.getElementById('app-hero').style.display = 'none';
  document.getElementById('app-nav').style.display = 'none';
  document.getElementById('app-main').style.display = 'none';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Explore dropdown
function toggleExploreMenu() {
  const menu = document.getElementById('explore-menu');
  menu.classList.toggle('show');
}

function closeExploreMenu() {
  document.getElementById('explore-menu').classList.remove('show');
}

// Close dropdown when clicking outside
document.addEventListener('click', function(e) {
  if (!e.target.closest('.nav-dropdown')) {
    closeExploreMenu();
  }
});

function showView(id) {
  document.querySelectorAll('.view-panel').forEach(p => p.classList.remove('active'));
  document.getElementById('view-' + id).classList.add('active');
  // Update nav button highlighting
  document.querySelectorAll('.nav-main-btn').forEach(b => b.classList.remove('active'));
  const btns = document.querySelectorAll('.nav-main-buttons > button, .nav-main-buttons > .nav-dropdown > button');
  if (NAV_BTN_MAP[id] !== undefined && btns[NAV_BTN_MAP[id]]) {
    btns[NAV_BTN_MAP[id]].classList.add('active');
  }
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// AI Chat functions
function toggleAIPicker() {
  const toggle = document.getElementById('ai-picker-toggle');
  const suggestions = document.getElementById('ai-suggestions');
  toggle.classList.toggle('expanded');
  suggestions.classList.toggle('expanded');
}

function collapseAIPicker() {
  document.getElementById('ai-picker-toggle').classList.remove('expanded');
  document.getElementById('ai-suggestions').classList.remove('expanded');
}

function askSuggestion(el) {
  const question = el.textContent.replace(/^💬\s*/, '');
  document.getElementById('ai-input').value = question;
  collapseAIPicker();
  sendAIQuestion();
}

function sendAIQuestion() {
  const input = document.getElementById('ai-input');
  const question = input.value.trim();
  if (!question) return;

  collapseAIPicker();
  const responseEl = document.getElementById('ai-response');
  const responseText = document.getElementById('ai-response-text');

  // Show loading state
  responseEl.classList.add('active');
  responseText.innerHTML = '<em>Thinking...</em>';

  // Simulate AI response (in production, this would call an API)
  setTimeout(() => {
    const response = generateAIResponse(question);
    responseText.innerHTML = response;
  }, 800);
}

function generateAIResponse(question) {
  const q = question.toLowerCase();

  if (q.includes('disc')) {
    return `Great question! DiSC pairs well with several of our programs:<br><br>
    <strong>Management Challenge</strong> - Our Team Management simulation focuses heavily on understanding individual motivators and adapting communication styles, which complements DiSC profiles perfectly.<br><br>
    <strong>Influence Challenge</strong> - This simulation teaches the "Platinum Rule" (influence others as they want to be influenced), directly aligning with DiSC's emphasis on adapting to different behavioral styles.<br><br>
    <strong>Enabling Peak Performance</strong> and <strong>Navigating Critical Conversations</strong> case challenges also build skills in understanding and adapting to different personalities.`;
  }

  if (q.includes('business acumen') || q.includes('30 person')) {
    return `For a 30-person Business Acumen program, here are your program options:<br><br>
    <strong>PROGRAMS:</strong><br><br>
    <strong>Income Accelerator</strong> (Rising Leaders)<br>
    • Income Challenge simulation (4-6 hrs)<br>
    • Analyzing Profit Drivers case (2 hrs)<br>
    • Managing Profitability case (2 hrs)<br>
    • FiF Ch. 1-3 async courses<br><br>
    <strong>Business Accelerator</strong> (Experienced Leaders)<br>
    • Business Challenge simulation (6-8 hrs)<br>
    • Balancing Growth & Risk case (2 hrs)<br>
    • FiF Ch. 1-6 async courses<br><br>
    <strong>For shorter engagements</strong>, you can run individual components:<br>
    • Any case challenge as a standalone 2-hour session<br>
    • Fluent in Finance chapters as pre-work or follow-up<br><br>
    All programs work well with 30 participants in teams of 4-5.`;
  }

  if (q.includes('income challenge') && q.includes('business challenge')) {
    return `<strong>Income Challenge</strong> (Rising Leaders):<br>
    • Focus: Financial fundamentals - income statements, breakeven analysis, profit drivers<br>
    • Best for: New managers learning to read and interpret financial statements<br>
    • Framework: Levers of Value<br><br>
    <strong>Business Challenge</strong> (Experienced Leaders):<br>
    • Focus: Multi-period financial strategy, NPV, cash flow modeling, investment decisions<br>
    • Best for: Directors managing P&L responsibility and making strategic investments<br>
    • Framework: Levers of Value (Advanced)<br><br>
    Income Challenge builds the foundation; Business Challenge extends into strategic financial decision-making.`;
  }

  if (q.includes('cross-functional') || q.includes('collaboration')) {
    return `Our <strong>Cross-Functional Decision-Making</strong> pillar offers these programs:<br><br>
    <strong>PROGRAMS:</strong><br><br>
    <strong>Influence Accelerator</strong> (Rising Leaders)<br>
    • Influence Challenge simulation (4-8 hrs)<br>
    • Shifting Mindsets & Behaviors case (2 hrs)<br>
    • Influencing Without Authority case (2 hrs)<br><br>
    <strong>Enterprise Accelerator</strong> (Experienced Leaders)<br>
    • Enterprise Challenge simulation (6-8 hrs)<br>
    • Creating Strategic Alignment case (2 hrs)<br><br>
    <strong>Individual Components:</strong><br>
    • <strong>Executive Challenge</strong> (6-8 hrs) - C-suite level cross-functional leadership<br>
    • AI-powered async cases for practice between sessions`;
  }

  if (q.includes('management challenge') && q.includes('competenc')) {
    return `<strong>Management Challenge</strong> develops these key competencies:<br><br>
    • Set clear expectations aligned to business goals<br>
    • Deliver effective feedback using structured frameworks<br>
    • Diagnose individual motivators and adapt leadership approach<br>
    • Coach for development and growth<br>
    • Build psychological safety and trust<br>
    • Navigate difficult conversations with empathy<br><br>
    <strong>Framework:</strong> Pillars of Trust<br>
    <strong>Duration:</strong> 6-8 hours<br>
    <strong>Best paired with:</strong> Enabling Peak Performance + Navigating Critical Conversations`;
  }

  if (q.includes('half-day') || q.includes('half day') || q.includes('rising leader')) {
    return `For Rising Leaders, here are your program options:<br><br>
    <strong>FULL PROGRAMS (Accelerators):</strong><br><br>
    <strong>Income Accelerator</strong> - Business Acumen focus<br>
    • Sim + 2 cases + FiF courses = comprehensive financial foundations<br><br>
    <strong>Influence Accelerator</strong> - Cross-Functional focus<br>
    • Sim + 2 cases = building alignment through influence<br><br>
    <strong>Management Accelerator</strong> - Team Management focus<br>
    • Sim + 2 cases = leading and developing people<br><br>
    <strong>FOR HALF-DAY (2-4 hours):</strong><br>
    You can run individual components from any Accelerator:<br>
    • Any case challenge as a standalone 2-hour session<br>
    • Combine 2 case challenges for a 4-hour half-day<br>
    • Use Fluent in Finance chapters as pre-work or follow-up`;
  }

  // Default response
  return `Thanks for your question! Here's how our curriculum is organized:<br><br>
  <strong>PROGRAMS:</strong><br>
  We offer pre-packaged programs at two levels:<br><br>
  <strong>Flagship Programs</strong> (comprehensive, multi-pillar):<br>
  • Flagship Rising Leader - all 3 pillars for new leaders<br>
  • Flagship Experienced Leader - all 3 pillars for senior managers<br><br>
  <strong>Accelerators</strong> (single pillar focus):<br>
  • Income Accelerator / Business Accelerator (Business Acumen)<br>
  • Influence Accelerator / Enterprise Accelerator (Cross-Functional)<br>
  • Management Accelerator / Director Accelerator (Team Management)<br><br>
  <strong>INDIVIDUAL COMPONENTS:</strong><br>
  Each program contains simulations, case challenges, and async courses that can also be run standalone.<br><br>
  Click "Explore" to navigate the full curriculum, or ask me about a specific need!`;
}

function toggleCard(id) {
  document.getElementById(id).classList.toggle('open');
}

function openLevel(id) {
  setTimeout(() => {
    const el = document.getElementById(id);
    if (el && !el.classList.contains('open')) {
      el.classList.add('open');
      setTimeout(() => el.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
    }
  }, 100);
}

// Add source tooltips to pillar explore pages
function addSourceTooltips() {
  // Map of level card IDs to their programs
  const levelPrograms = {
    'ba-rising': ['income-challenge', 'analyzing-profit-drivers', 'managing-profitability', 'fif-business-basics', 'fif-financial-statements', 'fif-business-idea-to-budget', 'fif-dcf-analysis'],
    'ba-exp': ['business-challenge', 'balancing-growth-risk', 'fif-business-basics', 'fif-financial-statements', 'fif-business-idea-to-budget', 'fif-dcf-analysis'],
    'ba-exec': ['finance-challenge', 'generating-financial-insights', 'fif-business-basics', 'fif-financial-statements', 'fif-business-idea-to-budget', 'fif-dcf-analysis'],
    'cf-rising': ['influence-challenge', 'shifting-mindsets', 'influencing-without-authority', 'ai-hold-the-line', 'ai-change-will-do-you-good', 'ai-not-here-to-make-friends', 'ai-spread-your-wings', 'ai-fault-line', 'ai-not-convinced', 'ai-scope-springs-eternal'],
    'cf-exp': ['enterprise-challenge', 'creating-strategic-alignment', 'strategic-problem-solving', 'ai-hold-the-line', 'ai-change-will-do-you-good', 'ai-not-here-to-make-friends', 'ai-spread-your-wings', 'ai-fault-line', 'ai-not-convinced', 'ai-scope-springs-eternal'],
    'cf-exec': ['executive-challenge', 'board-strategy'],
    'tm-rising': ['management-challenge', 'enabling-peak-performance', 'navigating-critical-conversations', 'ai-get-the-message', 'ai-close-the-door', 'ai-slippery-slope', 'ai-welcome-aboard', 'ai-good-news', 'ai-blindsided', 'ai-why-not-me'],
    'tm-exp': ['director-challenge', 'leading-in-times-of-change', 'ai-get-the-message', 'ai-close-the-door', 'ai-slippery-slope', 'ai-welcome-aboard', 'ai-good-news', 'ai-blindsided', 'ai-why-not-me']
  };

  // Wait for PROGRAMS to be defined
  setTimeout(() => {
    Object.keys(levelPrograms).forEach(levelId => {
      const levelCard = document.getElementById(levelId);
      if (!levelCard) return;

      const programIds = levelPrograms[levelId];
      const programs = programIds.map(id => PROGRAMS.find(p => p.id === id)).filter(Boolean);

      // Build lookup maps for this level
      const compMap = {};
      const mindMap = {};
      const toolMap = {};

      programs.forEach(p => {
        (p.competencies || []).forEach(c => {
          const key = c.toLowerCase().substring(0, 50);
          if (!compMap[key]) compMap[key] = [];
          compMap[key].push(p.name);
        });
        (p.mindsets || []).forEach(m => {
          const key = m.toLowerCase().substring(0, 50);
          if (!mindMap[key]) mindMap[key] = [];
          mindMap[key].push(p.name);
        });
        (p.tools || []).forEach(t => {
          const key = t.toLowerCase().substring(0, 50);
          if (!toolMap[key]) toolMap[key] = [];
          toolMap[key].push(p.name);
        });
      });

      // Find all section blocks in this level card
      const sectionBlocks = levelCard.querySelectorAll('.section-block');
      sectionBlocks.forEach(block => {
        const h4 = block.querySelector('h4');
        if (!h4) return;
        const title = h4.textContent.toLowerCase();

        let map = {};
        if (title.includes('competenc')) map = compMap;
        else if (title.includes('mindset')) map = mindMap;
        else if (title.includes('tool') || title.includes('framework')) map = toolMap;

        const listItems = block.querySelectorAll('li');
        listItems.forEach(li => {
          const text = li.textContent.toLowerCase().substring(0, 50);
          // Find a matching key
          const matchKey = Object.keys(map).find(key => text.includes(key.substring(0, 30)) || key.includes(text.substring(0, 30)));
          if (matchKey && map[matchKey]) {
            li.setAttribute('data-source', 'From: ' + map[matchKey].join(', '));
          }
        });
      });
    });
  }, 100);
}

// Run on page load
document.addEventListener('DOMContentLoaded', addSourceTooltips);

/* ========== DOCUMENT LINKS ========== */
const DOC_LINKS = {
  // Business Acumen Sims (BC/FC Manual)
  'income-challenge': {
    manual: 'https://www.notion.so/abilitie1/Business-Finance-Challenge-Manual-207d492187fc80aab40dd43d7b4b8267',
    learnerVideo: 'https://www.abilitie.com/video/about-developing-business-acumen'
  },
  'business-challenge': {
    manual: 'https://www.notion.so/abilitie1/Business-Finance-Challenge-Manual-207d492187fc80aab40dd43d7b4b8267',
    demo: 'https://vimeo.com/1130390875/7e6c52abdf',
    learnerVideo: 'https://www.abilitie.com/video/about-developing-business-acumen',
    salesTips: 'https://vimeo.com/535063382/16932065ff'
  },
  'finance-challenge': {
    manual: 'https://www.notion.so/abilitie1/Business-Finance-Challenge-Manual-207d492187fc80aab40dd43d7b4b8267',
    demo: 'https://vimeo.com/1130390875/7e6c52abdf',
    learnerVideo: 'https://www.abilitie.com/video/about-developing-business-acumen',
    salesTips: 'https://vimeo.com/535063382/16932065ff'
  },
  // Cross-Functional Sims
  'influence-challenge': {
    manual: 'https://www.notion.so/abilitie1/Influence-Challenge-Manual-247d492187fc80b29c5ee995ae9f0b86',
    demo: 'https://vimeo.com/1139217053/652e864a39',
    introVideo: 'https://vimeo.com/895039602'
  },
  'enterprise-challenge': {
    manual: 'https://www.notion.so/abilitie1/Enterprise-Executive-Challenge-Manual-206d492187fc80f7bd9ee5d8cb9bb15d',
    learnerVideo: 'https://www.abilitie.com/video/about-enterprise-challenge',
    learnerAccelVideo: 'https://www.abilitie.com/video/about-executing-cross-functional-environments',
    salesTips: 'https://vimeo.com/589401207/103c0f7301'
  },
  'executive-challenge': {
    manual: 'https://www.notion.so/abilitie1/Enterprise-Executive-Challenge-Manual-206d492187fc80f7bd9ee5d8cb9bb15d',
    demo: 'https://vimeo.com/1132580010/5c899f2237',
    learnerVideo: 'https://www.abilitie.com/video/about-enterprise-challenge',
    salesTips: 'https://vimeo.com/589401207/103c0f7301'
  },
  // Team Management Sims
  'management-challenge': {
    manual: 'https://www.notion.so/abilitie1/Management-Director-Challenge-Manual-208d492187fc804cb509c656d28c6cce',
    demo: 'https://vimeo.com/1133365537/f0dcd5c2a8',
    introVideo: 'https://vimeo.com/868126687',
    learnerVideo: 'https://www.abilitie.com/video/about-becoming-an-effective-manager',
    salesTips: 'https://vimeo.com/644577305/130ca1b4ce'
  },
  'director-challenge': {
    manual: 'https://www.notion.so/abilitie1/Management-Director-Challenge-Manual-208d492187fc804cb509c656d28c6cce',
    demoSlides: 'https://docs.google.com/presentation/d/1PyZGmC1L-d3iTckB1qiD1NdqezwFIMdYCHZGE4Bv3hM/edit',
    learnerVideo: 'https://www.abilitie.com/video/about-becoming-an-effective-manager',
    salesTips: 'https://vimeo.com/644577305/130ca1b4ce'
  },
  // AI Cases (shared)
  'ai-cases': {
    manual: 'https://www.notion.so/abilitie1/Arrow-AIC-Manual-299d492187fc80acb885e46020182f44',
    demo: 'https://vimeo.com/1132581966/c4914f9c1a',
    onePager: 'https://drive.google.com/file/d/1EoJpV02SRAVkV1NkwI_anixJBviqYDtY/view'
  },
  // General
  'general': {
    simVideo: 'https://www.abilitie.com/video/about-the-simulation-experience',
    facilitatorTraining: 'https://facilitators.abilitie.com/#/'
  }
};

/* ========== PROGRAM EXPLORER DATA ========== */
const PROGRAMS = [
  /* ---- BA SIMULATIONS ---- */
  { id:"income-challenge", name:"Income Challenge", type:"sim", pillar:"ba", level:"rising", duration:"4–6 hrs", framework:"Levers of Value",
    competencies:["Read and interpret income statements and basic financial statements","Decode the profit model: revenue, cost of sales, gross profit, operating expenses","Conduct breakeven analysis for pricing and cost decisions","Evaluate market opportunities using demand and cost structure data","Analyze profit drivers: pricing, volume, cost structure, and margin","Articulate financial insights using business language","Model basic cash flows and connect financial performance to strategy"],
    mindsets:["Value creation thinking: Every decision creates or destroys value","Tradeoff awareness: Growth, profitability, and risk are always in tension","Financial curiosity: Numbers tell a story that empowers better decisions","Long-term orientation: Short-term wins shouldn\u2019t undermine sustainability","Competitive awareness: Benchmark against market dynamics and competitors"],
    tools:["The Levers of Value: Growth \u00d7 Profitability \u00d7 Risk = Shareholder Value","Income Statement / P&L: Sales \u2192 Cost of Sales \u2192 Gross Profit \u2192 Net Profit","Breakeven Analysis: Fixed costs \u00f7 (Price \u2212 Variable Cost)","Cost Structure Comparison: Built vs. contract facility tradeoffs","Pricing & Volume Strategy: High-volume vs. high-margin positioning","NPV Introduction: Time value of money basics"]},
  { id:"business-challenge", name:"Business Challenge", type:"sim", pillar:"ba", level:"experienced", duration:"6\u20138 hrs", framework:"Levers of Value (Advanced)",
    competencies:["Analyze growth and performance using key financial indicators","Evaluate resource allocation and long-term tradeoffs with data","Project the impact of strategic decisions over multiple periods","Communicate financial recommendations using financial logic","Conduct strategic planning across multiple business units","Interpret income, cash flow, and balance sheet statements","Apply time value of money (NPV) to investment decisions","Manage the complete value creation cycle"],
    mindsets:["Enterprise value lens: Think beyond your silo","Risk as a value lever: De-risking is a powerful way to create value","Cash flow discipline: Profits don\u2019t equal cash","Growth with guardrails: Growth paired with profitability","Strategic patience: Long-term investments create lasting advantage","Expansion judgment: Knowing when to enter new markets"],
    tools:["Levers of Value (Advanced): Growth + Profitability + Risk \u2192 Value","Three Financial Statements and how they interrelate","Net Present Value (NPV): Discounting future cash flows","Cost Structure Analysis: Fixed vs. variable, operational leverage","Cash Flow Modeling: Operations vs. investing vs. financing","Expansion Strategy: Market sizing, R&D thresholds, build vs. contract","Competitive Analysis: Benchmarking pricing, margins, strategy"]},
  { id:"finance-challenge", name:"Finance Challenge", type:"sim", pillar:"ba", level:"executive", duration:"6\u20138 hrs", framework:"ROIC & Capital Efficiency",
    competencies:["Conduct strategic investment analysis using ratio analysis","Calculate and interpret ROIC and its component drivers","Evaluate ROIC vs. cost of capital for value creation","Analyze capital efficiency: capital needed per dollar of revenue","Diagnose enterprise performance using the ROIC tree","Make long-term investment decisions with ambiguous data","Manage working capital for cash flow optimization","Communicate financial strategy to boards and investors"],
    mindsets:["Capital efficiency as discipline: How much capital generates that profit?","Investor perspective: Think like an owner","Sustainable business thinking: Value serves all stakeholders","ROIC > Revenue: Returns relative to invested capital determine value","Risk-adjusted returns: Factor uncertainty into every strategic bet","Financial storytelling: Numbers woven into strategic narrative"],
    tools:["ROIC: NOPAT \u00f7 Invested Capital","The ROIC Tree: Gross Margin, OpEx/Sales, Capital Turnover decomposition","Cost of Capital: Present value, discount rate analysis","ROIC vs. Cost of Capital: Value created when ROIC exceeds cost of capital","Value Driver Framework: Growth + Profitability + Capital Efficiency","Working Capital Management: Receivables, payables, inventory levers","Ratio Analysis: Margins, turnover, expense ratios for benchmarking"]},
  /* ---- CF SIMULATIONS ---- */
  { id:"influence-challenge", name:"Influence Challenge", type:"sim", pillar:"cf", level:"rising", duration:"4\u20138 hrs", framework:"From Idea to Action",
    competencies:["Identify stakeholder interests vs. surface positions","Map stakeholders across internal and external networks","Build alignment through influence without formal authority","Design influence strategy using expressive and receptive tactics","Diagnose power dynamics and leverage reciprocity","Adapt communication to stakeholder preferences","Translate resistance into shared messaging","Build credibility and trust across peer relationships"],
    mindsets:["The Platinum Rule: Influence others as they want to be influenced","Positions vs. interests: Surface deeper needs behind stated wants","Influence as investment: Built over time, not exercised in a moment","Alignment \u2260 Agreement: Shared direction, not unanimous consent","WIIFM: Frame asks in terms of what the other person values","Widen the universe: Look beyond your immediate circle"],
    tools:["From Idea to Action: Interests \u2192 Relationships \u2192 Approach","Positions vs. Interests Analysis: Surfacing deeper motivations","Stakeholder Universe Map: Internal and external mapping","Expressive vs. Receptive Tactics: Tell/Sell/Negotiate/Inspire vs. Inquire/Listen/Empathize/Facilitate","Reciprocity Matrix: Proactive vs. Reactive strategies","Shared Interests Mapping: Venn diagram approach","WIIFM Framework: Framing through the other person\u2019s lens"]},
  { id:"enterprise-challenge", name:"Enterprise Challenge", type:"sim", pillar:"cf", level:"experienced", duration:"6\u20138 hrs", framework:"Decision Making Framework",
    competencies:["Translate strategy into cross-functional action","Make strategic decisions under ambiguity and uncertainty","Communicate and collaborate across functional silos","Identify leadership blind spots affecting execution","Navigate senior stakeholder dynamics","Conduct root cause analysis and assess risk systematically","Design decision-making processes that mitigate bias","Analyze core competencies for strategic positioning"],
    mindsets:["Process over content: HOW you decide (53%) > WHAT (8%) per McKinsey","The Content Trap: Ignoring process leads to underperformance","Bias awareness: Seven types of cognitive and social biases","Enterprise thinking: Function-level optimization sub-optimizes the enterprise","VUCA readiness: Build slack, experiment, delegate, treat failure as learning","Intentional process ownership: Anyone can own the process regardless of hierarchy"],
    tools:["Decision-Making Framework: Define \u2192 Deliberate \u2192 Deliver","Decision Models Spectrum: Sole Decider \u2192 Vote \u2192 Consensus \u2192 Delegate","VUCA Framework: Tailored responses per dimension","Risk Assessment Matrix: Likelihood \u00d7 Impact scoring","Root Cause Analysis (Fishbone Diagram)","Core Competencies Analysis: Five diagnostic questions","Bias Mitigation: Devil\u2019s advocate, role rotation, time-boxing"]},
  { id:"executive-challenge", name:"Executive Challenge", type:"sim", pillar:"cf", level:"executive", duration:"6\u20138 hrs", framework:"Cynefin Framework",
    competencies:["Develop and execute a coherent strategy across multiple functions","Manage cross-functional resource allocation under real constraints","Navigate complex organizational dynamics and information asymmetries","Recognize and mitigate personal and collective leadership blind spots","Respond decisively to VUCA events while maintaining strategic coherence","Build executive-level strategic narratives and board presentations","Manage talent as a strategic asset in a competitive environment","Align departments under unified strategy amid competing KPIs"],
    mindsets:["Cynefin thinking: Different situations demand different decision approaches","Strategy \u2194 Execution loop: Neither is useful without the other","Complex adaptive systems: Probe-sense-respond replaces plan-execute","Process legitimacy: Agreeing on process legitimizes any outcome","Emergent leadership: Stimulate attractors, encourage dissent, monitor emergence","Cross-functional empathy: Every C-suite role sees through a different lens"],
    tools:["Cynefin Framework: Simple \u2192 Complicated \u2192 Complex \u2192 Chaotic","Executive Decision Process: Define \u2192 Deliberate \u2192 Deliver","Bias Recognition Toolkit: Seven types of leadership bias","Structured Decision Roles: Generator, Decider, Facilitator, Timekeeper, Implementer","Executive Storytelling: Purpose \u2192 Audience \u2192 Situation; A/V sync","Expected Value Analysis: Probability-weighted strategic assessment","VUCA Response Strategies: Tailored approaches per dimension"]},
  /* ---- TM SIMULATIONS ---- */
  { id:"management-challenge", name:"Management Challenge", type:"sim", pillar:"tm", level:"rising", duration:"6\u20138 hrs", framework:"Pillars of Trust",
    competencies:["Set clear, explicit expectations collaboratively (Say \u2192 Ask \u2192 Create)","Evaluate both capabilities and confidence levels for each team member","Identify and enable individual motivators for each direct report","Deliver structured feedback using SBI (Situation-Behavior-Impact)","Coach for growth connecting development to individual motivators","Navigate critical and difficult conversations with empathy","Practice active listening and focused presence as a discipline","Balance delivering results with growing capabilities"],
    mindsets:["Trust as foundation: Everything is built on trust","Everyone is different: Invest in understanding each person\u2019s drivers","Coaching over compliance: Engagement > compliance (Daniel Pink)","Make the implicit explicit: Unspoken expectations = unmet expectations","Feedback is a gift: People value self-improvement over self-esteem","Presence is the #1 skill: Ask questions and listen actively every day","Intent vs. Impact: Close the gap between intended and received message"],
    tools:["Pillars of Trust: Set Expectations \u2192 Enable Motivators \u2192 Feedback & Coach \u2192 Be Present","SBI + Intent Framework: Situation \u2192 Behavior \u2192 Impact \u2192 Intent","8 Motivators Model: Achievement, Security, Recognition, Mastery, Companionship, Status, Autonomy, Purpose","Personal Motivators Assessment: Self and team ranking exercise","Conversation Preparation Worksheet: Structured pre-meeting planning","Development Plan Template: Areas \u2192 Commitments \u2192 Action items"]},
  { id:"director-challenge", name:"Director Challenge", type:"sim", pillar:"tm", level:"experienced", duration:"6\u20138 hrs", framework:"Levers of Leadership",
    competencies:["Empower managers to drive performance through people, not around them","Align multiple teams across competing priorities and incentive structures","Build leadership culture and strengthen the talent pipeline","Navigate organizational change with deliberate people decisions","Make tough organizational calls: assess fit holistically, lead with intent","Prioritize and delegate across a portfolio of initiatives","Diagnose and develop managers with varying growth areas","Select and develop successors for organizational bench strength"],
    mindsets:["Force multiplier: Multiply the capability of your leaders","Leader-of-leaders identity: Managing managers is fundamentally different","First Team thinking: Your peer group is your first team","Enterprise over function: Optimizing your dept at org\u2019s expense is failure","Culture is a lever: Intentionally shaped to drive results","Change as leadership: Led with intent, empathy, and conviction"],
    tools:["Levers of Leadership: Results Multiplier + Culture Multiplier + Alignment Multiplier","Blake Mouton Grid: Concern for Results vs. Concern for People","First Team Concept: Prioritizing peer leadership alignment","Manager Development Profiles: Distinct archetypes and growth areas","Change Leadership Model: Assess \u2192 Communicate \u2192 Manage resistance \u2192 Sustain","Successor Planning: Identifying, developing, selecting next-gen leaders","Initiative Portfolio Management: Must-do, steady-state, and innovation bets"]},
  /* ---- BA CASE CHALLENGES ---- */
  { id:"analyzing-profit-drivers", name:"Analyzing Profit Drivers", type:"case", pillar:"ba", level:"rising", duration:"2 hrs", framework:"Levers of Value",
    competencies:["Review financial statements to understand business performance","Decode the profit model of a business","Identify the key drivers of profitability","Communicate financial insights clearly to stakeholders"],
    mindsets:["Curiosity about numbers: Financial statements tell a story worth understanding","Every role impacts profit: Regardless of function, your decisions affect the bottom line","Data over instinct: Grounding recommendations in financial evidence builds credibility"],
    tools:["Income Statement Analysis: Revenue, COGS, Gross Profit, Operating Expenses, Net Income","Profit Driver Identification: Parsing which levers most impact profitability","Financial Communication: Translating numbers into actionable business language"]},
  { id:"managing-profitability", name:"Managing Profitability", type:"case", pillar:"ba", level:"rising", duration:"2 hrs", framework:"Levers of Value",
    competencies:["Evaluate opportunities holistically considering market demand and cost structures","Analyze the financial impact of strategic choices","Defend strategic recommendations with financial logic","Balance short-term profitability with long-term positioning"],
    mindsets:["Holistic evaluation: Every opportunity has revenue potential AND cost implications","Strategic ownership: Even non-financial managers should own the P&L impact of their decisions","Defend with data: Strong recommendations are backed by financial reasoning, not opinion"],
    tools:["Cost-Volume-Profit Analysis: Understanding how changes in volume, price, and costs affect profit","Market Demand Assessment: Evaluating customer demand against cost of delivery","Strategic Recommendation Framework: Structuring and defending business cases"]},
  { id:"balancing-growth-risk", name:"Balancing Growth & Risk", type:"case", pillar:"ba", level:"experienced", duration:"2 hrs", framework:"NPV & Cash Flow Modeling",
    competencies:["Model cash flows over time to evaluate strategic options","Apply time value of money to long-term investment decisions","Connect financial analysis to strategic decision-making","Evaluate the tradeoffs between growth opportunities and risk exposure"],
    mindsets:["Time value awareness: A dollar today is worth more than a dollar tomorrow","Growth is not free: Every growth initiative carries risk and capital cost","Finance as strategy: Financial modeling is a strategic tool, not just an accounting exercise"],
    tools:["Cash Flow Modeling: Projecting cash inflows and outflows over multiple periods","Net Present Value (NPV): Discounting future cash flows to evaluate investment viability","Risk-Return Tradeoff Analysis: Mapping growth potential against risk exposure","Scenario Planning: Modeling best-case, base-case, and worst-case outcomes"]},
  /* ---- CF CASE CHALLENGES ---- */
  { id:"shifting-mindsets", name:"Shifting Mindsets & Behaviors", type:"case", pillar:"cf", level:"rising", duration:"2 hrs", framework:"From Idea to Action",
    competencies:["Identify stakeholder interests and what drives their positions","Build alignment through influence by connecting to shared goals","Translate stakeholder concerns into shared messaging","Navigate resistance by reframing conversations around mutual benefit"],
    mindsets:["Empathy first: Understanding why someone holds a position is more important than debating the position itself","Reframing as a skill: Resistance often dissolves when concerns are acknowledged and reframed","Shared language: Alignment happens faster when you speak to shared interests, not competing agendas"],
    tools:["Stakeholder Interest Mapping: Identifying underlying motivations behind stated positions","Reframing Techniques: Turning objections into shared opportunities","Influence Through Alignment: Connecting your ask to what the stakeholder already values","Shared Messaging Template: Crafting language that resonates across perspectives"]},
  { id:"influencing-without-authority", name:"Influencing Without Authority", type:"case", pillar:"cf", level:"rising", duration:"2 hrs", framework:"From Idea to Action",
    competencies:["Diagnose power dynamics in complex stakeholder environments","Map stakeholders strategically to identify influence pathways","Design an influence strategy that doesn\u2019t rely on hierarchy","Practice reciprocity tactics to advance ideas"],
    mindsets:["Authority is overrated: The most effective influencers rarely rely on positional power","Reciprocity is currency: Giving before asking builds the trust needed to influence","Strategic patience: Influence campaigns play out over time, not in a single conversation"],
    tools:["Power Dynamics Analysis: Mapping formal and informal influence in an organization","Stakeholder Strategy Map: Identifying allies, blockers, and swing stakeholders","Influence Strategy Canvas: Planning approach, timing, and tactics","Reciprocity Playbook: Proactive and reactive reciprocity techniques"]},
  { id:"creating-strategic-alignment", name:"Creating Strategic Alignment", type:"case", pillar:"cf", level:"experienced", duration:"2 hrs", framework:"Decision Making Framework",
    competencies:["Assess strategic fit between opportunities and organizational capabilities","Navigate senior stakeholder dynamics with competing priorities","Recommend a clear path forward with cross-functional buy-in","Analyze core competencies to guide strategic positioning"],
    mindsets:["Alignment is a process: It requires deliberate effort, not just good intentions","Strategic fit matters: Not every opportunity is the right opportunity","First Team orientation: Align with peers before cascading to your teams"],
    tools:["Strategic Fit Assessment: Evaluating opportunities against core competencies","Stakeholder Alignment Map: Identifying where alignment exists and where gaps remain","Cross-Functional Decision Framework: Structuring recommendations for enterprise buy-in","Core Competencies Diagnostic: Five questions to evaluate strategic positioning"]},
  /* ---- TM CASE CHALLENGES ---- */
  { id:"enabling-peak-performance", name:"Enabling Peak Performance", type:"case", pillar:"tm", level:"rising", duration:"2 hrs", framework:"Pillars of Trust",
    competencies:["Set clear expectations that build trust, alignment, and accountability","Deliver effective feedback using the SBI framework","Coach for growth by connecting feedback to individual motivators","Create a safe space for honest, productive conversations"],
    mindsets:["Expectations are a two-way street: Setting expectations is collaborative, not directive","Feedback builds trust: Avoiding hard conversations erodes trust faster than having them","Growth mindset in coaching: Every person can develop if given the right support and clarity"],
    tools:["Expectation Setting Framework: Say \u2192 Ask \u2192 Create","SBI Feedback Model: Situation \u2192 Behavior \u2192 Impact","Motivator-Linked Coaching: Tying development to what drives the individual","Performance-Trust Matrix: Mapping where each team member stands"]},
  { id:"navigating-critical-conversations", name:"Navigating Critical Conversations", type:"case", pillar:"tm", level:"rising", duration:"2 hrs", framework:"Pillars of Trust",
    competencies:["Guide difficult development conversations under pressure","Communicate clearly and empathetically in high-stakes situations","Rebuild alignment and trust after performance issues or conflict","Prepare for and structure critical conversations deliberately"],
    mindsets:["Preparation prevents escalation: The best critical conversations are thoroughly planned","Intent \u2260 impact: Understanding the gap between your intent and their experience is the key","Follow-through is everything: A single conversation means nothing without consistent follow-up"],
    tools:["Conversation Preparation Worksheet: Motivators, intent, structure, desired outcomes","SBI + Intent Model: Adding intent exploration to the feedback framework","Active Listening Techniques: Paraphrasing, clarifying, and reflecting back","Follow-Up Protocol: Next steps, timelines, and accountability commitments"]},
  { id:"leading-in-times-of-change", name:"Leading in Times of Change", type:"case", pillar:"tm", level:"experienced", duration:"2 hrs", framework:"Levers of Leadership",
    competencies:["Make tough organizational calls with conviction and empathy","Assess organizational and individual fit holistically during transitions","Lead change with intent, not just reaction","Navigate resistance and uncertainty while maintaining team morale"],
    mindsets:["Change is leadership: You don\u2019t manage change \u2014 you lead it","Tough calls build trust: Avoiding hard decisions erodes credibility faster than making them","Empathy and conviction coexist: You can be direct AND compassionate simultaneously"],
    tools:["Change Leadership Model: Assess \u2192 Communicate \u2192 Manage resistance \u2192 Sustain","Organizational Fit Assessment: Holistic evaluation of people, roles, and readiness","Resistance Mapping: Identifying sources and patterns of resistance to change","Communication Planning: Structuring change messages for clarity and impact"]},
  /* ---- TM AI CASES ---- */
  /* TM - Kickoff */
  { id:"ai-get-the-message", name:"Get the Message?", type:"ai-case", pillar:"tm", level:"rising", duration:"15\u201320 min", subcategory:"Kickoff",
    modality:"Ending Options",
    options:["Create a communications policy for the team","Discuss at team meeting","Let the situation evolve naturally","Advise Jamie on your own plan"],
    rubric:[
      {category:"Diagnosing the Problem", points:30, criteria:["Ask clarifying questions to fully understand the surface-level issue Jamie presented (20 pts)","Help Jamie to reflect on their goals as a manager (10 pts)"]},
      {category:"Balancing Perspectives", points:30, criteria:["Demonstrate awareness of the various factors Jamie is trying to balance (20 pts)","Explore trade-offs between productivity, team morale, and individual autonomy (10 pts)"]},
      {category:"Exploring Solutions", points:40, criteria:["Offer suggestions to help address the problem as complications were revealed (20 pts)","Ask questions to help Jamie think through the leadership challenge (20 pts)"]}
    ]},
  /* TM - Enabling Peak Performance */
  { id:"ai-close-the-door", name:"Close the Door. Have a Seat.", type:"ai-case", pillar:"tm", level:"rising", duration:"15\u201320 min", subcategory:"Enabling Peak Performance",
    modality:"Starting Options",
    options:["Approach John informally","Approach John after a team meeting","Set a formal meeting"],
    rubric:[
      {category:"Specificity of Feedback", points:25, criteria:["Cite the specific examples of John failing to engage the audience and cutting off their questions (25 pts)"]},
      {category:"Communicating the Impact on the Team", points:25, criteria:["Clearly state the potential negative impact of John\u2019s behavior on other team members (20 pts)","Highlight the importance of fully listening rather than interrupting others (5 pts)"]},
      {category:"Communicating the Impact on Career Advancement", points:30, criteria:["Discuss how the ability to present engagingly is vital for leadership roles (20 pts)","Connect openness to questions and concerns with potential for career advancement (10 pts)"]},
      {category:"Overcoming Barriers and Maintaining Trust", points:20, criteria:["Use constructive, non-confrontational language (10 pts)","Specifically ask John to share his perspective (5 pts)","End the conversation on a positive, encouraging note (5 pts)"]}
    ]},
  { id:"ai-slippery-slope", name:"It\u2019s a Slippery Slope.", type:"ai-case", pillar:"tm", level:"rising", duration:"15\u201320 min", subcategory:"Enabling Peak Performance",
    modality:"Ending Options",
    options:["Send Peter with clear expectations","Say no to the conference","Transition Peter\u2019s key clients","Suggest a formal intervention"],
    rubric:[
      {category:"Facilitating Self-Reflection", points:25, criteria:["Guide Peter to recognize the pattern in his own behavior (15 pts)","Ask probing questions rather than making accusations (10 pts)"]},
      {category:"Brainstorming Solutions", points:30, criteria:["Explore multiple options for addressing the situation (15 pts)","Involve Peter in generating solutions (15 pts)"]},
      {category:"Committing to a Path Forward", points:30, criteria:["Establish clear next steps and accountability measures (15 pts)","Ensure mutual agreement on the plan (15 pts)"]},
      {category:"Addressing Humor and Distractions", points:15, criteria:["Redirect when Peter uses humor to deflect (10 pts)","Keep the conversation focused on the core issue (5 pts)"]}
    ]},
  { id:"ai-welcome-aboard", name:"Welcome Aboard!", type:"ai-case", pillar:"tm", level:"rising", duration:"15\u201320 min", subcategory:"Enabling Peak Performance",
    modality:"Ending Options",
    options:["Work on the project together","Have Kim just be an observer","Set up weekly check-ins","Ask Kim to create a draft"],
    rubric:[
      {category:"Clarity of Project Goals", points:60, criteria:["Clearly articulate specific objectives and deliverables (15 pts)","Provide context on how the project aligns with team/company goals (15 pts)","Outline the timeline for completion including milestones (15 pts)","Clearly define how success will be measured (15 pts)"]},
      {category:"Building Employee Confidence and Trust", points:40, criteria:["Express confidence in Kim\u2019s abilities (10 pts)","Offer personal support to bolster confidence (5 pts)","Give Kim opportunity to share concerns or questions (15 pts)","Address Kim\u2019s questions and concerns appropriately (10 pts)"]}
    ]},
  /* TM - Navigating Critical Conversations */
  { id:"ai-good-news", name:"I\u2019ve Got Good News!", type:"ai-case", pillar:"tm", level:"rising", duration:"15\u201320 min", subcategory:"Navigating Critical Conversations",
    modality:"Ending Options",
    options:["Nominate Tanya for GTE","Lead Community Impact","Knowledge Management Project"],
    rubric:[
      {category:"Understanding Employee\u2019s Motivation", points:30, criteria:["Ask open-ended questions to explore Tanya\u2019s concerns about opportunities (10 pts)","Ask open-ended questions to explore motivations, career goals and aspirations (20 pts)"]},
      {category:"Demonstrating Empathy", points:25, criteria:["Express empathy towards Tanya\u2019s feelings and apprehensions (10 pts)","Use reflective listening to demonstrate understanding of Tanya\u2019s perspective (15 pts)"]},
      {category:"Aligning Tasks with Motivators", points:45, criteria:["Present ways opportunities align with Tanya\u2019s motivators and goals (20 pts)","Ask Tanya for input on growth opportunities that appeal to her (15 pts)","Express commitment to continued support and open communication (10 pts)"]}
    ]},
  { id:"ai-blindsided", name:"Blindsided.", type:"ai-case", pillar:"tm", level:"rising", duration:"15\u201320 min", subcategory:"Navigating Critical Conversations",
    modality:"Ending Options",
    options:["Tell Jennifer moving on is best","Craft a more engaging role","Offer 10% pay increase","Offer executive coach opportunity"],
    rubric:[
      {category:"Exploring Motivations", points:40, criteria:["Ask open-ended questions to understand underlying factors (5 pts per question, max 20 pts)","Ask deeper questions to uncover Jennifer\u2019s motivations (5 pts per question, max 20 pts)"]},
      {category:"Identifying Changes to Improve Engagement", points:30, criteria:["Seek Jennifer\u2019s input on aspects she finds lacking or dissatisfying (10 pts)","Appear open to discuss potential changes to improve engagement (10 pts)","Explore growth, development, or advancement opportunities (10 pts)"]},
      {category:"Building Trust and Rapport", points:30, criteria:["Rephrase and validate what Jennifer shared (10 pts)","Ask powerful questions to surface deeper motivations (10 pts)","Demonstrate genuine concern for Jennifer\u2019s well-being (10 pts)"]}
    ]},
  { id:"ai-why-not-me", name:"Why Not Me?", type:"ai-case", pillar:"tm", level:"rising", duration:"15\u201320 min", subcategory:"Navigating Critical Conversations",
    modality:"Ending Options",
    options:["Make Dante aware of Karl\u2019s concerns","Set up periodic check-ins","Let Dante handle things from here","Prepare for disruption"],
    rubric:[
      {category:"Acknowledging Karl\u2019s Feelings", points:10, criteria:["Validate Karl\u2019s feelings of frustration about being passed over (5 pts)","Express empathy and understanding towards Karl\u2019s situation (5 pts)"]},
      {category:"Clarifying Expectations and Performance Criteria", points:70, criteria:["Provide clarity on the promotion process and criteria (20 pts)","Offer specific feedback highlighting strengths and areas for improvement (20 pts)","Discuss actionable steps to enhance skills for future opportunities (15 pts)","Provide reassurance and encouragement, emphasizing value to team (15 pts)"]},
      {category:"Mitigating Potential Conflict with New Manager", points:20, criteria:["Encourage open communication and collaboration with Dante (10 pts)","Offer strategies for navigating the transition positively (10 pts)"]}
    ]},
  /* ---- CF AI CASES ---- */
  /* CF - Kickoff */
  { id:"ai-hold-the-line", name:"Hold The Line?", type:"ai-case", pillar:"cf", level:"rising", duration:"15\u201320 min", subcategory:"Kickoff",
    modality:"Ending Options",
    options:["Change your Plan","Champion your own plan"],
    rubric:[
      {category:"Relationship Building and Trust", points:40, criteria:["Demonstrate understanding of Bill\u2019s perspective and concerns (10 pts)","Acknowledge Bill\u2019s ideas and show respect for his experience (10 pts)","Position yourself as a credible, long-term reciprocal partner (20 pts)"]},
      {category:"Aligning with Bill\u2019s Priorities", points:20, criteria:["Align approach with Bill\u2019s priorities: productivity, retention, efficiency, bottom line (20 pts)"]},
      {category:"Persuasive Communication", points:40, criteria:["Communicate discussion intent directly and clearly (20 pts)","Outline comprehensive wellness program with supporting rationale (10 pts)","Frame change as a business imperative (10 pts)"]}
    ]},
  /* CF - Shifting Mindsets */
  { id:"ai-change-will-do-you-good", name:"A Change Will Do You Good.", type:"ai-case", pillar:"cf", level:"rising", duration:"15\u201320 min", subcategory:"Shifting Mindsets",
    modality:"Ending Options",
    options:["Ask for Marcela\u2019s feedback","Give Marcela time to acclimate","Have Marcela train the team","Remove Marcela from your team"],
    rubric:[
      {category:"Understanding the Source of Resistance", points:20, criteria:["Ask probing questions to uncover underlying factors driving resistance (15 pts)","Demonstrate empathy towards Marcela\u2019s apprehensions about the change (5 pts)"]},
      {category:"Articulating Benefits of Change", points:50, criteria:["Clearly outline how the change will benefit Marcela\u2019s role and responsibilities (25 pts)","Emphasize specific ways the change contributes to professional growth (25 pts)"]},
      {category:"Overcoming Sarcasm and Cynicism", points:30, criteria:["Maintain calm and composed demeanor despite sarcastic remarks (15 pts)","Use humor or lightheartedness to disarm cynicism (5 pts)","Address sarcasm directly but tactfully, steering back to productive dialogue (10 pts)"]}
    ]},
  { id:"ai-not-here-to-make-friends", name:"I\u2019m Not Here To Make Friends.", type:"ai-case", pillar:"cf", level:"rising", duration:"15\u201320 min", subcategory:"Shifting Mindsets",
    modality:"Starting Options",
    options:["\u201cLet me share some feedback...\u201d","\u201cLet Me Tell You How Great You Are...\u201d"],
    rubric:[
      {category:"Understanding Employee\u2019s Motivation", points:25, criteria:["Ask open-ended questions to explore Blaine\u2019s core motivators (10 pts)","Explore circumstances behind Blaine\u2019s motivators (5 pts)","Demonstrate genuine interest in understanding Blaine\u2019s perspective (10 pts)"]},
      {category:"Demonstrating Empathy", points:10, criteria:["Express empathy towards Blaine\u2019s rationale (5 pts)","Convey understanding of Blaine\u2019s current situation (5 pts)"]},
      {category:"Tying Desired Behaviors to Core Motivators", points:65, criteria:["Explain how collaboration helps Blaine reach higher achievement and status (25 pts)","Explain how poor behavior risks damaging achievement and status (25 pts)","Address feedback from Product (5 pts)","Address feedback from Deal Desk (5 pts)","Address feedback from Sales Associate (5 pts)"]}
    ]},
  { id:"ai-spread-your-wings", name:"Spread Your Wings and Fly.", type:"ai-case", pillar:"cf", level:"rising", duration:"15\u201320 min", subcategory:"Shifting Mindsets",
    modality:"Ending Options",
    options:["Stay active in Marcus\u2019s decision-making","Gradually delegate more","Challenge Marcus to take more ownership","Ask if he wants his old role"],
    rubric:[
      {category:"Building Confidence in Decision-Making", points:25, criteria:["Acknowledge Marcus\u2019s past successes and capabilities (5 pts)","Ask Marcus to reflect on what drives his lack of confidence (5 pts)","Challenge Marcus to question negative thoughts about readiness (15 pts)"]},
      {category:"Empowering Marcus to Handle Issues Independently", points:60, criteria:["Communicate importance of taking ownership of decisions (15 pts)","Provide guidance on when to involve manager vs. handle alone (10 pts)","Specify he was right to include manager in budget decision (10 pts)","Specify he should decide on Susan\u2019s PTO on his own (5 pts)","Specify he should discuss Rick\u2019s pay increase rationale himself (10 pts)","Offer support and encouragement, emphasizing capabilities (5 pts)","Encourage brainstorming solutions to common issues (5 pts)"]},
      {category:"Building Trust and Rapport", points:15, criteria:["Use supportive, non-judgmental language (5 pts)","Acknowledge concerns without dismissing them (5 pts)","End on a positive note expressing confidence in Marcus (5 pts)"]}
    ]},
  /* CF - Influencing Without Authority */
  { id:"ai-fault-line", name:"The Fault Line.", type:"ai-case", pillar:"cf", level:"rising", duration:"15\u201320 min", subcategory:"Influencing Without Authority",
    modality:"Ending Options",
    options:["Follow up with Sam to gain buy-in","No follow-up is necessary","Invite Sam to help create a plan","Inform leadership about Sam\u2019s resistance"],
    rubric:[
      {category:"Surfacing Deeper Interests", points:25, criteria:["Ask questions to understand reasons for Sam\u2019s opposition (5 pts)","Validate Sam\u2019s perspective (5 pts)","Uncover Sam\u2019s deeper interest in preserving company culture (15 pts)"]},
      {category:"Articulating Shared Interest in Culture Preservation", points:20, criteria:["State own commitment to preserving company culture (10 pts)","Emphasize importance of culture to company success or personally (10 pts)"]},
      {category:"Aligning Benefits of Merger with Shared Interests", points:35, criteria:["Explain how the merger can support culture preservation (20 pts)","Provide concrete examples or plans for maintaining culture post-merger (15 pts)"]},
      {category:"Shifting Sam\u2019s Stance", points:20, criteria:["Sam indicates willingness to rethink attitude toward the merger (20 pts)"]}
    ]},
  { id:"ai-not-convinced", name:"I\u2019m Not Convinced.", type:"ai-case", pillar:"cf", level:"rising", duration:"15\u201320 min", subcategory:"Influencing Without Authority",
    modality:"Ending Options",
    options:["Proceed confidently","Follow up with Grace on her concerns","Seek support elsewhere"],
    rubric:[
      {category:"Establishing Credibility and Trust", points:10, criteria:["Demonstrate honesty and transparency in communication (5 pts)","Show interest in collaborative discussion rather than just asking for support (5 pts)"]},
      {category:"Using Expressive Influence Techniques", points:35, criteria:["Clearly articulate project significance and potential impact (10 pts)","Highlight how supporting project aligns with Grace\u2019s goals (10 pts)","Provide concrete examples or evidence of project benefits (15 pts)"]},
      {category:"Using Receptive Influence Techniques", points:35, criteria:["Demonstrate interest in Grace\u2019s perspective (15 pts)","Listen to concerns and address them effectively (10 pts)","Offer solutions or compromises to mitigate concerns (10 pts)"]},
      {category:"Overall Outcome", points:20, criteria:["Grace agrees to support the project (20 pts)"]}
    ]},
  { id:"ai-scope-springs-eternal", name:"Scope Springs Eternal.", type:"ai-case", pillar:"cf", level:"rising", duration:"15\u201320 min", subcategory:"Influencing Without Authority",
    modality:"Starting Options",
    options:["\u201cWe\u2019ve Got a Skills Gap...\u201d","\u201cCan we talk about Bonnie\u2019s request?\u201d","Bring up both issues","\u201cFirst, the Good News...\u201d"],
    rubric:[
      {category:"Solution-Focused Communication", points:25, criteria:["Present own ideas for solving challenges without being prompted (15 pts)","Demonstrate flexibility in exploring alternatives (5 pts)","Focus on solutions rather than obstacles (5 pts)"]},
      {category:"Managing Expectations", points:25, criteria:["Clearly explain impact of challenges on project timeline and quality (15 pts)","Anticipate potential concerns or objections from Mei (5 pts)","Engage in discussion on proactive strategies and contingency plans (5 pts)"]},
      {category:"Effective Communication", points:10, criteria:["Use clear and concise language tying project success to organizational goals (5 pts)","Address challenges constructively rather than complaining (5 pts)"]},
      {category:"Securing Mei\u2019s Support", points:40, criteria:["Mei supports solution to address the skill gap (20 pts)","Mei supports solution to Bonnie\u2019s AI feature request (20 pts)"]}
    ]},
  /* ---- TALENT SELECTION AI CASES ---- */
  { id:"ai-good-enough", name:"Is Good Enough... Enough?", type:"ai-case", pillar:"ts", level:"rising", duration:"15\u201320 min", subcategory:"Talent Selection",
    modality:"Ending Options",
    options:["Hire Emma","Hire Liam","Leave the role open"],
    rubric:[
      {category:"Objective Decision-Making", points:30, criteria:["Consider unconscious biases in candidate evaluation (20 pts)","Challenge assumptions about what constitutes an \u2018ideal\u2019 candidate (10 pts)"]},
      {category:"Talent Selection & Strategic Fit", points:30, criteria:["Evaluate how each candidate aligns with team and organizational goals (15 pts)","Consider both short-term performance needs and long-term development (15 pts)"]},
      {category:"Impact on Team Performance & Culture", points:30, criteria:["Think beyond this hire to consider impact on morale, collaboration, and culture (10 pts)","Discuss strategies for onboarding and supporting the new hire (10 pts)","Think about how this hire fosters growth, engagement, diversity and innovation (10 pts)"]}
    ]},
  { id:"ai-secret-ingredient", name:"The Secret Ingredient.", type:"ai-case", pillar:"ts", level:"rising", duration:"15\u201320 min", subcategory:"Talent Selection",
    modality:"Ending Options",
    options:["Hire Daniel","Hire Aditi","Hire Mateus"],
    rubric:[
      {category:"Managing Today for Tomorrow", points:50, criteria:["Address balancing short-term needs against building a sustainable Insights function (25 pts)","Discuss tradeoffs of hiring one candidate versus the others (25 pts)"]},
      {category:"Growth Mindset", points:30, criteria:["Consider which candidate promotes curiosity, adaptability, and continuous learning (10 pts)","Explore which candidate cultivates a culture of experimentation and iteration (10 pts)","Assess which candidate strengthens team through diverse skills and perspectives (10 pts)"]},
      {category:"Positioning for High Performance Teams", points:20, criteria:["Think beyond the hire to attracting, integrating, and developing talent (10 pts)","Address how company can position itself as employer of choice for external talent (10 pts)"]}
    ]},
  /* ---- BA COURSES (FLUENT IN FINANCE) ---- */
  { id:"fif-business-basics", name:"FiF Ch. 1-2: Back to Business Basics", type:"course", pillar:"ba", level:"rising", duration:"1–2 hrs", framework:"Unit Economics",
    competencies:["Understand unit economics and how individual transactions drive business profitability","Calculate and interpret breakeven points for business decisions","Distinguish between fixed and variable costs in cost structures","Apply cost accounting principles to allocate costs appropriately","Analyze contribution margin and its impact on profitability","Evaluate pricing decisions using unit-level financial analysis"],
    mindsets:["Unit-level thinking: Every transaction either creates or destroys value","Cost consciousness: Understanding cost behavior is foundational to good decisions","Breakeven awareness: Knowing your breakeven point informs pricing, volume, and investment decisions","Simplify to understand: Complex business models can be broken into understandable units"],
    tools:["Unit Economics Model: Revenue per unit − Variable cost per unit = Contribution margin","Breakeven Analysis: Fixed Costs ÷ Contribution Margin = Breakeven Volume","Cost Classification: Fixed vs. Variable, Direct vs. Indirect","Cost Accounting Methods: Job costing, process costing, activity-based costing","Contribution Margin Analysis: Evaluating product and service profitability"]},
  { id:"fif-financial-statements", name:"FiF Ch. 3: Reading Financial Statements", type:"course", pillar:"ba", level:"rising", duration:"2–3 hrs", framework:"Three Financial Statements",
    competencies:["Distinguish between cash-based and accrual accounting methods","Read and interpret income statements to assess profitability","Analyze balance sheets to understand financial position and leverage","Interpret cash flow statements to evaluate liquidity and cash generation","Understand how depreciation affects financial statements","Connect the three financial statements to see the complete financial picture"],
    mindsets:["Accrual thinking: Revenue and expenses are recognized when earned/incurred, not when cash moves","Balance sheet awareness: Assets = Liabilities + Equity tells the ownership story","Cash is king: Profits don't equal cash — cash flow tells the survival story","Holistic financial view: The three statements together tell the complete story"],
    tools:["Income Statement Structure: Revenue → COGS → Gross Profit → Operating Expenses → Net Income","Balance Sheet Framework: Assets = Liabilities + Shareholders' Equity","Cash Flow Statement: Operating Activities + Investing Activities + Financing Activities","Depreciation Methods: Straight-line, declining balance, and their P&L/cash impacts","Financial Statement Linkages: How changes flow between the three statements","Terminology Decoder: EBITDA, Working Capital, Retained Earnings, Accounts Receivable/Payable"]},
  { id:"fif-business-idea-to-budget", name:"FiF Ch. 4: From Business Idea to Budget", type:"course", pillar:"ba", level:"rising", duration:"2–3 hrs", framework:"Financial Modeling & Time Value of Money",
    competencies:["Build basic financial models to project business performance","Create cash flow projections in spreadsheet tools","Apply the time value of money concept to evaluate future cash flows","Assess risk and its impact on the value of future cash flows","Understand the cost of capital and its role in investment decisions","Calculate present value to compare cash flows across different time periods"],
    mindsets:["Future dollars are worth less: Time value of money is fundamental to all financial decisions","Risk requires return: Higher risk demands higher expected returns","Model to learn: Financial models are thinking tools, not crystal balls","Opportunity cost awareness: Capital has alternative uses that define its cost"],
    tools:["Financial Model Framework: Assumptions → Projections → Outputs","Cash Flow Projection Template: Period-by-period cash inflows and outflows","Time Value of Money: PV = FV ÷ (1 + r)^n","Risk-Return Relationship: Higher uncertainty = higher required discount rate","Cost of Capital Calculation: Weighted average of debt and equity costs (WACC)","Present Value Formula: Discounting future cash flows to today's dollars"]},
  { id:"fif-dcf-analysis", name:"FiF Ch. 5-6: Discounted Cash Flow Analysis", type:"course", pillar:"ba", level:"rising", duration:"2–3 hrs", framework:"NPV & IRR",
    competencies:["Calculate and interpret the payback period for investment decisions","Compute Net Present Value (NPV) to evaluate project viability","Calculate Internal Rate of Return (IRR) and compare to cost of capital","Perform NPV and IRR analysis using spreadsheet functions","Apply DCF analysis to real business investment decisions","Communicate investment recommendations from an executive perspective"],
    mindsets:["NPV is the gold standard: Positive NPV means value creation","IRR context matters: IRR must exceed cost of capital to create value","Payback has limits: Simple but ignores time value and cash flows beyond payback","Executive framing: Financial analysis must connect to strategic priorities"],
    tools:["Payback Period: Time to recover initial investment","NPV Formula: Sum of discounted cash flows minus initial investment","IRR Calculation: Discount rate that makes NPV equal to zero","NPV Function in Excel: =NPV(rate, cash flows) + initial investment","IRR Function in Excel: =IRR(cash flows)","Investment Decision Rules: Accept if NPV > 0 or IRR > Cost of Capital"]}
];

/* ========== RENDER PROGRAM CARDS ========== */
const pillarLabels = { ba: "Business Acumen", cf: "Cross-Functional", tm: "Team Management", ts: "Talent Selection" };
const levelLabels = { rising: "Rising Leader", experienced: "Experienced Leader", executive: "Executive Leader" };
const accentClass = { ba: "ba-accent", cf: "cf-accent", tm: "tm-accent", ts: "ts-accent" };

function renderPrograms() {
  const gridSims = document.getElementById("grid-sims");
  const gridCases = document.getElementById("grid-cases");
  const gridAsync = document.getElementById("grid-async");

  gridSims.innerHTML = "";
  gridCases.innerHTML = "";
  gridAsync.innerHTML = "";

  const searchTerm = (document.getElementById("session-search")?.value || "").toLowerCase();

  let countSims = 0, countCases = 0, countAsync = 0;

  PROGRAMS.forEach(p => {
    // Search filter
    if (searchTerm) {
      const searchFields = [
        p.name,
        p.framework || '',
        ...(p.competencies || []),
        ...(p.mindsets || []),
        ...(p.tools || [])
      ].join(' ').toLowerCase();
      if (!searchFields.includes(searchTerm)) {
        return; // Skip this program
      }
    }

    const card = document.createElement("div");
    card.className = `prog-card ${p.pillar}-prog`;
    card.dataset.type = p.type;
    card.dataset.pillar = p.pillar;
    card.dataset.level = p.level;
    card.id = "prog-" + p.id;
    card.onclick = () => toggleProgCard(p.id);

    const listHtml = (items) => items.map(i => {
      const ci = i.indexOf(":");
      if (ci > 0 && ci < 50) return `<li><strong>${i.substring(0,ci+1)}</strong>${i.substring(ci+1)}</li>`;
      return `<li>${i}</li>`;
    }).join("");

    let detailInner;
    if (p.rubric) {
      // AI Case rendering - include shared AI case links
      const aiLinks = DOC_LINKS['ai-cases'] || {};
      let aiDocLinksHtml = '';
      const aiLinkItems = [];
      if (aiLinks.manual) aiLinkItems.push(`<a href="${aiLinks.manual}" target="_blank" class="doc-link">📄 AI Cases Manual</a>`);
      if (aiLinks.demo) aiLinkItems.push(`<a href="${aiLinks.demo}" target="_blank" class="doc-link">🎬 Demo</a>`);
      if (aiLinks.onePager) aiLinkItems.push(`<a href="${aiLinks.onePager}" target="_blank" class="doc-link">📋 One-Pager</a>`);
      if (aiLinkItems.length > 0) {
        aiDocLinksHtml = `<div class="prog-doc-links">${aiLinkItems.join('')}</div>`;
      }
      const rubricHtml = p.rubric.map(r => `
        <div class="rubric-category ${accentClass[p.pillar] || 'ts-accent'}">
          <div class="rubric-header"><span class="rubric-cat-name">${r.category}</span><span class="rubric-pts">${r.points} pts</span></div>
          <ul>${r.criteria.map(c => `<li>${c}</li>`).join("")}</ul>
        </div>`).join("");
      detailInner = `
        ${aiDocLinksHtml}
        ${p.subcategory ? `<div style="margin-bottom:12px;"><span class="ai-subcategory">${p.subcategory}</span></div>` : ""}
        <div class="rubric-grid">${rubricHtml}</div>`;
    } else {
      // Original sim/case rendering
      // Build doc links for this program
      const links = DOC_LINKS[p.id] || {};
      let docLinksHtml = '';
      if (Object.keys(links).length > 0) {
        const linkItems = [];
        if (links.manual) linkItems.push(`<a href="${links.manual}" target="_blank" class="doc-link">📄 Manual</a>`);
        if (links.demo) linkItems.push(`<a href="${links.demo}" target="_blank" class="doc-link">🎬 Demo</a>`);
        if (links.demoSlides) linkItems.push(`<a href="${links.demoSlides}" target="_blank" class="doc-link">📊 Demo Slides</a>`);
        if (links.introVideo) linkItems.push(`<a href="${links.introVideo}" target="_blank" class="doc-link">🎥 Intro Video</a>`);
        if (links.learnerVideo) linkItems.push(`<a href="${links.learnerVideo}" target="_blank" class="doc-link">🎓 Learner Video</a>`);
        if (links.learnerAccelVideo) linkItems.push(`<a href="${links.learnerAccelVideo}" target="_blank" class="doc-link">🎓 Accel Video</a>`);
        if (links.salesTips) linkItems.push(`<a href="${links.salesTips}" target="_blank" class="doc-link">💡 Sales Tips</a>`);
        if (linkItems.length > 0) {
          docLinksHtml = `<div class="prog-doc-links">${linkItems.join('')}</div>`;
        }
      }
      detailInner = `
        ${docLinksHtml}
        <div style="margin-bottom:8px;">
          <span class="cell-framework ${p.pillar}" style="font-size:11px;padding:5px 12px;">Key Framework: ${p.framework}</span>
        </div>
        <div class="section-grid">
          <div class="section-block ${accentClass[p.pillar]}"><h4>Competencies</h4><ul>${listHtml(p.competencies)}</ul></div>
          <div class="section-block ${accentClass[p.pillar]}"><h4>Mindsets</h4><ul>${listHtml(p.mindsets)}</ul></div>
          <div class="section-block ${accentClass[p.pillar]}"><h4>Tools &amp; Frameworks</h4><ul>${listHtml(p.tools)}</ul></div>
        </div>`;
    }

    const typeLabel = p.type === "sim" ? "Simulation" : p.type === "case" ? "Case Challenge" : "Async";

    card.innerHTML = `
      <div class="prog-card-top">
        <div class="prog-card-accent ${p.pillar}-bar"></div>
        <div class="prog-card-info">
          <div class="prog-card-name">${p.name}</div>
          <div class="prog-card-meta">
            <span class="prog-meta-tag type-${p.type}">${typeLabel}</span>
            <span class="prog-meta-tag level-tag">${levelLabels[p.level]}</span>
            <span class="prog-meta-tag level-tag">${p.duration}</span>
          </div>
        </div>
        <span class="prog-card-toggle">\u25BE</span>
      </div>
      <div class="prog-detail">
        <div class="prog-detail-inner">
          ${detailInner}
        </div>
      </div>`;

    // Add to appropriate section
    if (p.type === 'sim') {
      gridSims.appendChild(card);
      countSims++;
    } else if (p.type === 'case') {
      gridCases.appendChild(card);
      countCases++;
    } else {
      // AI cases and courses go to Async section
      gridAsync.appendChild(card);
      countAsync++;
    }
  });

  // Update counts
  document.getElementById("count-sims").textContent = `(${countSims})`;
  document.getElementById("count-cases").textContent = `(${countCases})`;
  document.getElementById("count-async").textContent = `(${countAsync})`;

  // Show/hide empty sections
  document.getElementById("section-sims").classList.toggle("empty", countSims === 0);
  document.getElementById("section-cases").classList.toggle("empty", countCases === 0);
  document.getElementById("section-async").classList.toggle("empty", countAsync === 0);

  // Show empty state if all empty
  const emptyEl = document.getElementById("prog-empty");
  emptyEl.style.display = (countSims + countCases + countAsync === 0) ? "block" : "none";

  // Apply pillar/level filters
  applyProgFilters();
}

function toggleSessionSection(section) {
  const el = document.getElementById("section-" + section);
  if (el) el.classList.toggle("collapsed");
}

function filterSessions() {
  renderPrograms();
}

function toggleProgCard(id) {
  const el = document.getElementById("prog-" + id);
  if (el) el.classList.toggle("prog-selected");
}

/* ========== FILTERS ========== */
let activeFilters = { type: "all", pillar: "all", level: "all" };

function toggleProgFilter(category, value, btn) {
  activeFilters[category] = value;
  // Update button states for this category
  const siblings = btn.parentElement.querySelectorAll(`.prog-filter-btn`);
  // Find all buttons in the same category group
  let inGroup = false;
  const allBtns = document.querySelectorAll(".prog-filters .prog-filter-btn");
  const labels = document.querySelectorAll(".prog-filters .prog-filter-label");
  let groupStart = -1;
  let groupEnd = allBtns.length;

  // Find the label before this button to scope the group
  allBtns.forEach((b, i) => {
    if (b === btn) {
      // Walk backward to find the preceding label
      groupStart = i;
    }
  });

  // Simple approach: reset all in same row, then activate clicked
  const filterRow = btn.closest(".prog-filters");
  const categoryBtns = [];
  let foundLabel = false;
  filterRow.childNodes.forEach(node => {
    if (node.classList && node.classList.contains("prog-filter-label")) {
      const txt = node.textContent.trim().toLowerCase();
      foundLabel = (category === "type" && txt.includes("type")) ||
                   (category === "pillar" && txt.includes("pillar")) ||
                   (category === "level" && txt.includes("level"));
      if (foundLabel) categoryBtns.length = 0;
    }
    if (node.classList && node.classList.contains("prog-filter-btn") && foundLabel) {
      categoryBtns.push(node);
    }
    if (node.classList && node.classList.contains("prog-filter-label") && categoryBtns.length > 0 && !foundLabel) {
      // hit next group label, stop
    }
  });

  categoryBtns.forEach(b => b.classList.remove("active-filter"));
  btn.classList.add("active-filter");

  applyFilters();
}

function applyFilters() {
  const cards = document.querySelectorAll(".prog-card");
  let visible = 0;
  let visibleSims = 0, visibleCases = 0, visibleAsync = 0;

  cards.forEach(card => {
    const matchType = activeFilters.type === "all" || card.dataset.type === activeFilters.type;
    const matchPillar = activeFilters.pillar === "all" || card.dataset.pillar === activeFilters.pillar;
    const matchLevel = activeFilters.level === "all" || card.dataset.level === activeFilters.level;
    if (matchType && matchPillar && matchLevel) {
      card.classList.remove("prog-hidden");
      visible++;
      if (card.dataset.type === 'sim') visibleSims++;
      else if (card.dataset.type === 'case') visibleCases++;
      else visibleAsync++;
    } else {
      card.classList.add("prog-hidden");
      card.classList.remove("prog-selected");
    }
  });

  // Update section visibility
  const sectionSims = document.getElementById("section-sims");
  const sectionCases = document.getElementById("section-cases");
  const sectionAsync = document.getElementById("section-async");

  if (sectionSims) sectionSims.classList.toggle("empty", visibleSims === 0);
  if (sectionCases) sectionCases.classList.toggle("empty", visibleCases === 0);
  if (sectionAsync) sectionAsync.classList.toggle("empty", visibleAsync === 0);

  // Update counts to show filtered
  const countSims = document.getElementById("count-sims");
  const countCases = document.getElementById("count-cases");
  const countAsync = document.getElementById("count-async");
  if (countSims) countSims.textContent = `(${visibleSims})`;
  if (countCases) countCases.textContent = `(${visibleCases})`;
  if (countAsync) countAsync.textContent = `(${visibleAsync})`;

  document.getElementById("prog-empty").style.display = visible === 0 ? "block" : "none";
}

// Alias for renderPrograms
function applyProgFilters() {
  applyFilters();
}

// Map framework names to framework IDs (needed before renderPrograms)
function getFrameworkId(frameworkName) {
  const mapping = {
    'Levers of Value': 'levers-of-value',
    'Levers of Value (Advanced)': 'levers-of-value-advanced',
    'ROIC & Capital Efficiency': 'roic-capital-efficiency',
    'NPV & Cash Flow Modeling': 'npv-cash-flow',
    'From Idea to Action': 'from-idea-to-action',
    'Decision Making Framework': 'decision-making',
    'Cynefin Framework': 'cynefin',
    'Pillars of Trust': 'pillars-of-trust',
    'Levers of Leadership': 'levers-of-leadership'
  };
  return mapping[frameworkName] || null;
}

// Initialize
renderPrograms();


// ============ COMPARE PROGRAMS ============
let programA = [];
let programB = [];
let programC = [];

// Preset programs based on Abilitie Portfolio
const PRESETS = {
  'flagship-rising': {
    name: 'Flagship Rising Leader',
    items: ['income-challenge', 'analyzing-profit-drivers', 'managing-profitability',
            'fif-business-basics', 'fif-financial-statements', 'fif-business-idea-to-budget', 'fif-dcf-analysis',
            'influence-challenge', 'shifting-mindsets', 'influencing-without-authority',
            'management-challenge', 'enabling-peak-performance', 'navigating-critical-conversations']
  },
  'flagship-experienced': {
    name: 'Flagship Experienced Leader',
    items: ['business-challenge', 'balancing-growth-risk',
            'fif-business-basics', 'fif-financial-statements', 'fif-business-idea-to-budget', 'fif-dcf-analysis',
            'enterprise-challenge', 'creating-strategic-alignment',
            'director-challenge', 'leading-in-times-of-change']
  },
  'accelerator-income': {
    name: 'Income Accelerator',
    items: ['income-challenge', 'analyzing-profit-drivers', 'managing-profitability',
            'fif-business-basics', 'fif-financial-statements']
  },
  'accelerator-business': {
    name: 'Business Accelerator',
    items: ['business-challenge', 'balancing-growth-risk',
            'fif-business-basics', 'fif-financial-statements', 'fif-business-idea-to-budget', 'fif-dcf-analysis']
  },
  'accelerator-influence': {
    name: 'Influence Accelerator',
    items: ['influence-challenge', 'shifting-mindsets', 'influencing-without-authority']
  },
  'accelerator-enterprise': {
    name: 'Enterprise Accelerator',
    items: ['enterprise-challenge', 'creating-strategic-alignment']
  },
  'accelerator-management': {
    name: 'Management Accelerator',
    items: ['management-challenge', 'enabling-peak-performance', 'navigating-critical-conversations']
  },
  'accelerator-director': {
    name: 'Director Accelerator',
    items: ['director-challenge', 'leading-in-times-of-change']
  }
};

function initCompare() {
  renderProgramColumns();
}

let openDropdown = null;

function toggleInlineDropdown(prog, type, btn, e) {
  if (e) e.stopPropagation();
  const dropdownId = `dropdown-${type}-${prog}`;
  const existing = document.getElementById(dropdownId);

  // Close any open dropdown
  if (openDropdown && openDropdown !== existing) {
    openDropdown.remove();
    openDropdown = null;
  }

  if (existing) {
    existing.remove();
    openDropdown = null;
    return;
  }

  // Create dropdown
  const dropdown = document.createElement('div');
  dropdown.id = dropdownId;
  dropdown.className = 'inline-dropdown';
  dropdown.style.cssText = 'position:absolute;top:100%;left:0;margin-top:4px;background:var(--white);border:1px solid var(--gray-200);border-radius:8px;box-shadow:0 8px 40px rgba(0,0,0,0.12);min-width:200px;max-height:250px;overflow-y:auto;z-index:1000;';

  let items = [];
  if (type === 'program') {
    items = Object.entries(PRESETS).map(([id, preset]) =>
      `<div class="dropdown-item" onclick="loadPreset('${id}', '${prog}')" style="padding:10px 14px;cursor:pointer;border-bottom:1px solid var(--gray-100);font-size:13px;">
        <div style="font-weight:600;color:var(--navy);">${preset.name}</div>
        <div style="font-size:11px;color:var(--gray-500);">${preset.items.length} items</div>
      </div>`
    );
  } else if (type === 'sim') {
    items = PROGRAMS.filter(p => p.type === 'sim').map(p =>
      `<div class="dropdown-item" onclick="addItem('${p.id}', '${prog}')" style="padding:10px 14px;cursor:pointer;border-bottom:1px solid var(--gray-100);font-size:13px;">
        <div style="font-weight:600;color:var(--navy);">${p.name}</div>
        <div style="font-size:11px;color:var(--gray-500);">${p.duration}</div>
      </div>`
    );
  } else if (type === 'case') {
    items = PROGRAMS.filter(p => p.type === 'case').map(p =>
      `<div class="dropdown-item" onclick="addItem('${p.id}', '${prog}')" style="padding:10px 14px;cursor:pointer;border-bottom:1px solid var(--gray-100);font-size:13px;">
        <div style="font-weight:600;color:var(--navy);">${p.name}</div>
        <div style="font-size:11px;color:var(--gray-500);">${p.duration}</div>
      </div>`
    );
  } else if (type === 'async') {
    items = PROGRAMS.filter(p => p.type === 'ai-case').map(p =>
      `<div class="dropdown-item" onclick="addItem('${p.id}', '${prog}')" style="padding:10px 14px;cursor:pointer;border-bottom:1px solid var(--gray-100);font-size:13px;">
        <div style="font-weight:600;color:var(--navy);">${p.name}</div>
        <div style="font-size:11px;color:var(--gray-500);">${p.duration}</div>
      </div>`
    );
  } else if (type === 'course') {
    items = PROGRAMS.filter(p => p.type === 'course').map(p =>
      `<div class="dropdown-item" onclick="addItem('${p.id}', '${prog}')" style="padding:10px 14px;cursor:pointer;border-bottom:1px solid var(--gray-100);font-size:13px;">
        <div style="font-weight:600;color:var(--navy);">${p.name}</div>
        <div style="font-size:11px;color:var(--gray-500);">${p.duration}</div>
      </div>`
    );
  }

  dropdown.innerHTML = items.join('');
  btn.parentElement.style.position = 'relative';
  btn.parentElement.appendChild(dropdown);
  openDropdown = dropdown;
}

// Close dropdowns when clicking outside
document.addEventListener('click', function(e) {
  if (!e.target.closest('.add-inline-btn') && openDropdown) {
    openDropdown.remove();
    openDropdown = null;
  }
});

function toggleProgramC(e) {
  if (e.target.closest('.clear-btn') || e.target.closest('.remove-item') || e.target.closest('.add-inline-btn')) {
    return;
  }
  const col = document.getElementById('program-c');
  col.classList.toggle('expanded');
}

function loadPreset(presetId, targetProg) {
  const preset = PRESETS[presetId];
  if (!preset) return;

  if (targetProg === 'a') {
    programA = [...preset.items];
  } else if (targetProg === 'b') {
    programB = [...preset.items];
  } else {
    programC = [...preset.items];
  }

  if (openDropdown) { openDropdown.remove(); openDropdown = null; }
  renderProgramColumns();
}

function addItem(id, prog) {
  const arr = prog === 'a' ? programA : prog === 'b' ? programB : programC;
  if (!arr.includes(id)) {
    arr.push(id);
    if (openDropdown) { openDropdown.remove(); openDropdown = null; }
    renderProgramColumns();
  }
}

function removeItem(prog, id, e) {
  if (e) e.stopPropagation();
  if (prog === 'a') {
    programA = programA.filter(x => x !== id);
  } else if (prog === 'b') {
    programB = programB.filter(x => x !== id);
  } else {
    programC = programC.filter(x => x !== id);
  }
  renderProgramColumns();
}

function clearProgram(prog) {
  if (prog === 'a') {
    programA = [];
  } else if (prog === 'b') {
    programB = [];
  } else {
    programC = [];
  }
  renderProgramColumns();
}

function renderProgramColumns() {
  renderColumn('a', programA);
  renderColumn('b', programB);
  renderColumn('c', programC);

  // Auto-expand Program C when it has items
  const colC = document.getElementById('program-c');
  if (programC.length > 0) {
    colC.classList.add('expanded');
  }
}

function renderColumn(prog, items) {
  const itemsEl = document.getElementById('program-' + prog + '-items');
  const statsEl = document.getElementById('program-' + prog + '-stats');

  if (!itemsEl) return;

  const pItems = items.map(id => PROGRAMS.find(x => x.id === id)).filter(Boolean);
  const hasItems = items.length > 0;

  // Group by level: Executive at top, Experienced in middle, Rising at bottom
  const levelOrder = ['executive', 'experienced', 'rising'];
  const levelNames = { executive: 'Executive', experienced: 'Experienced', rising: 'Rising' };
  const byLevel = {};
  levelOrder.forEach(l => byLevel[l] = []);
  pItems.forEach(p => {
    if (byLevel[p.level]) byLevel[p.level].push(p);
  });

  // Type badge helper
  function typeBadge(type) {
    if (type === 'sim') return '<span class="type-badge sim">SIM</span>';
    if (type === 'case') return '<span class="type-badge case">CASE</span>';
    if (type === 'course') return '<span class="type-badge course">COURSE</span>';
    return '<span class="type-badge ai">ASYNC</span>';
  }

  // Build HTML
  let html = '';

  // Add Program button (only when empty)
  if (!hasItems) {
    html += `
      <div class="add-program-top">
        <div style="position:relative;">
          <button class="add-btn" onclick="toggleInlineDropdown('${prog}', 'program', this, event)" style="width:100%;justify-content:center;padding:12px 16px;border:2px dashed var(--gray-300);background:var(--gray-100);border-radius:8px;font-size:14px;font-weight:600;color:var(--gray-600);cursor:pointer;">
            + Add a Program
          </button>
        </div>
      </div>
    `;
  }

  // Render items grouped by level (only show levels that have items)
  levelOrder.forEach(level => {
    const levelItems = byLevel[level];
    if (levelItems.length === 0) return; // Skip empty levels

    html += `<div class="level-group ${level}">
      <div class="level-group-header">${levelNames[level]}</div>
      <div class="level-group-items">
        ${levelItems.map(p => `
          <span class="program-chip ${p.type}">
            ${typeBadge(p.type)}
            <span class="chip-name">${p.name}</span>
            <span class="chip-duration">${p.duration}</span>
            <button class="chip-remove" onclick="removeItem('${prog}', '${p.id}', event)">×</button>
          </span>
        `).join('')}
      </div>
    </div>`;
  });

  // Add buttons row
  html += `
    <div class="add-buttons-row">
      <button class="add-inline-btn" onclick="toggleInlineDropdown('${prog}', 'sim', this, event)">+ Sim</button>
      <button class="add-inline-btn" onclick="toggleInlineDropdown('${prog}', 'case', this, event)">+ Case</button>
      <button class="add-inline-btn" onclick="toggleInlineDropdown('${prog}', 'async', this, event)">+ Async</button>
      <button class="add-inline-btn" onclick="toggleInlineDropdown('${prog}', 'course', this, event)">+ Course</button>
    </div>
  `;

  itemsEl.innerHTML = html;

  // Stats
  if (!hasItems) {
    statsEl.style.display = 'none';
    return;
  }

  statsEl.style.display = 'block';

  // Stats - calculate seat time, handling both hours and minutes
  let minHrs = 0, maxHrs = 0;
  pItems.forEach(p => {
    const m = p.duration.match(/(\d+)(?:[–-](\d+))?\s*(min|hrs?)?/i);
    if (m) {
      let minVal = +m[1];
      let maxVal = +(m[2] || m[1]);
      // Check if duration is in minutes
      if (m[3] && m[3].toLowerCase() === 'min') {
        minVal = minVal / 60;
        maxVal = maxVal / 60;
      }
      minHrs += minVal;
      maxHrs += maxVal;
    }
  });
  // Round to nearest 0.1 hour
  minHrs = Math.round(minHrs * 10) / 10;
  maxHrs = Math.round(maxHrs * 10) / 10;

  // Build maps of items to their source programs
  const compMap = {};
  const mindMap = {};
  const toolMap = {};
  pItems.forEach(p => {
    (p.competencies || []).forEach(c => {
      if (!compMap[c]) compMap[c] = [];
      compMap[c].push(p.name);
    });
    (p.mindsets || []).forEach(m => {
      if (!mindMap[m]) mindMap[m] = [];
      mindMap[m].push(p.name);
    });
    (p.tools || []).forEach(t => {
      if (!toolMap[t]) toolMap[t] = [];
      toolMap[t].push(p.name);
    });
  });

  const comps = Object.keys(compMap);
  const minds = Object.keys(mindMap);
  const frameworks = Object.keys(toolMap);

  function makeListItem(text, sources) {
    const sourceText = sources.join(', ');
    return `<li class="hoverable-item" data-sources="${sourceText.replace(/"/g, '&quot;')}">${text}<span class="source-tooltip">From: ${sourceText}</span></li>`;
  }

  statsEl.innerHTML = `
    <div class="stat-row"><span class="stat-label">Seat Time</span><span class="stat-value highlight">${minHrs===maxHrs?minHrs:minHrs+'–'+maxHrs} hrs</span></div>

    <div class="collapsible-section" onclick="this.classList.toggle('expanded')">
      <div class="collapsible-header">
        <h4>Competencies <span class="collapsible-count">(${comps.length})</span></h4>
        <span class="toggle-icon">▼</span>
      </div>
      <div class="collapsible-content">
        <ul>${comps.map(c => makeListItem(c, compMap[c])).join('')}</ul>
      </div>
    </div>

    <div class="collapsible-section mindsets-section" onclick="this.classList.toggle('expanded')">
      <div class="collapsible-header">
        <h4>Mindsets <span class="collapsible-count">(${minds.length})</span></h4>
        <span class="toggle-icon">▼</span>
      </div>
      <div class="collapsible-content">
        <ul>${minds.map(m => makeListItem(m, mindMap[m])).join('')}</ul>
      </div>
    </div>

    <div class="collapsible-section frameworks-section" onclick="this.classList.toggle('expanded')">
      <div class="collapsible-header">
        <h4>Tools & Frameworks <span class="collapsible-count">(${frameworks.length})</span></h4>
        <span class="toggle-icon">▼</span>
      </div>
      <div class="collapsible-content">
        <ul>${frameworks.map(f => makeListItem(f, toolMap[f])).join('')}</ul>
      </div>
    </div>
  `;
}

// ============ COMPARISON ANALYSIS ============
function runComparison() {
  const hasA = programA.length > 0;
  const hasB = programB.length > 0;
  const hasC = programC.length > 0;

  if (!hasA && !hasB) {
    alert('Please add items to at least Program A and Program B to compare.');
    return;
  }

  const modal = document.getElementById('comparison-modal');
  const body = document.getElementById('comparison-modal-body');

  // Show modal with loading state
  modal.classList.add('show');
  body.innerHTML = `
    <div class="comparison-loading">
      <div class="spinner"></div>
      <div>Analyzing programs...</div>
    </div>
  `;

  // Simulate AI analysis (delayed for effect)
  setTimeout(() => {
    const analysis = generateComparisonAnalysis(hasA, hasB, hasC);
    body.innerHTML = analysis;
  }, 1200);
}

function closeComparisonModal() {
  document.getElementById('comparison-modal').classList.remove('show');
}

function generateComparisonAnalysis(hasA, hasB, hasC) {
  const pA = programA.map(id => PROGRAMS.find(p => p.id === id)).filter(Boolean);
  const pB = programB.map(id => PROGRAMS.find(p => p.id === id)).filter(Boolean);
  const pC = programC.map(id => PROGRAMS.find(p => p.id === id)).filter(Boolean);

  // Find shared vs unique items
  const idsA = new Set(programA);
  const idsB = new Set(programB);
  const idsC = new Set(programC);

  const sharedAB = programA.filter(id => idsB.has(id));
  const uniqueToA = programA.filter(id => !idsB.has(id) && (!hasC || !idsC.has(id)));
  const uniqueToB = programB.filter(id => !idsA.has(id) && (!hasC || !idsC.has(id)));
  const uniqueToC = hasC ? programC.filter(id => !idsA.has(id) && !idsB.has(id)) : [];

  // Get competencies/mindsets/tools for each program
  function getContent(items) {
    const comps = new Set();
    const minds = new Set();
    const tools = new Set();
    items.forEach(p => {
      (p.competencies || []).forEach(c => comps.add(c));
      (p.mindsets || []).forEach(m => minds.add(m));
      (p.tools || []).forEach(t => tools.add(t));
    });
    return { comps: Array.from(comps), minds: Array.from(minds), tools: Array.from(tools) };
  }

  const contentA = getContent(pA);
  const contentB = getContent(pB);
  const contentC = hasC ? getContent(pC) : { comps: [], minds: [], tools: [] };

  // Find unique competencies to each program
  const compsOnlyA = contentA.comps.filter(c => !contentB.comps.includes(c) && (!hasC || !contentC.comps.includes(c)));
  const compsOnlyB = contentB.comps.filter(c => !contentA.comps.includes(c) && (!hasC || !contentC.comps.includes(c)));
  const compsOnlyC = hasC ? contentC.comps.filter(c => !contentA.comps.includes(c) && !contentB.comps.includes(c)) : [];

  const mindsOnlyA = contentA.minds.filter(m => !contentB.minds.includes(m) && (!hasC || !contentC.minds.includes(m)));
  const mindsOnlyB = contentB.minds.filter(m => !contentA.minds.includes(m) && (!hasC || !contentC.minds.includes(m)));
  const mindsOnlyC = hasC ? contentC.minds.filter(m => !contentA.minds.includes(m) && !contentB.minds.includes(m)) : [];

  // Get names from IDs
  function getNames(ids) {
    return ids.map(id => PROGRAMS.find(p => p.id === id)?.name).filter(Boolean);
  }

  const sharedNames = getNames(sharedAB);
  const uniqueANames = getNames(uniqueToA);
  const uniqueBNames = getNames(uniqueToB);
  const uniqueCNames = getNames(uniqueToC);

  // Build the analysis HTML
  let html = '';

  // Shared content section
  if (sharedNames.length > 0) {
    html += `<div class="comparison-section">
      <h3>Shared Foundation</h3>
      <p>Both programs include: <strong>${sharedNames.join(', ')}</strong></p>
      <p style="color:var(--gray-500);font-size:14px;margin-top:8px;">This shared content means participants in either program will develop common baseline competencies.</p>
    </div>`;
  }

  // Key differences section
  html += `<div class="comparison-section">
    <h3>What Makes Each Program Different</h3>`;

  if (uniqueANames.length > 0) {
    html += `<div class="belief-card program-a">
      <h4>Program A Includes Uniquely</h4>
      <p><strong>${uniqueANames.join(', ')}</strong></p>
      ${compsOnlyA.length > 0 ? `<p style="margin-top:12px;font-size:13px;"><strong>Unique competencies:</strong> ${compsOnlyA.slice(0,3).join('; ')}${compsOnlyA.length > 3 ? ` (+${compsOnlyA.length - 3} more)` : ''}</p>` : ''}
      ${mindsOnlyA.length > 0 ? `<p style="font-size:13px;"><strong>Unique mindsets:</strong> ${mindsOnlyA.slice(0,2).join('; ')}${mindsOnlyA.length > 2 ? ` (+${mindsOnlyA.length - 2} more)` : ''}</p>` : ''}
    </div>`;
  } else if (sharedNames.length === programA.length) {
    html += `<div class="belief-card program-a">
      <h4>Program A</h4>
      <p>All content in Program A is also in Program B.</p>
    </div>`;
  }

  if (uniqueBNames.length > 0) {
    html += `<div class="belief-card program-b">
      <h4>Program B Includes Uniquely</h4>
      <p><strong>${uniqueBNames.join(', ')}</strong></p>
      ${compsOnlyB.length > 0 ? `<p style="margin-top:12px;font-size:13px;"><strong>Unique competencies:</strong> ${compsOnlyB.slice(0,3).join('; ')}${compsOnlyB.length > 3 ? ` (+${compsOnlyB.length - 3} more)` : ''}</p>` : ''}
      ${mindsOnlyB.length > 0 ? `<p style="font-size:13px;"><strong>Unique mindsets:</strong> ${mindsOnlyB.slice(0,2).join('; ')}${mindsOnlyB.length > 2 ? ` (+${mindsOnlyB.length - 2} more)` : ''}</p>` : ''}
    </div>`;
  } else if (sharedNames.length === programB.length) {
    html += `<div class="belief-card program-b">
      <h4>Program B</h4>
      <p>All content in Program B is also in Program A.</p>
    </div>`;
  }

  if (hasC && uniqueCNames.length > 0) {
    html += `<div class="belief-card program-c">
      <h4>Program C Includes Uniquely</h4>
      <p><strong>${uniqueCNames.join(', ')}</strong></p>
      ${compsOnlyC.length > 0 ? `<p style="margin-top:12px;font-size:13px;"><strong>Unique competencies:</strong> ${compsOnlyC.slice(0,3).join('; ')}${compsOnlyC.length > 3 ? ` (+${compsOnlyC.length - 3} more)` : ''}</p>` : ''}
      ${mindsOnlyC.length > 0 ? `<p style="font-size:13px;"><strong>Unique mindsets:</strong> ${mindsOnlyC.slice(0,2).join('; ')}${mindsOnlyC.length > 2 ? ` (+${mindsOnlyC.length - 2} more)` : ''}</p>` : ''}
    </div>`;
  }

  html += `</div>`;

  // What you'd have to believe section - based on actual unique content
  html += `<div class="comparison-section">
    <h3>What You'd Have to Believe</h3>`;

  function buildBeliefFromContent(label, uniqueItems, uniqueComps, uniqueMinds, cssClass) {
    if (uniqueItems.length === 0) return '';

    const programs = uniqueItems.map(id => PROGRAMS.find(p => p.id === id)).filter(Boolean);
    let beliefs = [];

    // Analyze unique programs
    const hasExperienced = programs.some(p => p.level === 'experienced');
    const hasRising = programs.some(p => p.level === 'rising');
    const hasExecutive = programs.some(p => p.level === 'executive');
    const hasCF = programs.some(p => p.pillar === 'cf');
    const hasTM = programs.some(p => p.pillar === 'tm');
    const hasBA = programs.some(p => p.pillar === 'ba');

    // Generate beliefs based on actual unique content
    if (hasExperienced && !hasRising) {
      beliefs.push('Your audience needs content designed for experienced leaders with existing foundational skills');
    }
    if (hasRising && !hasExperienced) {
      beliefs.push('Your audience needs foundational content suited for rising or new leaders');
    }

    // Analyze specific unique competencies for insights
    const compLower = uniqueComps.map(c => c.toLowerCase()).join(' ');
    if (compLower.includes('cash flow') || compLower.includes('npv') || compLower.includes('investment')) {
      beliefs.push('Financial modeling and long-term investment analysis skills are critical for this audience');
    }
    if (compLower.includes('profitability') || compLower.includes('profit driver')) {
      beliefs.push('Understanding and managing profitability fundamentals is a key development need');
    }
    if (compLower.includes('influence') || compLower.includes('stakeholder')) {
      beliefs.push('Building influence and stakeholder management capabilities is essential');
    }
    if (compLower.includes('feedback') || compLower.includes('coaching') || compLower.includes('trust')) {
      beliefs.push('Developing people management and coaching skills will drive performance');
    }

    // Mindset-based insights
    const mindLower = uniqueMinds.map(m => m.toLowerCase()).join(' ');
    if (mindLower.includes('risk') || mindLower.includes('growth')) {
      beliefs.push('Leaders need to develop a more sophisticated view of growth vs. risk tradeoffs');
    }
    if (mindLower.includes('time value') || mindLower.includes('cash')) {
      beliefs.push('Building cash flow discipline and time-value-of-money thinking is a gap to address');
    }

    if (beliefs.length === 0) {
      beliefs.push(`The specific content in ${label} (${programs.map(p => p.name).join(', ')}) addresses gaps the other programs don't cover`);
    }

    return `<div class="belief-card ${cssClass}">
      <h4>To choose ${label}, you'd believe:</h4>
      <p>${beliefs.map(b => '• ' + b).join('<br>')}</p>
    </div>`;
  }

  html += buildBeliefFromContent('Program A', uniqueToA, compsOnlyA, mindsOnlyA, 'program-a');
  html += buildBeliefFromContent('Program B', uniqueToB, compsOnlyB, mindsOnlyB, 'program-b');
  if (hasC) {
    html += buildBeliefFromContent('Program C', uniqueToC, compsOnlyC, mindsOnlyC, 'program-c');
  }

  html += `</div>`;

  return html;
}

// Hook into showView
const _origShowView = showView;
showView = function(v) {
  _origShowView(v);
  if (v === 'compare') initCompare();
};

// ============ FRAMEWORKS DATA & MODAL ============
const FRAMEWORKS = {
  'levers-of-value': {
    name: 'Levers of Value',
    pillar: 'ba',
    description: 'Business decisions create value. The drivers of a company\'s value are its growth and its profitability, but also how confident its stakeholders feel in the company\'s future: its risk. Growth × Profitability × Risk = Shareholder Value.',
    usedIn: ['Income Challenge', 'Analyzing Profit Drivers', 'Managing Profitability'],
    components: [
      { title: 'Growth', desc: 'Revenue growth through pricing and volume decisions. Use breakeven analysis to understand impact on profitability.' },
      { title: 'Profitability', desc: 'Measuring profit and margins to understand value created. Compare performance across time, market, and competitors.' },
      { title: 'Risk', desc: 'Lower risk companies access cheaper capital and allow more value in NPV analyses.' }
    ]
  },
  'levers-of-value-advanced': {
    name: 'Levers of Value (Advanced)',
    pillar: 'ba',
    description: 'Building on the core Levers of Value, this advanced framework adds ROIC (Return on Invested Capital) and Capital Efficiency as key value drivers for experienced leaders managing multi-period financial strategy.',
    usedIn: ['Business Challenge'],
    components: [
      { title: 'ROIC', desc: 'NOPAT ÷ Invested Capital. A higher ROIC indicates value creation.' },
      { title: 'Capital Efficiency', desc: 'How much capital is needed to generate revenue. Lower working capital = less cash tied up.' },
      { title: 'Growth + Profitability + Risk', desc: 'The foundational levers that drive shareholder value.' }
    ]
  },
  'roic-capital-efficiency': {
    name: 'ROIC & Capital Efficiency',
    pillar: 'ba',
    description: 'The most common return measure used to assess operating performance. ROIC = NOPAT (Net Operating Profit After Tax) ÷ Invested Capital. An increasing ROIC is an indicator of value creation.',
    usedIn: ['Finance Challenge'],
    components: [
      { title: 'ROIC Formula', desc: 'ROIC = NOPAT ÷ Invested Capital (Fixed Assets + Working Capital)' },
      { title: 'Working Capital', desc: 'Accounts Receivable + Inventory - Accounts Payable. Cash tied up in day-to-day operations.' },
      { title: 'Value Creation', desc: 'When ROIC exceeds cost of capital, value is created for stakeholders.' }
    ]
  },
  'npv-cash-flow': {
    name: 'NPV & Cash Flow Modeling',
    pillar: 'ba',
    description: 'Net Present Value analysis discounts future cash flows to evaluate investment decisions. Time value of money: a dollar today is worth more than a dollar tomorrow.',
    usedIn: ['Balancing Growth & Risk'],
    components: [
      { title: 'Cash Flow Modeling', desc: 'Projecting cash inflows and outflows over multiple periods.' },
      { title: 'NPV Analysis', desc: 'Discounting future cash flows to evaluate investment viability.' },
      { title: 'Risk-Return Tradeoff', desc: 'Mapping growth potential against risk exposure with scenario planning.' }
    ]
  },
  'from-idea-to-action': {
    name: 'From Idea to Action',
    pillar: 'cf',
    description: 'A framework for building alignment through influence without formal authority. Focus on understanding stakeholder interests vs. positions, and using expressive and receptive tactics.',
    usedIn: ['Influence Challenge', 'Shifting Mindsets & Behaviors', 'Influencing Without Authority'],
    components: [
      { title: 'Positions vs. Interests', desc: 'Surface deeper motivations behind stated wants.' },
      { title: 'Stakeholder Mapping', desc: 'Map internal and external stakeholders to identify influence pathways.' },
      { title: 'Influence Tactics', desc: 'Expressive (Tell/Sell/Negotiate) vs. Receptive (Inquire/Listen/Facilitate).' },
      { title: 'WIIFM', desc: 'Frame asks in terms of what the other person values.' }
    ]
  },
  'decision-making': {
    name: 'Decision Making Framework',
    pillar: 'cf',
    description: 'The ability to make decisions effectively across multiple departments. The quality of a decision-making process (HOW) is as important as the decision itself (WHAT). Avoid the Content Trap!',
    usedIn: ['Enterprise Challenge', 'Creating Strategic Alignment'],
    components: [
      { title: 'Define', desc: 'Identify decision points, gather information, identify options.' },
      { title: 'Deliberate', desc: 'Evaluate options using appropriate decision models (Sole Decider → Consensus → Delegate).' },
      { title: 'Deliver', desc: 'Execute aligned downstream decisions.' },
      { title: 'VUCA', desc: 'Volatility, Uncertainty, Complexity, Ambiguity - tailor response to each dimension.' }
    ]
  },
  'cynefin': {
    name: 'Cynefin Framework',
    pillar: 'cf',
    description: 'A decision framework that helps leaders match their approach to the type of situation they face. Different domains require different decision-making approaches.',
    usedIn: ['Executive Challenge'],
    components: [
      { title: 'Simple (Known Knowns)', desc: 'Sense → Categorize → Respond. Use best practices and SOPs.' },
      { title: 'Complicated (Known Unknowns)', desc: 'Sense → Analyze → Respond. Requires judgment and expertise.' },
      { title: 'Complex (Unknown Unknowns)', desc: 'Probe → Sense → Respond. Run experiments, look for emerging patterns.' },
      { title: 'Chaotic (Unknowables)', desc: 'Act → Sense → Respond. Make quick decisions with agile iteration.' }
    ]
  },
  'pillars-of-trust': {
    name: 'Pillars of Trust',
    pillar: 'tm',
    description: 'Managers must balance business demands while serving team members\' needs. Working from a solid foundation of trust with direct reports increases effectiveness in navigating these tensions.',
    usedIn: ['Management Challenge', 'Enabling Peak Performance', 'Navigating Critical Conversations'],
    components: [
      { title: 'Be Present', desc: 'Focus, listen actively, make time for all team members. Presence underlies trust.' },
      { title: 'Set Clear Expectations', desc: 'Establish connection, evaluate capabilities, set goals, make the implicit explicit.' },
      { title: 'Enable Motivators', desc: 'Identify unique motivators for each person. Speak to motivators when assigning work.' },
      { title: 'Provide Feedback & Coach', desc: 'Use SBI (Situation-Behavior-Impact). Tie feedback to motivators. Follow up consistently.' }
    ]
  },
  'levers-of-leadership': {
    name: 'Levers of Leadership',
    pillar: 'tm',
    description: 'A framework for leaders of leaders. Managing managers is fundamentally different - you become a force multiplier. Your peer group is your "First Team."',
    usedIn: ['Director Challenge', 'Leading in Times of Change'],
    components: [
      { title: 'Force Multiplier', desc: 'Multiply the capability of your leaders rather than doing the work yourself.' },
      { title: 'First Team Thinking', desc: 'Your peer group is your first team. Optimize for enterprise, not department.' },
      { title: 'Culture as a Lever', desc: 'Intentionally shape culture to drive results.' },
      { title: 'Change Leadership', desc: 'Lead change with intent, empathy, and conviction.' }
    ]
  }
};

function showFrameworkModal(frameworkId) {
  const fw = FRAMEWORKS[frameworkId];
  if (!fw) return;

  const modal = document.getElementById('framework-modal');
  const content = document.getElementById('framework-modal-content');

  content.innerHTML = `
    <div class="modal-header">
      <div>
        <h2>${fw.name}</h2>
        <span class="modal-pillar-badge ${fw.pillar}">${{ba:'Business Acumen',cf:'Cross-Functional',tm:'Team Management'}[fw.pillar]}</span>
      </div>
      <button class="modal-close" onclick="closeFrameworkModal()">×</button>
    </div>
    <div class="modal-body">
      <p class="modal-description">${fw.description}</p>

      <div class="modal-section">
        <h4>Used In</h4>
        <div class="modal-used-in">
          ${fw.usedIn.map(p => `<span class="modal-program-tag">${p}</span>`).join('')}
        </div>
      </div>

      <div class="modal-section">
        <h4>Key Components</h4>
        <div class="modal-components">
          ${fw.components.map(c => `
            <div class="modal-component">
              <div class="modal-component-title">${c.title}</div>
              <div class="modal-component-desc">${c.desc}</div>
            </div>
          `).join('')}
        </div>
      </div>
    </div>
  `;

  modal.classList.add('show');
}

function closeFrameworkModal() {
  document.getElementById('framework-modal').classList.remove('show');
}

// Program Modal Functions
function openProgramModal(programName) {
  // Find program by name (strip duration text if present)
  const cleanName = programName.replace(/\s*\([^)]*\)\s*$/, '').trim();
  const program = PROGRAMS.find(p => p.name === cleanName || p.name.includes(cleanName) || cleanName.includes(p.name));

  if (!program) {
    console.log('Program not found:', cleanName);
    return;
  }

  const modal = document.getElementById('program-modal');
  const content = document.getElementById('program-modal-content');

  const pillarNames = { ba: 'Business Acumen', cf: 'Cross-Functional', tm: 'Team Management' };
  const typeLabels = { sim: 'Simulation', case: 'Case Challenge', 'ai-case': 'Async', course: 'Course' };

  content.innerHTML = `
    <div class="modal-header">
      <div>
        <h2>${program.name}</h2>
        <div style="display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap;">
          <span class="modal-pillar-badge ${program.pillar}">${pillarNames[program.pillar]}</span>
          <span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; background: var(--gray-200); color: var(--gray-700);">${typeLabels[program.type] || program.type}</span>
          <span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 11px; font-weight: 600; background: var(--gray-100); color: var(--gray-600);">${program.duration}</span>
        </div>
      </div>
      <button class="modal-close" onclick="closeProgramModal()">×</button>
    </div>
    <div class="modal-body">
      ${program.framework ? `<p style="font-size: 14px; color: var(--gray-600); margin-bottom: 16px;"><strong>Framework:</strong> ${program.framework}</p>` : ''}

      <div class="modal-section">
        <h4>Competencies (${(program.competencies || []).length})</h4>
        <ul style="margin: 12px 0 0 0; padding-left: 20px; color: var(--gray-700); font-size: 14px; line-height: 1.7;">
          ${(program.competencies || []).map(c => `<li style="margin-bottom: 8px;">${c}</li>`).join('')}
        </ul>
      </div>

      <div class="modal-section">
        <h4>Mindsets (${(program.mindsets || []).length})</h4>
        <ul style="margin: 12px 0 0 0; padding-left: 20px; color: var(--gray-700); font-size: 14px; line-height: 1.7;">
          ${(program.mindsets || []).map(m => `<li style="margin-bottom: 8px;">${m}</li>`).join('')}
        </ul>
      </div>

      <div class="modal-section">
        <h4>Tools & Frameworks (${(program.tools || []).length})</h4>
        <ul style="margin: 12px 0 0 0; padding-left: 20px; color: var(--gray-700); font-size: 14px; line-height: 1.7;">
          ${(program.tools || []).map(t => `<li style="margin-bottom: 8px;">${t}</li>`).join('')}
        </ul>
      </div>
    </div>
  `;

  modal.classList.add('show');
}

function closeProgramModal() {
  document.getElementById('program-modal').classList.remove('show');
}

// Close modal on overlay click
document.addEventListener('click', function(e) {
  if (e.target.id === 'framework-modal') {
    closeFrameworkModal();
  }
  if (e.target.id === 'program-modal') {
    closeProgramModal();
  }
});

// Close modal on Escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeFrameworkModal();
    closeProgramModal();
  }
});

// Add click handlers to program items in explore pages
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.pillar-detail .program-item').forEach(item => {
    item.addEventListener('click', function(e) {
      // Don't trigger if clicking on the tooltip area
      if (e.target.closest('.item-duration')) {
        const parentText = this.textContent.replace(/\s*\([^)]*\)\s*$/, '').trim();
        openProgramModal(parentText);
        return;
      }
      const programText = this.childNodes[0].textContent.trim();
      openProgramModal(programText);
    });
  });
});

</script>

<!-- Framework Modal -->
<div class="modal-overlay" id="framework-modal">
  <div class="modal-content" id="framework-modal-content"></div>
</div>

<!-- Program Modal -->
<div class="modal-overlay" id="program-modal">
  <div class="modal-content" id="program-modal-content"></div>
</div>

</body>
</html>
